<!--
title:   Next.js app router é–‹ç™ºç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (Storybook Supabase shadcn/ui)
tags:    Next.js,Supabase,storybook,shadcn/ui
id:      3ad7a1564d2b6c56d4db
private: false
-->

# é–‹ç™ºç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
Next.jsã¨é–¢é€£ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦Next.jsã‚¢ãƒ—ãƒªé–‹ç™ºã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦åˆ©ç”¨ã—ã¾ã™ã€‚

æœ¬ä½“ã‚³ãƒ¼ãƒ‰ã¯ã‚¼ãƒ­

# é–‹ç™ºä¸­ã®ç¢ºèªï¼†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

Next.js
http://localhost:3000

Storybook
http://localhost:6006/

ãƒ­ãƒ¼ã‚«ãƒ«ã®Supabase
http://localhost:54323/projects

ã‚µãƒ¼ãƒãƒ¼ã®Supabase
https://app.supabase.com/projects

GitHub
masakinihirota/next13apptemplate
https://github.com/masakinihirota/next13apptemplate

Vercel
https://vercel.com/dashboard

----------------------------------------

# ä¾¿åˆ©ã‚µã‚¤ãƒˆã€ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ

Tailwind CSS Cheat Sheet

https://tailwindcomponents.com/cheatsheet/



----------------------------------------

# é‡è¦ã‚³ãƒãƒ³ãƒ‰
ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ã‚„ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«ç­‰

```
Supabase CLI æ›´æ–°
scoop update supabase

Next.jsãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run dev

storybookã‚’èµ·å‹•
npm run storybook

supabase start
supabase stop
supabase db reset
supabase status

Supabase ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
http://localhost:54323

ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ–ãƒƒã‚¯
npm run storybook

ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ (storybookã‚’èµ·å‹•ã•ã›ã¦)
npm run test-storybook

Vercel
npx vercel login
npx vercel link
npx vercel env pull

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã‹ã‚‰ä¸€å®šæœŸé–“å¾Œã«åˆ¥ãƒ–ãƒ©ãƒ³ãƒã‚’ç«‹ã¦ã¦å®Ÿè¡Œ
updateå¯èƒ½ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ã‚’å–å¾—
npm outdated

npm update

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g npm-check-updates
npm-check-updates

ncu

å…¨ã¦æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã„å ´åˆã¯
ncu -u




é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒã®ãƒãƒ¼ã‚¸

git checkout main
git merge -
â€» - è¨˜å·ã¯ç›´å‰ã«ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ãŸãƒ–ãƒ©ãƒ³ãƒã‚’æŒ‡å®šã—ã¦ãƒãƒ¼ã‚¸ã—ã¾ã™ã€‚



```

# ä½œæ¥­ã‚³ãƒãƒ³ãƒ‰

çŸ­ç¸®ã‚³ãƒãƒ³ãƒ‰
cb	ãƒ–ãƒ©ãƒ³ãƒã®ä½œæˆ

mainãƒ–ãƒ©ãƒ³ãƒã«ç§»å‹•
main

ãƒ–ãƒ©ãƒ³ãƒã®ãƒãƒ¼ã‚¸
ç›´å‰ã«ã„ãŸãƒ–ãƒ©ãƒ³ãƒã®ãƒãƒ¼ã‚¸
git merge -

ãƒ–ãƒ©ãƒ³ãƒã®å‰Šé™¤
DDD ãƒ–ãƒ©ãƒ³ãƒå

git merge [ãƒãƒ¼ã‚¸ã—ãŸã„ãƒ–ãƒ©ãƒ³ãƒå]



----------------------------------------

Next.js 13 app router ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ

# ãƒªãƒã‚¸ãƒˆãƒªå

next13apptemplate



# ç’°å¢ƒ

Next.js ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

<details><summary>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãã®ä»–ã®ãƒ„ãƒ¼ãƒ«(é•·ã„)</summary>

(æœª)ï¼æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å€™è£œ

â€» é‡è¦ãªã®ã¯å¿…è¦ã«ãªã£ãŸæ™‚ã«èª¿ã¹ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
ä¸€æ°—ã«å…¨éƒ¨å…¥ã‚Œã¦ã‚‚æ··ä¹±ã™ã‚‹ã ã‘ã§ä½¿ã„ã“ãªã›ã¾ã›ã‚“ã€‚

Next.js by Vercel - The React Framework

https://nextjs.org/

TypeScript: JavaScript With Syntax For Types.

https://www.typescriptlang.org/

Tailwind CSS - Rapidly build modern websites without ever leaving your HTML.

https://tailwindcss.com/

Find and fix problems in your JavaScript code - ESLint - Pluggable JavaScript Linter

https://eslint.org/

Prettier Â· Opinionated Code Formatter

https://prettier.io/

The Open Source Firebase Alternative | Supabase

https://supabase.com/

Storybook: Frontend workshop for UI development

https://storybook.js.org/

GitHub Japan | GitHub

https://github.co.jp/

Vercel

https://vercel.com/

(æœª) tRPC - Move Fast and Break Nothing. End-to-end typesafe APIs made easy. | tRPC

https://trpc.io/



## ãƒ†ã‚¹ãƒˆé–¢é€£

(æœª) Vitest | A blazing fast unit test framework powered by Vite

https://vitest.dev/

ã‚µãƒ³ãƒ—ãƒ«
next.js/examples/with-vitest at canary Â· vercel/next.js Â· GitHub

https://github.com/vercel/next.js/tree/canary/examples/with-vitest

(æœª) Chromatic: Storybook deployment, review, and test

https://www.chromatic.com/

(æœª) Testing Library | Testing Library

https://testing-library.com/

(æœª) JavaScript Component Testing and E2E Testing Framework | Cypress
https://www.cypress.io/

(æœª) Fast and reliable end-to-end testing for modern web apps | Playwright

https://playwright.dev/

(æœª) Jest Â· ğŸƒ Delightful JavaScript Testing

https://jestjs.io/ja/



## i18n å›½éš›åŒ–

(æœª) react-i18next

Introduction - react-i18next documentation

https://react.i18next.com/

ã‚µãƒ³ãƒ—ãƒ«
next.js/examples/app-dir-i18n-routing at canary Â· vercel/next.js Â· GitHub

https://github.com/vercel/next.js/tree/canary/examples/app-dir-i18n-routing



# ä»–ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å€™è£œ

## UI

Next.jsã® app routerã«å¯¾å¿œã—ã¦ã„ã‚‹ UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé›†

shadcn/ui

https://ui.shadcn.com/

Next.js - shadcn/ui

https://ui.shadcn.com/docs/installation/next

Reactã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãªã‚‰@shadcn/uiãŒã¡ã‚‡ã†ã©ã„ã„

https://zenn.dev/mottox2/articles/react-shadcn-ui



(æœª) Kuma UI

https://www.kuma-ui.com/

(æœª) Mantine next example

https://v7.mantine.dev/

Can I use Mantine with Next.js app dir?
Currently, it is not recommended, we are working on new major version that will resolve all of the current issues related to server side rendering.

>Mantineã‚’Next.js app dirã§ä½¿ç”¨ã§ãã¾ã™ã‹ï¼Ÿ
ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã«é–¢ã™ã‚‹ç¾åœ¨ã®å•é¡Œã‚’ã™ã¹ã¦è§£æ±ºã™ã‚‹æ–°ã—ã„ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é–‹ç™ºä¸­ã§ã™ã€‚

ã“ã®version7ãŒé–‹ç™ºä¸­ã§ã™ã€‚



## ãƒ‡ã‚¶ã‚¤ãƒ³

Figma

https://www.figma.com/



## é–‹ç™ºæ™‚ã®åˆ©ç”¨ãƒ„ãƒ¼ãƒ«

DBé–¢é€£
SQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

DBeaver Community

https://dbeaver.io/download/

TablePlus | Modern, Native Tool for Database Management

https://tableplus.com/download

A5:SQL Mk-2 - ãƒ•ãƒªãƒ¼ã®SQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ/ERå›³ä½œæˆã‚½ãƒ•ãƒˆ (æ¾åŸæ­£å’Œ)

https://a5m2.mmatsubara.com/



# ãã®ä»–

(æœª) Zod | Documentation

https://zod.dev/

(æœª) Prisma | Next-generation ORM for Node.js & TypeScript

https://www.prisma.io/



</details>



# ãƒ«ãƒ¼ãƒ«

æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã¯srcãƒ•ã‚©ãƒ«ãƒ€ä»¥ä¸‹ã«ç§»å‹•ã™ã‚‹
src/

å…±é€šã®styleã‚³ãƒ¼ãƒ‰
src/styles



ãƒ–ãƒ©ãƒ³ãƒã¯åŸºæœ¬2ç¨®é¡
mainãƒ–ãƒ©ãƒ³ãƒ å…¬é–‹ç”¨ã®ã‚³ãƒ¼ãƒ‰
å¿…è¦ã«å¿œã˜ã¦é–‹ç™ºç”¨ã®ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ(ã“ã“ã§é–‹ç™ºã‚’ã™ã‚‹)
ã“ã®ï¼’ã¤ã‚’è»¸ã«é–‹ç™ºã—ã¦ã„ã
ä¸€åŒºåˆ‡ã‚Šã¤ã„ãŸã‚‰é–‹ç™ºç”¨ã®ãƒ–ãƒ©ãƒ³ãƒã‚’mainã«ãƒãƒ¼ã‚¸ã—ã¦ã„ã



## é–‹ç™ºæ‰‹æ³•

ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³

ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã¯ã€
é–¢é€£ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¿‘ãã«é…ç½®ã™ã‚‹ã“ã¨ã§ã€
ã‚³ãƒ¼ãƒ‰ã®ç†è§£æ€§ã‚’å‘ä¸Šã•ã›ã‚‹è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸€ã¤ã§ã™ã€‚
ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã‚‚ã„ã„ã¾ã™ã€‚

ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã§
ãƒªãƒã‚¤ãƒ³ãƒ‰åŠ¹æœãŒã‚ã‚‹
åŠå¹´å‰ã®è‡ªåˆ†ã¯åˆ¥äººç†è«–
ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿ã‚„ã™ãã™ã‚‹

ä¸€ã¤ã®ãƒ•ã‚©ãƒ«ãƒ€ã®ä¸­ã«ä¸€ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã‚’ç½®ã
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æˆã‚Šç«‹ã£ã¦ãŠã„
ä¸€ã¤ã¯ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
ä¸€ã¤ã¯è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
ã‚’ã¤ã‹ã†
ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨
Storyãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ä¸€ç·’ã«
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã®rootã«ç½®ã

ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | makotot.dev ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®
https://www.makotot.dev/posts/colocation-translation-ja

ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¨ãƒ†ã‚¹ãƒˆã‚’ä¸€å…ƒç®¡ç†ã§ãã‚‹
ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°ã™ã‚‹äº‹ã«ãªã‚‹ãŸã‚ã€
ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¨ãƒ†ã‚¹ãƒˆã‚’ä¸€å…ƒç®¡ç†ã§ãã¾ã™ã€‚

ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã¯ä¸»ã«2ã¤ã§ã€
é€šå¸¸ã¯ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§Storybookã‚’
è¡¨ç¤ºã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚

ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§ã€
CLIã§ã®å®Ÿè¡ŒãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚



# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```tree
src
â”œâ”€â”€ app
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ ui
â”‚   â”‚   â”œâ”€â”€ alert-dialog.tsx
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ dropdown-menu.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ main-nav.tsx
â”‚   â”œâ”€â”€ page-header.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ lib
â”‚   â””â”€â”€ utils.ts
â”œâ”€â”€ styles
â”‚   â””â”€â”€ globals.css
â”œâ”€â”€ next.config.js
â”œâ”€â”€ package.json
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ tailwind.config.js
â””â”€â”€ tsconfig.json



```

å‚è€ƒ
Next.js - shadcn/ui
https://ui.shadcn.com/docs/installation/next



----------------------------------------

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

npmã‚’æœ€æ–°ã«ã™ã‚‹
npm install -g npm@latest

## Next.jsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx create-next-app@latest

âˆš What is your project named? ... vns
âˆš Would you like to use TypeScript? ... No / Yes
âˆš Would you like to use ESLint? ... No / Yes
âˆš Would you like to use Tailwind CSS? ... No / Yes
âˆš Would you like to use `src/` directory? ... No / Yes
âˆš Would you like to use App Router? (recommended) ... No / Yes
âˆš Would you like to customize the default import alias? ... No / Yes
âˆš What import alias would you like configured? ... @/*



.eslintrc.json(åˆæœŸ)

```.eslintrc.json
{
  "extends": "next/core-web-vitals"
}

```



## TailwindCSS

https://nextjs.org/docs/app/building-your-application/styling/tailwind-css

src\app\globals.css
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®ã‚’
src\styles\globals.css
ã¸ç§»å‹•ã—ã¾ã™ã€‚

ã‚³ãƒãƒ³ãƒ‰
New-Item -ItemType Directory -Path "src\styles"
Move-Item -Path "src\app\globals.css" -Destination "src\styles\globals.css"


globals.cssãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”»é¢ã§å¿…è¦ã ã£ãŸCSSéƒ¨åˆ†ã‚’å‰Šé™¤ã—ã€TailwindCSSã§å¿…è¦ãªéƒ¨åˆ†ã ã‘ã‚’æ®‹ã—ã¾ã™ã€‚

```src\styles\globals.css
@tailwind base;
@tailwind components;
@tailwind utilities;

```



globals.cssãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®pathã‚’ä¿®æ­£ã—ã¾ã™ã€‚

```src\app\layout.tsx
import '@/styles/globals.css'

...

<html lang='ja'>

```

æ—¥æœ¬èªã«ã‚‚ç›´ã—ã¦ãŠãã¾ã™ã€‚



## Storybookã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

npx storybook@latest init


TailwindCSSã‚’Storybookã§ã‚‚é©ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚

```.storybook/preview.ts
import "../src/styles/globals.css"

```



----------------------------------------

## eslint


Next.jsã¨Storybookã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸç›´å¾Œã®eslintã®è¨­å®š

```.eslintrc.json
{
  "extends": [
    "next/core-web-vitals",
    "plugin:storybook/recommended"
  ]
}

```

next.js/packages/eslint-config-next/index.js at canary Â· vercel/next.js Â· GitHub
https://github.com/vercel/next.js/blob/canary/packages/eslint-config-next/index.js

ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã‚’èª¿ã¹ã‚‹ã¨next/core-web-vitalsã¯
react/recommended
react-hooks/recommended
next/recommended
ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ä¸è¦ã§ã™ã€‚



### .eslintignoreãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

touch .eslintignore

lintã‹ã‚‰å¤–ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­å®šã—ã¾ã™ã€‚

```.eslintignore
# config
.eslintrc.js
prettier.config.js
next.config.js
tailwind.config.js
tsconfig.json
postcss.config.js

# build dir
build/
bin/
obj/
out/
.next/

# Storybook
*.stories.ts
*.stories.tsx

```.


# prettier

Install Â· Prettier
https://prettier.io/docs/en/install.html

npm install -D prettier eslint-config-prettier

.eslintrc.jsonã«prettierè¨­å®šã®è¿½åŠ ã‚’ã—ã¾ã™ã€‚

```.eslintrc.json
{
  "extends": [
    "next/core-web-vitals",
    "plugin:storybook/recommended",
    "prettier"
  ]
}

```



package.jsonã«scriptã‚’è¿½åŠ ã—ã¾ã™ã€‚

```package.json

	"format": "prettier --write ."

```


## prettier.config.js è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ  

touch prettier.config.js

```prettier.config.js
/** @type {import('prettier').Config} */
module.exports = {
    "semi": false,
    "singleQuote": false,
    "printWidth": 80,
    "tabWidth": 2,
    "trailingComma": "all",
    "jsxSingleQuote": true
  }

```



æ¬¡ã«ã€.prettierignore ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã€ã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ãªã„ã‹ã‚’ Prettier CLI ã¨ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«çŸ¥ã‚‰ã›ã¾ã™ã€‚

touch .prettierignore

```.prettierignore
# Ignore artifacts:
build
coverage

# dotfile
.env*

# markdown
*.md

# next.js
/.next/
/out/

# production
/build

package-lock.json

```

å‹•ä½œç¢ºèªã®ãŸã‚
prettierã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

npx prettier . --write

å·¨å¤§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã«æ™‚é–“çŸ­ç¸®ã®ãŸã‚
ãƒ•ã‚©ãƒ«ãƒ€ã‚’æŒ‡å®š
prettier --write app/

ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®š
prettier --write app/components/Button.js

globã‚’ä½¿ç”¨ã—ã¦testãƒ•ã‚¡ã‚¤ãƒ«ã ã‘æŒ‡å®š
prettier --write "app/**/*.test.js"

prettierãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‹ã®ç¢ºèªï¼ˆä¸Šæ›¸ãã¯ã—ãªã„ï¼‰
npx prettier . --check





eslintã§å¿…è¦ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¨­å®šã—ã¾ã™ã€‚

javascriptã®lintè¨­å®šãŒãªã„ã®ã§
eslint:recommended
ã‚’å…¥ã‚Œã¾ã™ã€‚


```.eslintrc.json
{
  "extends": [
    "eslint:recommended",
    "next/core-web-vitals",
    "plugin:storybook/recommended",
    "prettier"
  ]
}

```



npm i -D @typescript-eslint/parser 

npm i -D @typescript-eslint/eslint-plugin

```.eslintric.js
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:@typescript-eslint/recommended-requiring-type-checking",
    "next/core-web-vitals",
    "plugin:storybook/recommended",
    "prettier"
  ],
  "parser": "@typescript-eslint/parser",
  "parserOptions":  {
    "project": "./tsconfig.json"
  },
  "plugins": [
    "@typescript-eslint"
  ],
  "root": true
}

```


ä¾¿åˆ©ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ã€‚
tailwindcssã‚’ä¸¦ã¹æ›¿ãˆã—ã¾ã™ã€‚

prettier-plugin-tailwindcss


npm install -D prettier-plugin-tailwindcss

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚è‡ªå‹•åŒ–ã•ã‚Œãªã„ç’°å¢ƒã‚‚ã‚ã‚Šã¾ã™ã€‚
ãã®å ´åˆã¯è¨­å®šã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚


```prettier.config.js
/** @type {import('prettier').Config} */
module.exports = {
    "plugins": [require('prettier-plugin-tailwindcss')],
    "semi": false,
    "singleQuote": true,
    "printWidth": 80,
    "tabWidth": 2,
    "trailingComma": "all",
    "jsxSingleQuote": true
  }

```



# eslint-plugin-import

importæ–‡ã®ä¸¦ã¹æ›¿ãˆã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚

npm install eslint-plugin-import --save-dev



```.eslintrc.json
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:@typescript-eslint/recommended-requiring-type-checking",
    "next/core-web-vitals",
    "plugin:storybook/recommended",
    "prettier"
  ],
  "parser": "@typescript-eslint/parser",
  "parserOptions":  {
    "project": "./tsconfig.json"
  },
  "plugins": [
    "import",
    "@typescript-eslint"
  ],
  "root": true,
  "rules": {
    "import/order": [
      "error",
      {
        "groups": [
          "builtin",
          "external",
          "internal",
          ["parent", "sibling"],
          "object",
          "type",
          "index"
        ],
        "newlines-between": "always",
        "pathGroupsExcludedImportTypes": ["builtin"],
        "pathGroups": [
          {
            "pattern": "@/utils/**",
            "group": "internal",
            "position": "before"
          },
          {
            "pattern": "@/libs/**",
            "group": "internal",
            "position": "before"
          },
          {
            "pattern": "@/hooks/**",
            "group": "internal",
            "position": "before"
          },
          {
            "pattern": "@/components/**",
            "group": "internal",
            "position": "before"
          },
          {
            "pattern": "@/const/**",
            "group": "internal",
            "position": "before"
          },
          {
            "pattern": "@/types/**",
            "group": "internal",
            "position": "before"
          }
        ],
        "alphabetize": {
          "order": "asc"
        }
      }
    ]
  }
}

```





# ã‚³ãƒŸãƒƒãƒˆæ™‚ã«ã‚³ãƒ¼ãƒ‰ã®æ¤œè¨¼ã¨è‡ªå‹•æ•´å½¢ã‚’ã—ã¾ã™ã€‚

huskyã‚’å…¥ã‚Œã¦commitæ™‚ã«lint --fixãŒèµ°ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

npm install --save-dev husky lint-staged
npx husky install
npm pkg set scripts.prepare="husky install"
npx husky add .husky/pre-commit "npx lint-staged"

â€»ã“ã®lint-stagedã®è¨­å®šã§ã¯nextjsã§lintã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¦ã—ã¾ã—ã¾ã™ã€‚



touch .lintstagedrc.js


```.lintstagedrc.js
const path = require('path')

const buildEslintCommand = (filenames) =>
  `next lint --fix --file ${filenames
    .map((f) => path.relative(process.cwd(), f))
    .join(' --file ')}`

module.exports = {
  '*.{ts,tsx}': [
        () => 'tsc --incremental false --noEmit',
        buildEslintCommand,
        "prettier --write"
    ],
}

```


ã“ã®è¨­å®šã‚’ã™ã‚‹ã¨
{.ts,.tsx}ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦next lintã¨ prettier
ã‚’ã‚³ãƒŸãƒƒãƒˆæ™‚ã«è¡Œã£ã¦ãã‚Œã¾ã™ã€‚





huskyã®ç¢ºèª

git config --local core.hooksPath
> .husky

git config --local core.hooksPath ã¯ã€Gitã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã—ã¦ã€Gitãƒ•ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‘ã‚¹ã‚’è¨­å®šã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚

Gitãƒ•ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€Gitã®ç‰¹å®šã®ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã¨ãã«è‡ªå‹•çš„ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚ä¾‹ãˆã°ã€ã‚³ãƒŸãƒƒãƒˆã‚’ã™ã‚‹å‰ã«ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è‡ªå‹•çš„ã«ä¿®æ­£ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚




----------------------------------------

# shadcn/ui

Next.js - shadcn/ui
https://ui.shadcn.com/docs/installation/next

Reactã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãªã‚‰@shadcn/uiãŒã¡ã‚‡ã†ã©ã„ã„
https://zenn.dev/mottox2/articles/react-shadcn-ui

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯CLIã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ–¹æ³•ã¨
ã‚µã‚¤ãƒˆã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã‚„ã‚Šæ–¹ãŒã‚ã‚Šã¾ã™ã€‚



shadcn/uiå…¬å¼ã®æ¨å¥¨ Next.jsã‚¢ãƒ—ãƒªã®æ§‹æˆ

```tree
src
â”œâ”€â”€ app
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ ui
â”‚   â”‚   â”œâ”€â”€ alert-dialog.tsx
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ dropdown-menu.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ main-nav.tsx
â”‚   â”œâ”€â”€ page-header.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ lib
â”‚   â””â”€â”€ utils.ts
â”œâ”€â”€ styles
â”‚   â””â”€â”€ globals.css
â”œâ”€â”€ next.config.js
â”œâ”€â”€ package.json
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ tailwind.config.js
â””â”€â”€ tsconfig.json

```



ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— åˆæœŸåŒ–

UIã®ä¿å­˜ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã£ã¦ãŠãã¾ã™
src/components/ui


npx shadcn-ui@latest init

```
> npx shadcn-ui@latest init
âˆš Would you like to use TypeScript (recommended)? ... no / yes
âˆš Which style would you like to use? Â» New York
âˆš Which color would you like to use as base color? Â» Slate
âˆš Where is your global CSS file? ... src/styles/globals.css
âˆš Would you like to use CSS variables for colors? ... no / yes
âˆš Where is your tailwind.config.js located? ... tailwind.config.js
âˆš Configure the import alias for components: ... @/components
âˆš Configure the import alias for utils: ... @/lib/utils
âˆš Are you using React Server Components? ... no / yes
âˆš Write configuration to components.json. Proceed? ... yes

âœ” Writing components.json...
âœ” Initializing project...
âœ” Installing dependencies...

Success! Project initialization completed.

```


ãƒ˜ãƒ«ãƒ—ã‚³ãƒãƒ³ãƒ‰
npx @shadcn/ui 

CLIã‹ã‚‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•
npx @shadcn/ui add

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’é¸æŠã—ã¾ã™ã€‚
Aã§ã™ã¹ã¦ã‚’é¸æŠã—ã¾ã™ã€‚
â€»ã™ã¹ã¦é¸æŠã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸ

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆã‚’æŒ‡å®šã—ã¾ã™ã€‚
src/components/ui

â€»æ³¨æ„ï¼šã™ã§ã«åŒã˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåãŒå­˜åœ¨ã™ã‚‹ã¨ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚



## ãŠè©¦ã—

buttonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã¾ã™ã€‚

npx @shadcn/ui add

buttonã‚’é¸æŠã—ã¾ã™ã€‚

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆã‚’æŒ‡å®šã—ã¾ã™ã€‚



å‹•ä½œç¢ºèªç”¨

```src\app\page.tsx
import { Button } from '@/components/ui/button'

export default function Home() {
  return (
    <main>
      <Button>Button</Button>
    </main>
  )
}

```



----------------------------------------

# Storybookã®å‹•ä½œç¢ºèª

npm run storybook

Storybook
http://localhost:6006/

ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã§é–‹ç™ºã™ã‚‹ã®ã§ã€
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨
ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«(SF3)ã¨
ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŒä¸€ãƒ•ã‚©ãƒ«ãƒ€å†…ã«å…¥ã‚Œã¾ã™ã€‚

ç¾åœ¨ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒstoriesãƒ•ã‚©ãƒ«ãƒ€ã«å…¥ã£ã¦ã„ã¾ã™ã€‚


## Storybookã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã®çµ„ã¿è¾¼ã¿

Play function
https://storybook.js.org/docs/react/writing-stories/play-function


npm install @storybook/testing-library @storybook/jest @storybook/addon-interactions --save-dev

Storybookã®ã€Œã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã€ã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ç®¡ç†ã™ã‚‹ï¼ï½œSHIFT Group æŠ€è¡“ãƒ–ãƒ­ã‚°
https://note.com/shift_tech/n/n5646b52b3092


ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã«å¯¾å¿œã—ãŸ
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨
ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚



```Button.tsx
import React, { useState } from "react";
import { useRouter } from "next/router";
import "./button.css";

interface ButtonProps {
  testId: string;
  label: string;
  text?: string;
  href?: string;
  primary?: boolean;
  "data-testid"?: string;
}

export const Button = ({
  testId,
  label,
  text,
  href,
  primary = false,
  ...props
}: ButtonProps) => {
  const [textToggle, setTextToggle] = useState(false);
  const router = useRouter();
  const mode = primary ? "primary" : "";

  const onClick = () => {
    if (href) {
      router.push(href);
    } else {
      setTextToggle(!textToggle);
    }
  };

  return (
    <div>
      <button
        data-test-id={testId}
        type="button"
        className={["button", mode].join(" ")}
        onClick={onClick}
        {...props}
      >
        {ã€€labelã€€}
      </button>
      {textToggle && <div>{text}</div>}
    </div>
  );
};

```



```button.css
.button {
  font-family: "Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 20px;
  font-weight: 700;
  border: 0;
  border-radius: 3em;
  cursor: pointer;
  display: inline-block;
  line-height: 1;
  padding: 10px 20px;
  color: #333;
  background-color: transparent;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset;
}
.primary {
  color: white;
  background-color: #1ea7fd;
}

```


```Button.stories.ts
import type { Meta, StoryObj } from "@storybook/react";
import { within, userEvent } from "@storybook/testing-library";
import { jest, expect } from "@storybook/jest";

import { Button } from "./Button";

const fn = jest.fn();

const meta: Meta<typeof Button> = {
  title: "Atoms/Button",
  component: Button,
  tags: ["autodocs"],
  parameters: {
    nextjs: {
      router: {
        push: fn,
      },
    },
  },
};

export default meta;
type Story = StoryObj<typeof Button>;

export const Default: Story = {
  args: {
    label: "Default",
    "data-testid": "button",
  },
  play: async ({ canvasElement, step }) => {
    const canvas = within(canvasElement);

    await step("ãƒœã‚¿ãƒ³ã«Labelã®æ–‡å­—åˆ—ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹", async () => {
      await expect(canvas.getByText("Default")).toBeInTheDocument();
    });
  },
};

export const Primary: Story = {
  args: {
    primary: true,
    label: "Primary",
    "data-testid": "button",
  },
  play: async ({ canvasElement, step }) => {
    const canvas = within(canvasElement);

    await step("ãƒœã‚¿ãƒ³ã®classNameå±æ€§ã«primaryãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹", async () => {
      const button = canvas.getByTestId("button");
      await expect(button.classList.contains("primary")).toBe(true);
    });
  },
};

export const Toggle: Story = {
  args: {
    label: "Toggle",
    text: "Success",
    "data-testid": "button",
  },
  play: async ({ canvasElement, step }) => {
    const canvas = within(canvasElement);

    await step("ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§textã‚’è¡¨ç¤ºã™ã‚‹", async () => {
      await userEvent.click(canvas.getByTestId("button"));
      await expect(canvas.getByText("Success")).toBeInTheDocument();
    });

    await step("å†åº¦ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§textã‚’éè¡¨ç¤ºã«ã™ã‚‹", async () => {
      await userEvent.click(canvas.getByTestId("button"));
      await expect(canvas.queryByText("Success")).toBeNull();
    });
  },
};

export const Link: Story = {
  args: {
    label: "Link",
    href: "/auth/login",
    "data-testid": "button",
  },
  play: async ({ canvasElement, step }) => {
    const canvas = within(canvasElement);

    await step("ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§hrefã§æŒ‡å®šã—ãŸç”»é¢ã«é·ç§»ã™ã‚‹", async () => {
      await userEvent.click(canvas.getByTestId("button"));
      await expect(fn.mock.lastCall).toContainEqual("/auth/login");
    });
  },
};

```

Storybookã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ç«‹ã¡ä¸Šã’ã‚‹ã¨
Atoms
	Button
		Default
		Primary
		Toggle
		Link

ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

Interactionsã‚¿ãƒ–ã«ç§»å‹•ã™ã‚‹ã¨
ãƒ†ã‚¹ãƒˆãŒPASSã—ã¦ã„ã¾ã™ã€‚





## ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¨ˆæ¸¬

npm install -D @storybook/test-runner @storybook/addon-coverage

â€»ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€storybookã‚’å†èµ·å‹•ã•ã›ã¦ãŠã‹ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

scriptsã‚’è¿½åŠ ã—ã¾ã™ã€‚

```package.json
{
 "scripts": {
 ...
 "test-storybook": "test-storybook --coverage",
 }
}

```



```.storybook/main.ts

const config: StorybookConfig = {
 addons: [
 ...
 '@storybook/addon-coverage',
 ],
};

```



ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¨ˆæ¸¬ã«ã¯storybookã‚’èµ·å‹•ã•ã›ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
npm run storybook

ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¨ˆæ¸¬(æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œã—ã¾ã™ã€‚)
npm run test-storybook


ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã®å‹•ä½œç¢ºèª
ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¨ˆæ¸¬ã‚’ç¢ºèª



----------------------------------------

# Supabase

ã“ã®Supabaseé …ç›®ã¯

Supabase ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ ï¼‹ ã‚µãƒ¼ãƒãƒ¼é‹ç”¨ã‚’æƒ³å®š 2023 - Qiita
https://qiita.com/masakinihirota/items/be94b4c74a7850a4b79c

ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚



ãƒ­ãƒ¼ã‚«ãƒ«ã«Supabaseã®CLI (command line interface)ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

scoop bucket add supabase https://github.com/supabase/scoop-bucket.git
scoop install supabase

ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
scoop update supabase

Supabase CLIã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
supabase --version



Supabaseæœ¬ä½“ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨Supabase Authãƒ˜ãƒ«ãƒ‘ãƒ¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install supabase @supabase/supabase-js @supabase/auth-helpers-nextjs



Supabaseã®åˆæœŸåŒ–
supabase init



## ã‚µãƒ¼ãƒãƒ¼å´ã¨ã®æ¥ç¶šï¼ˆå¿…è¦ãªå ´åˆï¼‰
Supabaseã¸ã®ãƒ­ã‚°ã‚¤ãƒ³
supabase login

Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ãƒªãƒ³ã‚¯
supabase link

## Dockerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Supabase ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ ï¼‹ ã‚µãƒ¼ãƒãƒ¼é‹ç”¨ã‚’æƒ³å®š 2023 - Qiita
https://qiita.com/masakinihirota/items/be94b4c74a7850a4b79c

ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚


## ãƒ­ãƒ¼ã‚«ãƒ«ã®Supabaseã‚’å§‹ã‚ã‚‹

supabase start

```
06-18 15:49:49> supabase start
Seeding data supabase\seed.sql...me...
                                 Started supabase local development setup.

         API URL: http://localhost:54321
     GraphQL URL: http://localhost:54321/graphql/v1
          DB URL: postgresql://postgres:postgres@localhost:54322/postgres
      Studio URL: http://localhost:54323
    Inbucket URL: http://localhost:54324
      JWT secret: super-secret-jwt-token-with-at-least-32-characters-long
        anon key: eyJhb**********************************n_I0
service_role key: eyJhbGci*******************************pN81IU

```

ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
supabase status

ãƒ­ãƒ¼ã‚«ãƒ«ã®Supabase(Docker)ã‚’æ­¢ã‚ã‚‹
supabase stop

## Supabaseã‚’åˆ©ç”¨ã—ãŸãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™º

Supabase ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ ï¼‹ ã‚µãƒ¼ãƒãƒ¼é‹ç”¨ã‚’æƒ³å®š 2023 - Qiita
https://qiita.com/masakinihirota/items/be94b4c74a7850a4b79c

ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

## Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åŸºç¤

src\utils\supabase.tsã¨ã„ã†æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®å†…å®¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```src\utils\supabase.ts

import { createClient } from '@supabase/supabase-js'

export default createClient(
 process.env.NEXT_PUBLIC_SUPABASE_URL!,
 process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
)

```

ã“ã‚Œã‚’å‘¼ã³å‡ºã™ã“ã¨ã§Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒä½œæˆã§ãã¾ã™ã€‚





----------------------------------------

# ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é€£æºã‚³ãƒãƒ³ãƒ‰

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’GitHubã§å…¬é–‹ã—ã¦ã€ãã‚Œã‚’Vercelã‹ã‚‰é€£æºã•ã›ã¾ã™ã€‚

å–å¾—ã—ãŸç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ãŒã‚ã‚‹ã®ãªã‚‰ãƒ‰ãƒ¡ã‚¤ãƒ³ç™»éŒ²ã‚‚ã§ãã¾ã™ã€‚

vercelé–¢é€£
Next.jsÃ—SupabaseÃ—Vercelé€£æºã«ã¤ã„ã¦ - Qiita
https://qiita.com/kaho_eng/items/8a7faf77222a599fb31c

npx vercel login

Vercelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«ã‚¯ãƒ­ãƒ¼ãƒ³ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãƒªãƒ³ã‚¯ã—ã¾ã™ã€‚
npx vercel link

ç’°å¢ƒå¤‰æ•°ã‚’é€£æºã—ãŸVercelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã‚³ãƒ”ãƒ¼ã—ã¦ .env.localã«ä¸Šæ›¸ãã§ãã¾ã™ã€‚
npx vercel env pull






































# å‚è€ƒURL

GitHub Qiitaè¨˜äº‹
Supabase ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ ï¼‹ ã‚µãƒ¼ãƒãƒ¼é‹ç”¨ã‚’æƒ³å®š 2023
https://qiita.com/masakinihirota/items/be94b4c74a7850a4b79c

GitHub masakinihirota/vns
https://github.com/masakinihirota/vns

Supabase VNS
https://app.supabase.com/project/gzctqdrrnnkaxwwtzbsw

Vercel VNS
https://vercel.com/masakinihirota/vns

Next.js by Vercel - The React Framework
https://nextjs.org/

Storybook
https://storybook.js.org/docs/react/get-started/install/

ReactÃ—TypeScriptã§ã¯ã˜ã‚ã‚‹Vitest
https://zenn.dev/bs_kansai/articles/b79d97a8f921d6

Storybook(v7)ã‚’Vitestã§å†åˆ©ç”¨ã™ã‚‹ã¨ã
https://zenn.dev/pluto0004/articles/3bab7d07805cff




[2023å¹´]Next.js + eslintå‘¨ã‚Šã®è¨­å®š
https://zenn.dev/resistance_gowy/articles/91b4f62b9f48ec

ã€ç’°å¢ƒæ§‹ç¯‰ã€‘Next Ã— App Router Ã— Prettier Ã— ESLint Ã— Husky Ã— Shadcn/ui ã®ç’°å¢ƒæ§‹ç¯‰ã‚’ã—ã¦ã¿ã‚‹ - Qiita

https://qiita.com/hiroto_dnpk/items/a7ebbca3294c7befb4b7







----------------------------------------

# æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

<details><summary>æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«[WIP]</summary>

# vitest

ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«

???
npm create vite@latest

React ã¨ TypeScript ã‚’é¸æŠã—ã¾ã™ã€‚

cd vitest-react
npm install
npm run dev

ã“ã“ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼Ÿ
npm install -D vitest

npm install -D jsdom @testing-library/react @testing-library/jest-dom


.eslintignore
ãƒ•ã‚¡ã‚¤ãƒ«å†…ã«vitest.config.tsã‚’æ›¸ã

```
vite.config.ts
vitest.config.ts
.eslintrc.cjs

```

Vitest ã®è¨­å®š
vite.config.ts



```vitest.config.ts
import { defineConfig } from 'vite'

export default defineConfig({
    test: {
        include: ['src/**/*.test.tsx'],
        environment: 'jsdom',
    },
})

```

src/ä»¥ä¸‹ã®ã¿ã«è¨­å®šã—ã¦ã‚ã‚‹




## ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä½œæˆ

App ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã—ã¦ã€ã€ŒVite + Reactã€ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã¿ã¾ã™ã€‚



```
import '@testing-library/jest-dom';
import { render, screen } from '@testing-library/react';
import { expect, test } from 'vitest';
import App from '../App';

test('renders h1 text', () => {
    render(<App />);
    const headerElement = screen.getByText("Vite + React");
    expect(headerElement).toBeInTheDocument();
});

```


å®Ÿè¡Œ
npx vitest

ã‚«ãƒãƒ¬ãƒƒã‚¸ã®å®Ÿè¡Œ
npx vitest run --coverage




```
import { defineConfig } from 'vite'

export default defineConfig({
    test: {
        globals: true,
        include: ['src/**/*.test.tsx'],
        environment: 'jsdom',
        coverage: {
            reporter: ['html'],
            reportsDirectory: './coverage'
        },
    },
})

```



</details>



