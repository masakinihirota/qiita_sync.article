<!--
title:   GitHub Copilot導入後、初めて使う時。(豊富な使用例付き)
tags:    githubcopilot,githubcopilotchat
id:      0e58a6b921e4420a2882
private: false
-->

### アイコンの説明

**GitHub Copilot コマンド パレット**

![GitHub Copilotアイコン画像説明付き.PNG](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44761/c59d6119-a693-a156-7f4b-65c57d9308d4.png)

### キーボードショートカットキー (VSCode)

| 操作                                                               | ショートカットキー |
| ------------------------------------------------------------------ | ------------------ |
| 提案を受け入れる                                                   | TAB キー           |
| 提案を拒否する                                                     | Esc キー           |
| まとめて提案を表示させる                                           | Ctrl+Enter キー    |
| 単語単位で受け入れる                                               | Ctrl ＋右矢印キー  |
| 単語単位での受け入れを元に戻す                                     | Ctrl ＋左矢印キー  |
| 次の提案を見る                                                     | Alt ＋]            |
| 前の提案に戻る                                                     | Alt ＋[            |
| インライン候補をトリガーする [独自](#キーボードショートカットキー) | Alt ＋/            |
| Labs 機能リストを表示                                              | Ctrl+Shift+Alt+e   |
| サイドバー開閉のトグル [独自](#キーボードショートカットキー)       | Ctrl+Shift+a       |

※ インライン候補をトリガーするとは提案が表示される場所ならばどこでも GitHub Copilot が動きます。
例えば、提案が表示される場所からカーソルが動かしてしまっても、カーソルを元の場所に戻してトリガーコマンドを使うと提案が表示されます。

※ インライン候補をトリガーするはデフォルトのキー設定では動きません。：Windows で確認
自分でキーボードショートカットキーを設定する必要があります。（これは自分の環境だけかもしれません。）

# 導入後（課金後）

導入後に何をしていいのか？何が出来るのかがよくわからなかったので調べてみた。

# 環境

Windows10
GitHub Copilot (導入 1 年契約 or1 月契約)
VSCode

# GitHub Copilot の種類

1. Copilot
1. Copilot Labs
1. Copilot Nightly
1. Copilot for Individuals
1. Copilot for Business
1. Copilot X
1. Copilot Chat
1. Copilot for Pull Requests
1. Copilot for CLI(command line interface)
1. Copilot Voice
1. Copilot for Docs

- Copilot
  GitHub Copilot の**基本的な機能**です。**GPT-3**をベースに作られています。Visual Studio Code、Visual Studio、Neovim、JetBrains の各統合開発環境（IDE）で利用できます。
- Copilot Labs
  GitHub Copilot の**実験的な機能**を提供するプログラムです。このプログラムは、GitHub Copilot の最新機能を試す事ができます。
  いうなれば、幅広く横に広げる機能を追加していきます。
- Copilot Nightly
  **GitHub Copilot の最新版**を提供するプログラムです。このプログラムは、GitHub Copilot の最新機能を試す事ができます。ただし、**不安定な機能**が含まれている可能性があります。
  いうなれば、最新の機能を追加していきます。
- Copilot for Individuals
  料金のプラン名：**個人利用向け**の GitHub Copilot です。このプランは、個人で利用する場合に適しています。
- Copilot for Business
  料金のプラン名：**ビジネス利用向け**の GitHub Copilot です。このプランは、ビジネスで利用する場合に適しています。
- Copilot X
  **GPT-4**を活用した、GitHub Copilot の高度な機能を提供するプログラムです。このプログラムは、より高度なコード補完機能を提供します。日本ではまだ発表されていません。
- Copilot Chat
  Copilot X の機能の一つと思われる名前。チャットベースのコード補完機能を提供するプログラムです。このプログラムは、**チャットベースのコード補完機能**を提供します。
- Copilot for Pull Requests
  Copilot X の機能の一つと思われる名前。Pull Request 作成時にコード補完機能を提供するプログラムです。このプログラムは、**Pull Request 作成時にコード補完機能**を提供します。
- Copilot for CLI(command line interface)
  Copilot X の機能の一つと思われる名前。コマンドラインインターフェース（CLI）で利用できる GitHub Copilot です。このプログラムは、**CLI 上でコード補完機能**を提供します。
- Copilot Voice
  Copilot X の機能の一つと思われる名前。音声入力によるコード補完機能を提供するプログラムです。このプログラムは、**音声入力によるコード補完機能**を提供します。
- Copilot for Docs
  Copilot X の機能の一つと思われる名前。ドキュメント作成時にコード補完機能を提供するプログラムです。このプログラムは、**ドキュメント作成時にコード補完機能**を提供します。

※現在の GitHub Copilot のモデルは GPT-3 です。

※Copilot X 発表時に追加される機能は未定とされていますが、これらが追加されるのではないかと思われます。

- Copilot Chat
- Copilot for Pull Requests
- Copilot for CLI(command line interface)
- Copilot Voice
- Copilot for Docs
  Copilot X が現在の Copilot のバージョンアップ版なのか、別の機能として販売されるのかはわかっていません。
  ただ、「Copilot X の開発コンセプトが、**開発ライフサイクル全体を通してすぐに利用できる AI アシスタント**に進化させるべく取り組んでいます。」とあるのでこれらの機能を統合したものを Copilot X として販売するものと思われます。

# どんな事ができるのか？（英語）

https://githubnext.com/projects/code-brushes

※このサイトでは具体的な挙動が見れるので特にオススメです。
ボタンひとつで切り替えて表示されるので、**GitHub Copilot を理解するのに一番便利なサイト**だと思います。

`ORIGINAL CODE（ボタン）CODE UPDATED WITH MAKE MORE READABLE BRUSH`

中央のボタンを押すだけで切り替えられます。
左側はオリジナルコード、右側は GitHub Copilot が書き換えたコードが表示されます。

## 用語 GitHub Copilot 関連

### 提案 Suggest

提案とは、GitHub Copilot が出してくるコードの事です。

### GitHub Copilot コマンド パレット

**GitHub Copilot Labs** の機能をボタン一つで呼び出すための機能です。
それぞれの関数名の上に出てくる約 10 個の Copilot アイコンの事を指します。
アイコン一つ一つに **GitHub Copilot Labs** の機能が振り分けられています。

### GitHub Copilot ステータスアイコン

VSCode 画面下のパネルにあるアイコンです。
（左サイドバーにある GitHub Copilot のアイコンと同じアイコンがあるはずです。）
GitHub Copilot の機能が有効かどうかを確認する事ができます。

このアイコンから GitHub Copilot の機能を有効にしたり、無効にしたりする事ができます。

### テレメトリデータ

システムから収集された状態情報、性能指標、および操作データなどのデータの事です。主に Web 開発において、Web サイトの訪問者数やアプリケーションの使用状況を収集し、品質管理やトラブルシューティングに役立つ。データ収集システム、データベース、ビジネスインテリジェンスツール、機械学習アルゴリズムなどが使用されます。

# はじめの一歩

VSCode で使用する。問題はここから、

最初に、これらの VSCode 拡張機能を入れます。

- GitHub Copilot 拡張機能 (Nightly と共用不可)
- GitHub Copilot Labs 拡張機能
- GitHub Copilot Nightly 拡張機能
  （Nightly は GitHub Copilot 拡張機能をアンイストールしないとインストール出来ません。）

GitHub Copilot
https://marketplace.visualstudio.com/items?itemName=GitHub.copilot

GitHub Copilot Labs
https://marketplace.visualstudio.com/items?itemName=GitHub.copilot-labs

GitHub Copilot Nightly
https://marketplace.visualstudio.com/items?itemName=GitHub.copilot-nightly

※GitHub Copilot X の発表はされましたが、まだ詳細な報告はされていません。 (2023 年 3 月 28 日)

上記の拡張機能を入れると VSCode の再起動が求められます。
次に拡張機能を利用するため GitHub にログインをするように求められます。

ログインをします。

GitHub Copilot Labs で認証をします。

## GitHub Copilot の有効化、無効化

GitHub Copilot ステータスアイコンをマウスでクリックする事で、オンオフを選択できます。
※VSCode の下にあるステータスバーに表示されているアイコンです。

# 使い方

## GitHub Copilot の基本的な使い方

### 何かコードを書きたい

作成したい言語に適した拡張子がついた新しいファイルを用意します。
関数名を考えて書き出します。
そうすると、Copilot がコードを提案してきます。

### 例 基礎中の基礎 基本的な使い方

```Dates.js
function calculateDaysBetweenDates(begin, end) {

```

ここまで書けば提案が表示されます。

**TAB キー**で決定します。

提案を拒否する場合は、
**Esc キー**を押します。

以上が基本的な使い方です。

※関数名が作成したいコードの説明になっているのがポイントです。
GitHub Copilot は関数名を見て、その関数が何をするのかを理解しています。
他のファイルを含め、周囲のコードから関数や変数を正しく「推測」する事ができます。

## さらなる Copilot の機能

#### 他の提案を見たい時

提案が出ている場面で
**次の提案を見る: Alt ＋]**
**以前の提案に戻る: Alt ＋[**

これらのショートカットキーを使用します。

#### 一単語ごとに確定していきたい

**1 単語ごとに提案を受け入れます: Ctrl ＋右矢印キー**

**1 単語ごとに確定した提案を元に戻します: Ctrl ＋左矢印キー**

このショートカットキーは文章が提案された時に、**「単語単位」** で提案を受け入れます。

#### まとめて提案を出す

通常は１行に 1 つづつ、その他の次の提案はショートカットキーで一つ一つ見ていきますが、それらをまとめて表示したい時に使用します。

**まとめて提案を別ウィンドウに表示させたい: Ctrl+Enter キー**

まとめて提案を複数表示させる事が出来ます。
別ウィンドウが開きますのでその中から選びます。
どれを選ぶか決めたら、提案の上にある **Accept Solution** をクリックします。

拒否したい場合は **タブ** を閉じます。

### ある特定の場所（カーソルの場所）で提案を始めたい時

**インライン候補をトリガーする Alt ＋/**
これは、GitHub Copilot に手動でコードの提案をさせるショートカットキーです。
現在の位置で GitHub Copilot を使いたい場合に使用します。

※提案にカーソルを合わせると、提案を選択するための GitHub Copilot コマンド パレットが表示されます。

### コメント欄からコードを書く

### 例 コメント書いてコードを提案してもらう

```LeapYear.ts
// うるう年の判定
function

```

↑ コメントに書きたいコードの説明を書き、そして function まで書いて暫く待つとコードを提案をしてくれます。

Alt+] で次の提案を見る事が出来ます。
Alt+[ で前の提案に戻る事が出来ます。

※提案が複数ある場合

```LeapYear.ts
//うるう年の判定
function isLeapYear(year) {
    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
}
console.log(isLeapYear(2020));
console.log(isLeapYear(2021));

```

↑ タブキーを押していくだけで、コードを書いていく事が出来ます。
ファイルの拡張子は「.ts」(TypeScript)なので型をつけてみます。

カーソルを関数の上に持っていき、
GitHub Copilot コマンド パレットの「型を追加」ボタンを押します。
そうすると、自動的に範囲選択がされて、型をつける事が出来ます。

```LeapYear.ts
//うるう年の判定
function isLeapYear(year: number): boolean {
    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
}
console.log(isLeapYear(2020));
console.log(isLeapYear(2021));

```

↑ このように自動で型をつけてくれます。

関数名まで提案してくれています。
このように GitHub Copilot をうまく使えば関数名や変数名などに悩む必要がなくなります。
適切な名前をつけるのは熟練者でも難しいですが、それを考える必要がなくなるのは大きいですね。

```LeapYear.ts
//うるう年の判定
function isLeapYear(year: number): boolean {
    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
}
console.log(isLeapYear(2020));
console.log(isLeapYear(2021));

```

#### Tips

↑ のように型をつけたのに、もう一度 GitHub Copilot コマンドパレットの型のアイコンを押すと ↓ 型が外れたコードになります。

```LeapYear.ts
//うるう年の判定
function isLeapYear(year) {
    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
}
console.log(isLeapYear(2020));
console.log(isLeapYear(2021));

```

# GitHub Copilot のコツ

## コメントを活用します

コメントを書きましょう、コメントが充実している程そして正確な程 提案が良くなります。

型をつけましょう、型をつける事で提案が良くなります。

その他にも・・・

- データの型
- データの範囲
- データの意味
- データの関係性
- データの処理内容
- データの出力内容
  全部書く必要はありませんが、できるだけ多くの情報を書くようにしましょう。
  多くの情報があればあるほど提案の精度が上がっていきます。

逆に与えるデータが間違っていると、提案も間違ってしまいます。

### 例 詳細なコメントを書いてみる

コメントを充実させるとどうなるか見てみましょう。

#### 詳細なコメントを書いた場合

↓ コメント内で FizzBuzz 問題について色々と書いてみます。
(FizzBuzz 問題は有名なのでコメントも正確な提案をしてくれました。)

```fizzBuzz.ts
// 関数の名前:FizzBuzz問題
// 引数: 最大値
// 返り値: なし
// 処理内容: 1から最大値までの数値をコンソールに出力する
//           ただし、3の倍数の時は数値の代わりに「Fizz」を、
//           5の倍数の時は「Buzz」を、
//           3の倍数かつ5の倍数の時は「FizzBuzz」を出力する
function

```

↑ このようにコメントを書くと、提案が正確になります。
なのでこの状態から、

↓ このように提案を出してみるとこうなりました。

```fizzBuzz.ts
// 関数の名前:FizzBuzz問題
// 引数: 最大値
// 返り値: なし
// 処理内容: 1から最大値までの数値をコンソールに出力する
//           ただし、3の倍数の時は数値の代わりに「Fizz」を、
//           5の倍数の時は「Buzz」を、
//           3の倍数かつ5の倍数の時は「FizzBuzz」を出力する
function fizzBuzz(max) {
    for (var i = 1; i <= max; i++) {
        var output = "";
        if (i % 3 === 0) {
            output += "Fizz";
        }
        if (i % 5 === 0) {
            output += "Buzz";
        }
        if (output === "") {
            output += i;
        }
        console.log(output);
    }
}

```

### 例 詳細なコメントにさらに追記する、複数の提案を見る。

↓ この行をコメントに追記してみました。
`// 引数のでデフォルト値は100`

```fizzBuzz.ts
// 関数の名前:FizzBuzz問題
// 引数: 最大値
// 引数のでデフォルト値は100
// 返り値: なし
// 処理内容: 1から最大値までの数値をコンソールに出力する
//           ただし、3の倍数の時は数値の代わりに「Fizz」を、
//           5の倍数の時は「Buzz」を、
//           3の倍数かつ5の倍数の時は「FizzBuzz」を出力する
//           それ以外の場合は数値を出力する
function

```

`function`を入力した時点で **ctrl+Enter** を押してみます。
そうすると別ウィンドウが開き、複数の提案を見る事が出来ます。

提案を見るとコメントを読み込んでコードを書いてくれます。

```fizzBuzz.ts
// 関数の名前:FizzBuzz問題
// 引数: 最大値
// 引数のでデフォルト値は100
// 返り値: なし
// 処理内容: 1から最大値までの数値をコンソールに出力する
//           ただし、3の倍数の時は数値の代わりに「Fizz」を、
//           5の倍数の時は「Buzz」を、
//           3の倍数かつ5の倍数の時は「FizzBuzz」を出力する
//           それ以外の場合は数値を出力する
function fizzBuzz(max:number = 100):void {
  for (let i:number = 1; i <= max; i++) {
    if (i % 3 === 0 && i % 5 === 0) {
      console.log('FizzBuzz')
    } else if (i % 3 === 0) {
      console.log('Fizz')
    } else if (i % 5 === 0) {
      console.log('Buzz')
    } else {
      console.log(i)
    }
  }
}


```

↑ 複数の提案の中に引数のデフォルト値と型を書いたコードがありそれを選択肢してみました。このように、より詳細な情報を与えれば一段上の提案をしてくれます。

### 例 複数の提案を見る その 2

関数名を書かなくても、コメントから類推してコードを提案してくれます。

↓ このように SQL 文があったとします、コメントアウトしておきます。
そして`type User`と入力した時点で **Ctrl ＋ Enter** を押すと、別のウィンドウに幾つかの提案が表示されます。

```users.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
type User

```

**Accept Solution** を押すとその提案が採用されます。

<details><summary>複数の提案が提示されます。(長いので折りたたみます)</summary>

```User.ts

Synthesizing 7/10 solutions

=======
Suggestion 1

type User = {
  id: number;
  username: string;
  password: string;
  email: string;
};

// Path: posts.ts
// CREATE TABLE posts (
//   id INT PRIMARY KEY,
//   title VARCHAR(255) NOT NULL,
//   content TEXT NOT NULL,
//   created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
//   updated_at DATETIME ON UPDATE CURRENT_TIMESTAMP,
//   user_id INT NOT NULL,
//   FOREIGN KEY (user_id) REFERENCES users(id)
// );
type Post = {
  id: number;
  title: string;
  content: string;
  created_at: string;
  updated_at: string;
  user_id: number;
};

// Path: comments.ts
// CREATE TABLE comments (
//   id INT PRIMARY KEY,
//   content TEXT NOT NULL,
//   created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
//   updated_at DATETIME ON UPDATE CURRENT_TIMESTAMP,
//   post_id INT NOT NULL,
//   user_id INT NOT NULL,
//   FOREIGN KEY (post_id) REFERENCES posts(id),
//   FOREIGN KEY (user_id) REFERENCES users(id)
// );
type Comment = {
  id: number;
  content: string;
  created_at: string;
  updated_at: string;
  post_id: number;
  user_id: number;
};

// Path: likes.ts
// CREATE TABLE likes (
//   id INT PRIMARY KEY,
//   post_id INT NOT NULL,
//   user_id INT NOT NULL,
//   FOREIGN KEY (post_id) REFERENCES posts(id),
//   FOREIGN KEY (user_id) REFERENCES users(id)
// );
type Like = {
  id: number;
  post_id: number;
  user_id: number;
};

// Path: views.ts
// CREATE TABLE views (
//   id INT PRIMARY KEY,
//   post_id INT NOT NULL,
//   user_id INT NOT NULL,
//   FOREIGN KEY (post_id) REFERENCES posts(id),
//   FOREIGN KEY (user_id) REFERENCES users(id)
// );
type View = {
  id: number;
  post_id: number;
  user_id: number;
};

// Path: follows.ts
// CREATE TABLE follows (
//   id INT PRIMARY KEY,
//   user_id INT NOT NULL,
//   follower_id INT NOT NULL,
//   FOREIGN KEY (user_id) REFERENCES users(id),
//   FOREIGN KEY (follower_id) REFERENCES users(id)
// );
type Follow = {
  id: number;

=======
Suggestion 2

type User = {
  id: number;
  username: string;
  password: string;
  email: string;
};

export const selectUserByEmail = async (email: string): Promise<User> => {
  try {
    const result = await connection("users")
      .select("*")
      .where("email", "=", email);

    return result[0];
  } catch (error) {
    throw new Error(error.sqlMessage || error.message);
  }
};

=======
Suggestion 3

type User = {
  id: number;
  username: string;
  password: string;
  email: string;
};

export default User;

=======
Suggestion 4

type Users = {
  id: number;
  username: string;
  password: string;
  email: string;
};

// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );

// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
//

=======
Suggestion 5

type User = {
  id: number;
  username: string;
  password: string;
  email: string;
};

// Path: userssssss.ts
// CREATE TABLE recipes (
//   id INT PRIMARY KEY,
//   title VARCHAR(50) NOT NULL,
//   user_id INT NOT NULL,
//   FOREIGN KEY (user_id) REFERENCES users(id)
// );
type Recipe = {
  id: number;
  title: string;
  user_id: number;
};

// Path: userssssss.ts
// CREATE TABLE ingredients (
//   id INT PRIMARY KEY,
//   name VARCHAR(50) NOT NULL,
//   recipe_id INT NOT NULL,
//   FOREIGN KEY (recipe_id) REFERENCES recipes(id)
// );
type Ingredient = {
  id: number;
  name: string;
  recipe_id: number;
};

// Path: userssssss.ts
// CREATE TABLE steps (
//   id INT PRIMARY KEY,
//   instruction VARCHAR(255) NOT NULL,
//   recipe_id INT NOT NULL,
//   FOREIGN KEY (recipe_id) REFERENCES recipes(id)
// );
type Step = {
  id: number;
  instruction: string;
  recipe_id: number;
};

// Path: userssssss.ts
// CREATE TABLE tags (
//   id INT PRIMARY KEY,
//   name VARCHAR(50) NOT NULL
// );
type Tag = {
  id: number;
  name: string;
};

// Path: userssssss.ts
// CREATE TABLE recipe_tags (
//   id INT PRIMARY KEY,
//   recipe_id INT NOT NULL,
//   tag_id INT NOT NULL,
//   FOREIGN KEY (recipe_id) REFERENCES recipes(id),
//   FOREIGN KEY (tag_id) REFERENCES tags(id)
// );
type RecipeTag = {
  id: number;
  recipe_id: number;
  tag_id: number;
};

// Path: userssssss.ts
// CREATE TABLE comments (
//   id INT PRIMARY KEY,
//   content VARCHAR(255) NOT NULL,
//   user_id INT NOT NULL,
//   recipe_id INT NOT NULL,
//   FOREIGN KEY (user_id) REFERENCES users(id),
//   FOREIGN KEY (recipe_id) REFERENCES recipes(id)
// );
type Comment = {
  id: number;
  content: string;
  user_id: number;
  recipe_id: number;
};

// Path: userssssss.ts
// CREATE TABLE likes (
//   id INT PRIMARY KEY,
//   user_id INT

=======
Suggestion 6

type Userss = {
  id: number;
  username: string;
  password: string;
  email: string;
};

// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
type UserssInsert = {
  username: string;
  password: string;
  email: string;
};

// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
type UserssUpdate = {
  id: number;
  username: string;
  password: string;
  email: string;
};

// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
type UserssDelete = {
  id: number;
};

// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
type UserssSelect = {
  id: number;
};

// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
type UserssSelectAll = {
  id: number;
};

// Path: userssssss.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
export class UserssRepository {
  private readonly tableName = "users";
  private readonly connection: mysql.Connection;

  constructor(connection: mysql.Connection) {
    this.connection = connection;
  }

  // Path: userssssss.ts
  // INSERT INTO users (username, password, email) VALUES (?, ?, ?)
  async insert(userss: Users

=======
Suggestion 7

type User = {
    id: number,
    username: string,
    password: string,
    email: string
}

const users: User[] = [
    { id: 1, username: "admin", password: "123", email: "


```

</details>

# GitHub Copilot Labs

## 公式サイト

GitHub Copilot Labs

GitHub Next | GitHub Copilot Labs
https://githubnext.com/projects/copilot-labs

## GitHub Copilot Labs の機能のまとめ

GitHub Copilot 公式の VSCode 拡張機能です。
※他のエディタにもそれぞれあるようです。（未確認）
GitHub Copilot の方が、Amazon CodeWhisperer よりも、便利だと感じるのはこのツールのおかげです。

## GitHub Copilot Labs の利用方法

二通りあります。

- 関数の上などに表示される **Github Copilot コマンドパレット** のアイコンボタンを押して利用します。
- VSCode の左サイドバーから **GitHub Copilot Labs**を開き、機能を選択します。

# コマンドパレットから利用する方法

## アイコンの説明

![GitHub Copilotアイコン画像説明付き.PNG](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44761/c59d6119-a693-a156-7f4b-65c57d9308d4.png)

## 一覧

- IDE Brushes: Suggest test
- IDE Brushes: Make this code more readable
- IDE Brushes: Add Types to this code
- IDE Brushes: Find a bug in this code
- IDE Brushes: Make this code easier to debug
- IDE Brushes: Clean up this code
- IDE Brushes: Document the steps of this code
- IDE Brushes: Make this code more robust
- IDE Brushes: Break this code into smaller chunks
- IDE Brushes: Document this code
- IDE Brushes: Use a custom brush

### IDE Brushes の説明

- IDE Brushes: Suggest test (テストを提案する)
  カーソルが関数上にある時に出現します、関数の引数や戻り値の型を推測し、テストコードを提案します。

- IDE Brushes: Make this code more readable（コードを読みやすくする）
  コードの可読性を高めるために、インデントや改行を追加し、コードブロックを整理する事ができます。

- IDE Brushes: Add Types to this code（コードに型を追加する）
  変数や関数の引数、戻り値に型を追加し、静的型付けを導入する事ができます。

- IDE Brushes: Find a bug in this code（コード内のバグを見つける）
  コードの解析を行い、可能なバグを検出する事ができます。

- IDE Brushes: Make this code easier to debug（コードをデバッグしやすくする）
  デバッグしやすいように、デバッグ情報を出力するコードや、条件分岐を追加するコードを挿入する事ができます。

- IDE Brushes: Clean up this code（コードをクリーンアップする）
  コードの冗長性を削除し、不要なコードを削除して、コードの品質を向上させます。

- IDE Brushes: Document the steps of this code（コードの手順をドキュメント化する）
  コードの動作を説明するコメントを追加し、コードの理解を容易にする事ができます。

- IDE Brushes: Make this code more robust（コードをより堅牢にする）
  エラーハンドリングコードを追加し、コードの品質を向上させます。

- IDE Brushes: Break this code into smaller chunks（コードをより小さな塊に分割する）
  大きな関数やクラスを小さな関数やクラスに分割する事で、コードをより管理しやすくする事ができます。

- IDE Brushes: Document this code（コードをドキュメント化する）
  コードの目的や動作を説明するコメントを追加する事で、コードの理解を容易にする事ができます。

- IDE Brushes: Use a custom brush（カスタムブラシを使用する）
  ユーザーが自分で定義したブラシを使用する事ができます。これにより、特定のプロジェクトに最適なブラシを作成する事ができます。

※ここでいうブラシとは GitHub Copilot の動作と結果の事です。

### Github Copilot コマンドパレット の詳細な説明

#### Suggest test （コマンドパレットの一番左）

機能: コードからテストコードを生成します。

※この関数は次の項目の「Make this code more readable」と「Add Types to this code」で修正された関数です。

```addNumbers.ts
function addNumbers(num1: number, num2: number): number {
  // 足し算の結果を返す
  return num1 + num2
}

```

関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Suggest test** をクリックします。

左サイドバーが開き **TEST GENERATION** プルダウンメニューが開きます。

Detected Function で選択された関数がわかります。

**Suggest a new test** を押します。

↓ このようにテストコードが生成されました。

```addNumbers.test.ts
describe('test auth13', function() {
    it('test auth13.addNumbers', function(done) {
        // console.log('test auth13.addNumbers');
        let result = auth13.addNumbers(10, 20);
        assert.equal(result, 30);
        done();
    })
})

```

**Run this test**ボタンを押すとテストが実行されます。
(プロジェクト or グローバルなテスト実行環境が必要です、無いと Error running test エラーが出力されます。)

#### Make this code more readable の使い方

機能: コードをより読みやすくします。

↓ このよう読みにくい関数があったとします、
関数名は単語にもなっていなくて、引数も戻り値も何を返すのかわかりません。
**GitHub Copilot** はこの関数を読みやすくしてくれます。

```aaa.ts
function aaa(bbb,ccc){
  // 足し算の結果を返す
  return bbb + ccc}

```

やり方は、関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Make this code more readable** をクリックします。
（スマイルアイコン これは **Suggest test** の左隣りにあります。）

↓ 今回は、このように修正されました。

```addNumbers.ts
function addNumbers(num1, num2) {
  // 足し算の結果を返す
  return num1 + num2
}

```

↑ 関数名はコメントを参考に命名されています。
引数も数値を 2 つ返す事が第三者にもわかります。

ついでに、`addNumbers.ts` とファイル名を変えておきました。（これは手動で変えました）

#### Add Types to this code の使い方

機能: 型を追加します。

↓ この関数は、一つ上の項目の Make this code more readable の使い方で得られた関数を利用しています。

```addNumbers.ts
function addNumbers(num1: number, num2: number): number {
  // 足し算の結果を返す
  return num1 + num2
}

```

関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Add Types to this code** をクリックします。
（スマイルアイコンの左隣り）

```addNumbers.ts
function addNumbers(num1: number, num2: number): number {
  // 足し算の結果を返す
  return num1 + num2
}

```

↑ このように型が追加されました。

#### Find a bug in this code の使い方

機能: バグを見つけます。（虫のアイコン）

ファイル名、関数名どちらも sum(合計)なのに結果が掛け算になっています。これを修正してもらいます。

```sum.js
function sum(a, b) {
  return a * b;
}

```

関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Find a bug in this code** をクリックします。

```sum.js
function sum(a, b) {
  return a + b;
}

```

↑ このように修正されました。

#### Make this code easier to debug の使い方

機能: デバッグをしやすくします。 （虫とコード実行のアイコン）

```sum.js
function sum(a, b) {
  return a + b;
}

```

関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Make this code easier to debug** をクリックします。

```sum.js
function sum(a, b) {
  console.log('sum ' + a + ' ' + b);
  return a + b;
}

```

↑ このように console.log が追加されるので、デバッグしやすくなります。

#### Clean up this code の使い方

機能: コードをきれいにします。（ゴミ箱のアイコン）

例えば、一つ上の **Make this code easier to debug** で追加された`console.log`は本来の関数には不要なので削除してもらいます。

使用例

```sum.js
function sum(a, b) {
  console.log('sum ' + a + ' ' + b);
  return a + b;
}

```

関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Clean up this code** をクリックします。

```sum.js
function sum(a, b) {
  return a + b;
}

```

↑ このように `console.log` が削除されています。

#### Document the steps of this code の使い方

機能: コードの手順をドキュメント化します。(リストのアイコン)

関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Document the steps of this code** をクリックします。

```sum.js
// Define a function named sum that takes two parameters named a and b.
function sum(a, b) {
  // Return the sum of a and b.
  return a + b;
}

```

↑ このようにコメントが追加されます。

不要になったら **Clean up this code** (ゴミ箱のアイコン)で削除してください。

#### Make this code more robust の使い方

機能: 例外処理を追加します。（セキュリティガードのアイコン）

関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Make this code more robust** をクリックします。

```sum.js
function sum(a, b) {
  if (typeof a !== 'number' || typeof b !== 'number') {
    throw new TypeError('Expected two numbers as arguments');
  }
  return a + b;
}

```

↑ このように例外処理が追加されます。

コードのよってどのように処理されるかはそのコード次第です。

#### Break this code into smaller chunks の使い方

機能: コードを小さな塊に分割します。（円グラフを分割するアイコン）

```calc.js
// 関数名:掛け算と足し算
// 引数:数字を2個
// 出力:足し算の結果と掛け算の結果を同時に出力する。
// 処理1:足し算を実行する
// 処理2:掛け算を実行する
// 処理3:足し算と掛け算の結果を出力する
function

```

↑ この状態から提案をしてもらいます。

```calc.js
// 関数名:掛け算と足し算
// 引数:数字を2個
// 出力:足し算の結果と掛け算の結果を同時に出力する。
// 処理1:足し算を実行する
// 処理2:掛け算を実行する
// 処理3:足し算と掛け算の結果を出力する
function calc(num1, num2) {
    var result1 = num1 + num2;
    var result2 = num1 * num2;
    console.log(result1, result2);
}

```

関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Break this code into smaller chunks** をクリックします。

```calc.js
// 関数名:掛け算と足し算
// 引数:数字を2個
// 出力:足し算の結果と掛け算の結果を同時に出力する。
// 処理1:足し算を実行する
// 処理2:掛け算を実行する
// 処理3:足し算と掛け算の結果を出力する
function add(num1, num2) {
    return num1 + num2;
}
function multiply(num1, num2) {
    return num1 * num2;
}
function calc(num1, num2) {
    console.log(add(num1, num2), multiply(num1, num2));
}

```

↑ このように関数が分割されていきます。

#### Document this code の使い方

機能: コードに JSDoc を追加します。（本のアイコン）

サンプルが Javascript の場合ですので JSDoc が追加されています。
JSDoc 以外にもその言語にあったドキュメントを追加してくれます。

```sum.js
function sum(a, b) {
  return a + b;
}

```

関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Document this code** をクリックします。

```sum.js
/**
 * @param {number} a
 * @param {number} b
 * @returns {number}
 */
function sum(a, b) {
  return a + b;
}

```

↑ このように JSDoc が追加されていきます。（いろんなパターンがあります。）

他のパターン

通常のコメントで追加されています。

```sum.js
// This function returns the sum of two numbers.
function sum(a, b) {
    return a + b;
  }

```

#### Use a Custom brush の使い方

この機能は、標準で提供されている機能で満足していない場合、**Use a Custom brush** という機能を使う事で、自分でカスタマイズした機能を使う事が出来ます。

### 例 Use a Custom brush の使い方 その 1

↓ 例えば、足し算のつもりなのに掛け算の結果を返す関数があったとします。

```sum.js
function sum(a, b) {
  return a * b;
}

```

関数の{}内にカーソルを持ってきて、GitHub Copilot パレットの中から **Use a Custom brush** をクリックします。
（一番右端にあるアイコン）

入力を促されるウィンドウが開くので
「足し算をする」と入力します。（日本語で ok！）

そうすると ↓ のように関数が修正されます。

```sum.js
function sum(a, b) {
  return a + b;
}

```

### 例 Use a Custom brush の使い方 その 2

ColorButton というコンポーネントがあったとします。
（コードにあった拡張子である必要があります。）

```tailwindcss.tsx
export const ColorButton = () => {
  return <button>色のボタン</button>
}

```

TailwindCSS のクラスを追加して暖色系に装飾してみたいとします。

関数全体を範囲選択します。
**Use a custom brush**をクリックします。（一番右端にあるアイコン）

入力を促されるウィンドウが開くので
「TailwindCSS で暖色系に装飾してください。」と入力します。（日本語で ok！）

```tailwindcss.tsx
export const ColorButton = () => {
  return <button className="bg-yellow-300">キャンセル</button>
}

```

↑ このように暖色系の className が追加されます。

(className は TailwindCSS のクラス名です。)

※このようにユーザーの任意の機能を独自に作成する事が出来ます。
もっと細かく指示を与えれば複雑な命令も可能です。

# VSCode の左サイドバーから GitHub Copilot Labs を開き、機能を利用する

## 実際に使用してみる

新しいファイルを用意します、拡張子は使用する言語にしておきます。
既存のファイルでも大丈夫です。

左サイドバーにある Copilot アイコンを押します。
そうすると左サイドバーの隣にウィンドウが開きます。

- EXPLAIN コードの解説をおこなう。
  これは事前に用意されているコメントを使用して GitHub Copilot を利用します。

- LANGUAGE TRANSLATION 言語の変換
  例：JavaScript のコードを Python へ変換

- BRUSHES アイコンをクリックする事で各種機能が使用できる。
  これは GitHub Copilot コマンドパレットの左サイドバー版です。

- TEST GENERATION コードに対してテストコードを作る。
  一つの関数からテストコードを作成、実行が出来るようになります。

## 各機能の説明

### EXPLAIN

コードの解説を行う機能です。

↓ のような関数があった場合

```sum.js
function sum(a, b) {
  return a + b
}

```

関数の部分を範囲選択します。
(範囲選択をする事で、左サイドバーに選ばれた関数が表示されます。)

VSCode の左サイドバーにある Copilot アイコンを押します。
**EXPLAIN** メニューを開きます。

選択した関数の下にプルダウンメニューで 5 つの選択肢が選べます。
(内容はファイルタイプに依存したコメントアウト記法で記述されたコメントになります。)

### 選択できるメニュー

- Custom
- Explain code
- code does following
- code does following (English)
- Show example code

#### Custom を選択した場合

Custom を選択した場合は、自分でカスタマイズした機能を使用する事が出来ます。

左サイドバーの GitHub Copilot Labs を開きます。
Explain code を選択します。
Advanced を開きます。
Prompt に自分のコメントを入力します。
コメントは正確なほど正しい結果を得られます。

↓undefined の部分にコメントを入力します。
このコメントは、コードの解説を行うコメントになります。

Prompt

```Prompt.ts
undefined

```

Stops

```Stops.ts
*/
```

コードの解説を行うコメントを追加する事で正確な結果が出力されます。

今回は、Prompt 部分にコメントを書き込む事になります。

Prompt

```Prompt
引き算に書き直してください。

```

と入力してみます。（日本語で ok！）

**Ask Copilot**を押します。
そうすると

RESULT に以下のように表示されます。

RESULT

<details><summary>複数の提案が提示されます。(長いので折りたたみます)</summary>

```RESULT.ts
引き算に書き直してください。 // Language: typescript
function sub(a, b) {
  return a - b
}


割り算に書き直してください。

// Language: typescript
function div(a, b) {
  return a / b
}


掛け算に書き直してください。

// Language: typescript
function mul(a, b) {
  return a * b
}


大きい方を返す関数を書いてください。

// Language: typescript
function max(a, b) {
  return a > b ? a : b
}


小さい方を返す関数を書いてください。

// Language: typescript
function min(a, b) {
  return a < b ? a : b
}


2つの引数の和を返す関数を書いてください。

// Language: typescript
function sum(a, b) {
  return a + b
}


2つの引数の差を返す関数を書いてください。

// Language: typescript
function sub(a, b) {
  return a - b
}


2つの引数の商を返す関数を書いてください。

// Language: typescript
function div(a, b) {
  return a / b
}


2つの引数の積を返す関数を書いてください。

// Language: typescript
function mul(a, b) {
  return a * b
}


2つの引数のうち、大きい方を返す関数を書いてください。

// Language: typescript
function max(a, b) {
  return a > b ? a : b
}


2つの引数のうち、小さい方を返す関数を書いてください。

// Language: typescript
function min(a, b) {
  return a < b ? a : b
}


// Language: typescript
function sum(a, b) {
  return a + b
}


// Language: typescript
function sub(a, b) {
  return a - b
}


// Language: typescript
function div(a, b) {
  return a / b
}


// Language: typescript
function mul(a, b) {
  return a * b
}


// Language: typescript
function max(a, b) {
  return a > b ? a : b
}


// Language: typescript
function min(a, b) {
  return a < b ? a : b
}


// Language: typescript
function sum(a, b) { */

```

↑ 今回は、このような結果が得られました。

</details>

#### Explain code を選択した場合

選択したコードに対して、
コードの解説を行うコメントを追加する事で、コードの理解を容易にする事ができます。

設定されているコメントは以下のようになっています。

Prompt

```Prompt.ts
/* Here is the explanation for the code above:
1.

```

訳
以下、上記コードの説明です。

**Ask Copilot**を押します。
RESULT に以下のように表示されます。

RESULT

```RESULT.ts
/* Here is the explanation for the code above:
1. The function sum is declared with two parameters: a and b.
2. The function sum returns the sum of its parameters.
3. Variables are declared with the var keyword. Here we declare the variable a and b.
4. The var keyword is used to declare variables that will be scoped to the current function.
5. The variable a is assigned the value 10.
6. The variable b is assigned the value 20.
7. The function sum is called with the arguments 10 and 20.
8. The function returns the value 30.
9. The statement is terminated with a semicolon (;). */

```

#### code does following を選択した場合

選択したコードに対して、
コードの動作を説明するコメントを追加する事で、コードの理解を容易にする事ができます。

設定されているコメントは以下のようになっています。

Prompt

```Prompt.ts
/* The code above does the following:
1.

```

訳
このコードを以下のようにします。

**Ask Copilot**を押します。
RESULT に以下のように表示されます。

RESULT

```RESULT.ts
RESULT
/* The code above does the following:
1. Defines a function called sum that takes two arguments a and b.
2. The arguments a and b are both of type number.
3. The function returns a value of type number, which is the sum of a and b. */

```

#### code does following (English)を選択した場合

選択したコードに対して、
コードの動作を説明するコメントを追加する事で、コードの理解を容易にする事ができます。

設定されているコメントは以下のようになっています。

Prompt

```Prompt.ts
/* The code above does the following, explained in English:
1.

```

訳
このコードは、英語で説明すると次のようになります。

**Ask Copilot**を押します。
RESULT に以下のように表示されます。

RESULT

```RESULT.ts
RESULT
/* The code above does the following, explained in English:
1. We declare a function called sum that takes two parameters, a and b.
2. The function returns the sum of a and b. */

```

#### Show example code を選択した場合

選択したコードに対して、実際にコードの使い方を見せてくれます。

設定されているコメントは以下のようになっています。

Prompt

```Prompt.ts
/* This is an example for calling this function:

```

訳
この関数を呼び出す場合の例です。

**Ask Copilot**を押します。
RESULT に以下のように表示されます。

RESULT

```RESULT.ts
RESULT
/* This is an example for calling this function: import { sum } from './sum';

console.log(sum(1, 2));
// => 3 */

```

↑ のように使い方を教えてくれます。
import の仕方まで教えてくれています。

:::note info
ここまで説明を読んでくれた方は、左サイドバーの **GitHub Copilot Labs の EXPLAIN** は単なるコメントだと理解してもらえたはずです。

このように **GitHub Copilot** の肝はコメントです、正確で多くの情報を書きましょう。
コメントをどのように書くかでどれだけ深く柔軟に使えるかが決まります。
アプリを作るにあたって設計などの事前準備が大変重要です。

:::

かと言ってコメントを多く書いても AI はまだまだ発展途上なので、どの程度の情報量を書き込むかは開発者に依存しています、各個人がバランスを取って最適な情報量を探ってみてください。
また、**GitHub Copilot**は製作者の意図を汲み取ってくれるわけではありません。GPT-4,5,6 に期待しましょう。
TAB キーを押すだけのようなプログラミングで終わるツールではありません。

閑話休題

### Advanced から日本語化する

例えば、`code does following (English)` を選択した場合のように
`in English` を付けた事ですべての言語を英語で出力するよう指示しています。

そこで、ここを `in Japanese` に書き換えてみます。

※ただし固定の項目
Explain code
code does following
code does following (English)
Show example code
これらの **Advanced** を変更すると、どれも **Custom** 項目に強制敵に変更されます。
なのでこれは実質 **Custom** の利用方法になリます。

## 実際に動かしてみる

↓ 関数を範囲選択します。

```fizzBuzz.ts
// fizzBuzz問題を解く
// 3の倍数ならFizz、5の倍数ならBuzz、3と5の倍数ならFizzBuzzを返す
function fizzBuzz(num) {
  if (num % 3 === 0 && num % 5 === 0) {
    return "FizzBuzz"
  } else if (num % 3 === 0) {
    return "Fizz"
  } else if (num % 5 === 0) {
    return "Buzz"
  } else {
    return num
  }
}

```

Explain Code を選び、
↓Advanced の Prompt を変更します。

Prompt

```Prompt.ts
/* Here is the explanation for the code above in Japanese:
1.

```

と `in Japanese` と追記します。

そうしてから **Ask Copilot** ボタンを押すと、

RESULT

```RESULT.ts
RESULT
/* Here is the explanation for the code above in Japanese:
1. まず、`if`文で3と5の倍数の条件を先に書いてしまうと、3の倍数も5の倍数も同時に満たす場合にFizzBuzzとなりません。
2. そこで、3と5の倍数の条件を先に書くと、3の倍数の場合は`else if`以下の処理はスキップされるので、3の倍数を判定できます。
3. この時点で5の倍数の場合は、3と5の倍数の条件を満たすため、`else if`以下の処理はスキップされます。
4. この時点で5の倍数でない場合は、3の倍数ではないため、`else`以下の処理が実行されます。 */

```

※この機能はまだ不完全で、いろいろな不具合が一番出やすいです機能です。

- 同じ行が続く
- 意味不明な説明になっている。
  等の不具合をよく見かけます。たぶん正確な情報を与える事が出来てないからだと思いますが・・。

### LANGUAGE TRANSLATION

機能: 現在のコードを他言語へ変換してくれます。

↓ このような関数があったとします。
関数全体を範囲選択します。

```fizzBuzz.ts
// fizzBuzz問題を解く
// 3の倍数ならFizz、5の倍数ならBuzz、3と5の倍数ならFizzBuzzを返す
function fizzBuzz(num) {
  if (num % 3 === 0 && num % 5 === 0) {
    return "FizzBuzz"
  } else if (num % 3 === 0) {
    return "Fizz"
  } else if (num % 5 === 0) {
    return "Buzz"
  } else {
    return num
  }
}

```

左サイドバーの `GitHub Copilot Labs` を開きます。

`Translate code into` で変換後の言語を選択します。
(今回は Python を選択します。)

**Ask Copilot** を押します。

```fizzBuzz.py
// fizzBuzz問題を解く
// 3の倍数ならFizz、5の倍数ならBuzz、3と5の倍数ならFizzBuzzを返す
def fizzBuzz(num):
  if num % 3 == 0 and num % 5 == 0:
    return "FizzBuzz"
  elif num % 3 == 0:
    return "Fizz"
  elif num % 5 == 0:
    return "Buzz"
  else:
    return num

```

↑ このように無事 Python に変換されました。

### BRUSHES

機能: 関数の上に表示される **GitHub Copilot コマンドパレット** の左サイドバー版です。
機能はまったく同じです。

詳しくは、[コマンドパレットから利用する方法](#コマンドパレットから利用する方法)を見てください。

### TEST GENERATION

機能: テストコードを生成してくれます。

作成したテストを実行するためにはグローバルか、開発中のアプリにテストフレームワークをインストールしておく必要があります。

#### テストコードを生成する

`Suggest a new test`
新しいテストの提案

`Run this test`
テストを実行する

### 例 テストコードを生成する

テストコードを書きたいコードを範囲選択します。
VSCode の左サイドバー GitHUb Copilot パレットの中から **Write a test for this code** をクリックします。

左サイドバーの **TEST GENERATION** で関数が選ばれている(Detected Function)のがわかります。

```sum.js
function sum(a, b) {
  return a + b
}

```

`Suggested Test` の中からテストコードが選ばれているのがわかります。
複数の関数が選ばれている場合は、範囲選択をやり直すよう促されます。

`Suggest Test` をクリックしてしばらく待つと、テストコードが追加されます。
右上のコピーアイコンを使ってコピーします。

```sum.test.js
describe('test sum', function() {
    it('test sum', function(done) {
        assert.equal(sum(1, 2), 3);
        done();
    })
})

```

`Run Test` をクリックするとテストが実行されます。
(プロジェクト or グローバルなテスト実行環境が必要です。
実行環境が無いと `Error running test` というエラーが出力されます。)

# キーボードショートカットキー

独自に設定したキーボードショートカットキーです。
Windows の VSCode の設定です。
VSCode の左下の歯車アイコンをクリックして設定を開きます。

## キーボードショートカットキーの設定

- インライン候補をトリガーする。

※ インライン候補をトリガーするとは提案が表示される場所ならばどこでも **GitHub Copilot** が動きます。
例えば、提案が表示される場所からカーソルが動かしてしまっても、カーソルを元の場所に戻してトリガーコマンドを使うと提案が表示されます。

※ インライン候補をトリガーするはデフォルトのキー設定では動きません。：Windows で確認
自分でキーボードショートカットキーを設定する必要があります。（これは自分の環境だけかもしれません。）

- サイドバーの表示・非表示を切り替える。

**Github Copilot Labs** の色々な機能を使うためには、サイドバーを表示する必要があるため設定したキーボードショートカットキーです。

```keybindings.json

// 一部抜粋
{
  // インライン候補をトリガーする
  "key": "alt+/",
  "command": "editor.action.inlineSuggest.trigger",
  "when": "config.github.copilot.inlineSuggest.enable && editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"
},
{
  // サイドバーの表示・非表示を切り替える
  "key": "ctrl+shift+a",
  "command": "workbench.action.toggleSidebarVisibility"
},

```

※ **"key"** の設定は好きなショートカットキーに変更してください。

# ネットで拾ったテクニック Tips

使えるかどうかは個人の感想レベルの話であって、公式情報ではありません。

## 翻訳

V さんは Twitter を使っています: 「GitHub Copilot でコメント機能を使った q: と a: 機能スゴイ。」 / Twitter

https://twitter.com/voluntas/status/1647224026492813312

### 例 翻訳をしてもらう

↓ このように英語のコメントがあったとします。

```middleware.js

/**
 * Any Server Component route that uses a Supabase client must be added to this
 * middleware's `matcher` array. Without this, the Server Component may try to make a
 * request to Supabase with an expired `access_token`.
 */


```

↓ 翻訳したい文章の先頭に en:とつけます。
そして、新たにコメントで // ja: と追記します。そうすると・・

```middleware.js
/**
 * en:Any Server Component route that uses a Supabase client must be added to this
 * middleware's `matcher` array. Without this, the Server Component may try to make a
 * request to Supabase with an expired `access_token`.
 */

// jp:

```

jp:と 「:」記号まで付けてください。

↓ このように日本語の翻訳が追加されます。

```middleware.js
/**
 * en:Any Server Component route that uses a Supabase client must be added to this
 * middleware's `matcher` array. Without this, the Server Component may try to make a
 * request to Supabase with an expired `access_token`.
 */

// jp:Supabaseクライアントを使用するすべてのServer Componentルートは、この
// jp:ミドルウェアの`matcher`配列に追加する必要があります。これがないと、Server Componentは
// jp:期限切れの`access_token`でSupabaseにリクエストしようとする可能性があります。

```

## 説明を書いてもらう

### 例 説明を書いてもらう

↓ 例えばこのようなコードがあったとします。

```react.tsx
import React from "react"
import { createRoot } from "react-dom/client"

import App from "./App"
import reportWebVitals from "./reportWebVitals"

const container = document.getElementById("root") as HTMLElement
const root = createRoot(container)

root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)

reportWebVitals()


```

↓ ファイルの先頭にこのようなコメントを追記します。

```react.tsx
// q:このコードの説明を書く
// a:

```

↓ このようにソースコードの先頭にコメントを記入します。

```react.tsx
// q:このコードの説明を書く
// a:

import React from "react"
import { createRoot } from "react-dom/client"

import App from "./App"
import reportWebVitals from "./reportWebVitals"

const container = document.getElementById("root") as HTMLElement
const root = createRoot(container)

root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)

reportWebVitals()

```

↓ 後はタブキーを押していくだけで、コードのように説明文が提案されていきます。
提案が表示されなくなるまで続けていくとこんな感じになります。

```react.tsx
// q:このコードの説明を書く
// a:Reactのルートコンポーネント
// a:StrictModeは、開発モードでのみ有効になる
// a:Appコンポーネントをレンダリングする
// a:reportWebVitalsは、パフォーマンスを計測するための関数
// a:containerは、DOMの要素を指定する
// a:rootは、containerを指定して、Reactのルートを作成する
// a:root.renderは、Reactのルートにコンポーネントをレンダリングする
// a:StrictModeは、開発モードでのみ有効になる
// a:Appコンポーネントをレンダリングする
// a:reportWebVitalsは、パフォーマンスを計測するための関数

import React from "react"
import { createRoot } from "react-dom/client"

import App from "./App"
import reportWebVitals from "./reportWebVitals"

const container = document.getElementById("root") as HTMLElement
const root = createRoot(container)

root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)

reportWebVitals()

```

## やっぱり英語

日本語でコメントを書くよりも
作りたいものを日本語で DeepL 翻訳にかけて英語にして
コメントに貼り付けてからコードを提案してもらったほうがいいかも・・・
（未確認情報）

## ピンポイントでのデバック

**Github Copilot Labs** の **Find a bug in this code** でもいいですが、

ピンポイントでデバックしたい時
`// デバック表示` とコメントを書くと、その箇所に適したデバックコードを提案してくれます。
どんなデバックコードを書いたら良いか等の考える手間が省けます。

※デバックするコードを挿入する場所や、提案されたデバックコードが適切かどうかは人間が判断する必要があります。

### 例 ピンポイントでのデバック

↓ `// デバック表示` を 4 行目に挿入してみます。
そうすると
`console.log("num = " + num)`を提案してくれました

```fizzBuzz.js
// fizzBuzz問題を解く
// 3の倍数ならFizz、5の倍数ならBuzz、3と5の倍数ならFizzBuzzを返す
function fizzBuzz(num) {
  // デバック表示
  console.log("num = " + num)
  if (num % 3 === 0 && num % 5 === 0) {
    return "FizzBuzz"
  } else if (num % 3 === 0) {
    return "Fizz"
  } else if (num % 5 === 0) {
    return "Buzz"
  } else {
    return num
  }
}

```

## Json からのオブジェクトを作成

Json データをコメントとして貼り付けるだけで提案をしてくれます。

↓ 貼り付けた Json データ

```test01.json
// [
//     {"id" : "1", "name" : "masakinihirota"},
//     {"id" : "2", "name" : "VNS.BLUE"}
//   ]
// オブジェクトを作成

```

# 例 1 オブジェクトを作成

```
// [
//     {"id" : "1", "name" : "masakinihirota"},
//     {"id" : "2", "name" : "VNS.BLUE"}
//   ]
// オブジェクトを作成
var obj = [
  { id: "1", name: "masakinihirota" },
  { id: "2", name: "VNS.BLUE" },
]
// JSONに変換
var json = JSON.stringify(obj)
// JSONを表示
console.log(json)
// JSONをオブジェクトに変換
var obj2 = JSON.parse(json)
// オブジェクトを表示
console.log(obj2)
// オブジェクトの要素を表示
console.log(obj2[0].id)
console.log(obj2[0].name)
console.log(obj2[1].id)
console.log(obj2[1].name)

```

## 例 2 オブジェクトを作成 まとめて提案

↓ まとめて提案を表示させて **_Ctrl+Enter キー_** その中から選びます。

```test01.json
// [
//     {"id" : "1", "name" : "masakinihirota"},
//     {"id" : "2", "name" : "VNS.BLUE"}
//   ]
// オブジェクトを作成
let obj = {
  id: "1",
  name: "masakinihirota",
}
let obj2 = {
  id: "2",
  name: "VNS.BLUE",
}
// 配列を作成
let arr = [obj, obj2]
// JSON文字列に変換
let json = JSON.stringify(arr)
// JSONを表示
console.log(json)
// Path: test02.ts
// [
//     {"id" : "1", "name" : "masakinihirota"},
//     {"id" : "2", "name" : "VNS.BLUE"}
//   ]
// JSON文字列を作成
let json = '[{"id" : "1", "name" : "masakinihirota"},{"id" : "2", "name" : "VNS.BLUE"}]'
// JSONをオブジェクトに変換
let arr = JSON.parse(json)
// オブジェクトを表示
console.log(arr)
// Path: test03.ts
// [
//     {"id" : "1", "name" : "masakinihirota"},
//     {"id" : "2", "name" : "VNS.BLUE"}
//   ]


```

※拡張子は`.json`なのに Javascript で提案されいます。
これは周りのコードが Javascript ファイルだったからだと思います。

※重複した提案は削除しています。

## 関数のリファクタリング

リファクタリングをしたい関数の下に
`// [関数名]をリファクタリングしてください` とコメントを書くと
リファクタリングを提案してくれます。

### 例 関数のリファクタリング

↓ このコードの上側の関数はすでに作成済みの関数です。
この関数をリファクタリングしたいとします。

関数の下にスペースを開けてリファクタリングしたい関数の名前を書きます。
`// fizzBuzzをリファクタリングしてください。` とコメントを書くと

```fizzBuzz.js
// fizzBuzz問題を解く
// 3の倍数ならFizz、5の倍数ならBuzz、3と5の倍数ならFizzBuzzを返す
function fizzBuzz(num) {
  if (num % 3 === 0 && num % 5 === 0) {
    return "FizzBuzz"
  } else if (num % 3 === 0) {
    return "Fizz"
  } else if (num % 5 === 0) {
    return "Buzz"
  } else {
    return num
  }
}



// fizzBuzzをリファクタリングしてください。
// Fizz を7の倍数 Buzzを11の倍数
function

```

↑ このコードの下側の関数は コメントから **function** までを手動で入力しています。

```fizzBuzz.js
// fizzBuzz問題を解く
// 3の倍数ならFizz、5の倍数ならBuzz、3と5の倍数ならFizzBuzzを返す
function fizzBuzz(num) {
  if (num % 3 === 0 && num % 5 === 0) {
    return "FizzBuzz"
  } else if (num % 3 === 0) {
    return "Fizz"
  } else if (num % 5 === 0) {
    return "Buzz"
  } else {
    return num
  }
}



// fizzBuzzをリファクタリングしてください。
// Fizz を7の倍数 Buzzを11の倍数
function fizzBuzz(num) {
  if (num % 7 === 0 && num % 11 === 0) {
    return "FizzBuzz"
  } else if (num % 7 === 0) {
    return "Fizz"
  } else if (num % 11 === 0) {
    return "Buzz"
  } else {
    return num
  }
}

```

↑ リファクタリングなので当然同じ関数名で提案が表示されます。
出来上がったら（関数名が同じでなので）上側の関数を削除してください。

※ちょっと例が悪いですね。

## Github Copilot が見ている範囲

### AI に聞いてみる

> Github Copilot が見ている範囲は？

1. 現在開いているファイルのみを見ている。
2. VSCode でファイルを開いているのは見ている。
3. ローカルリポジトリを見ている。
4. Github 上のリポジトリを見ている。
   Github Copilot を VSCode で使っています。
   関数の提案などはどの範囲までを参考にしているのでしょうか？

AI の回答 (要約)

> ChatGPT
> Copilot は VSCode で開いているファイルとローカルのリポジトリを見て、関数の提案や補完に活用していますが、GitHub 上のリポジトリのコードにはアクセスできません。

> Bing
> Github Copilot は、VSCode でファイルを開いているのは見ていると思います。ローカルリポジトリや Github 上のリポジトリを見ているかどうかは、公式ドキュメントには明記されていませんでした。

> Bard
> 現在開いているファイル、VSCode で開いているすべてのファイル、ローカルリポジトリ、および GitHub 上のすべてのリポジトリを見ています。つまり、Copilot は、作業しているコードの特定の状況に関連するコードを提案できます。

> Perplexity
> どのコードを見ているかは不明

> Phind
> VSCode で現在開いているファイルに限定されるわけではありません。

というわけで、2 番目の回答が多いようです。

2. VSCode でファイルを開いているのは見ている。

↓ 全体を見るのはまだ開発中であると WIP(work in progress) と書かれています。

GitHub Next | GitHub Copilot for _Your_ Codebase

https://githubnext.com/projects/copilot-view/

> GitHub Copilot only knows about the contents of your current file and possibly a few other open tabs, rendering it blind to important type definitions, patterns and greater connections in your codebase. We want to let GitHub Copilot see your entire repo when it comes up with its suggestions.

> GitHub Copilot は、編集中に現在のファイルの内容と、場合によっては他の開いているタブの内容しか知らないため、コードベース内の重要な型定義やパターン、より大きな関連性を把握する事ができない。私たちは、GitHub Copilot が提案を出す時に、リポジトリ全体を見る事ができるようにしたいと考えています。

# VSCode 上 で GitHub Copilot の設定をする

**Github Copilot** の有効か無効か
**Github Copilot** での言語単位での設定
等を決めます。

VSCode の **settings.json** に以下の設定を追加します。

設定例

```settings.json
{
  // Github Copilot の提案の表示を有効にするかどうか決めます。
  "editor.inlineSuggest.enabled": true,
  // 言語単位で Github Copilot を有効にするかどうかを決めます。
  "github.copilot.enable": {
    "*": true,
    "plaintext": true,
    "typescriptreact": true,
    "javascript": true,
    "markdown": true,
    "python": true,
    "yaml": false,
    "php": false
  },
  // 関数等の上に表示されるコマンドパレットのSuggest testを
  // 表示するかどうかを決めます。
  "github.copilot-labs.showTestGenerationLenses": true,
  // 関数等の上に表示されるコマンドパレットのアイコンを
  // 表示するかどうかを決めます。
  "github.copilot-labs.showBrushesLenses": true,
  // 不明
  "github.copilot.advanced": {},
}

```

※ advanced は不明です。
将来の拡張のための設定かもしれません。

# GitHub.com 上 で GitHub Copilot の設定をする

https://docs.github.com/en/copilot/configuring-github-copilot/configuring-github-copilot-settings-on-githubcom#enabling-or-disabling-duplication-detection

## 設定 著作権関連

※著作権関連
公開コードと一致しているかどうかのチェックをします。
ライセンス等を気にする製品を作る方は必須です。

- 任意のページの右上隅にあるプロフィール写真をクリックし、**Settings** をクリックします。
- 左側のサイドバーで、**Copilot** をクリックします。

## 設定 公開コードかどうかのチェック

**Suggestions matching public code GitHub Copilot can allow or block suggestions matching public code. See the GitHub Copilot documentation to learn more.**

許可する場合 **Allow**
公開コードと一致しても使用する。

ブロックする場合 **Block**
公開コードと一致している場合は使用しない。

新しい設定を保存するには、Save ボタンをクリックします。

## 設定 テレメトリ コードの共有の許可

自分のコードを Microsoft および OpenAI と共有するかどうかを選択できます。

**Allow GitHub to use my code snippets for product improvements**

GitHub によるテレメトリデータの使用を許可または禁止するには、**[製品の改善のために GitHub がコード スニペットを使用することを許可する]** の選択を解除します。

新しい設定を保存するには、Save ボタンをクリックします。

※テレメトリデータ: システムから収集された状態情報、性能指標、および操作データなどのデータの事です。主に Web 開発において、Web サイトの訪問者数やアプリケーションの使用状況を収集し、品質管理やトラブルシューティングに役立つ。データ収集システム、データベース、ビジネスインテリジェンスツール、機械学習アルゴリズムなどが使用されます。

# 参考記事

GitHub Copilot で AI ペア プログラマーに身をゆだねたら、委ねすぎたまま行った件。 - Qiita

https://qiita.com/kazuya-ho2/items/0ed7a4399630dcea1186

GitHub Copilot for CLI があればコマンドなんてもう覚えなくていいのでは？ - Qiita

https://qiita.com/ekusiadadus/items/af374a10b55003412e3f

copilot-explorer | Hacky repo to see what the Copilot extension sends to the server

https://thakkarparth007.github.io/copilot-explorer/posts/copilot-internals

https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features#github-copilot

https://github.com/features/copilot/#faq-privacy-copilot-for-business

Getting started with GitHub Copilot in Visual Studio Code - GitHub Docs

https://docs.github.com/en/copilot/getting-started-with-github-copilot/getting-started-with-github-copilot-in-visual-studio-code

コード補完 - AI-Native Development Guide

https://ai-native-development.gitbook.io/docs/v/ja/basic/code-to-code

GitHub Copilot for Individuals はアンチパターンをどこまでリファクタしてくれるのか？

https://zenn.dev/bs_kansai/articles/1632bd54d30524?redirected=1

GitHub Copilot にいいコードを書いてもらう方法 - GMO インターネットグループ グループ研究開発本部（次世代システム研究室）

https://recruit.gmo.jp/engineer/jisedai/blog/how-to-hack-github-copilot/

> まとめ　 GitHub Copilot と仲良くやる方法
> 結論 「コメント書け！」
>
> - テンプレ的な import 文や config の実装は GitHub Copilot にサジェストさせると一瞬で完了。
> - 複雑なビジネスロジック実装では、まずコメント書け！すると AI はサジェスト精度が大幅に向上。
> - いいサジェストが来ない時は、コメントが悪い。書いてほしい処理を一般的な技術用語で説明する事。
> - どんなにコメントを頑張ってもまだ完璧に 100 点は難しい。結構イージーな文法エラーがあったりする。
> - 1 人でググりながらサンプルを読んであれこれやるより、AI のサジェストを活用したほうがだいぶ早く実装が完了する。まずやりたい事をコメントで書くと AI がとりあえず実装してくれる。それをベースにググると効率が良かった。

AI-Native Development Guide（日本語版）

https://ai-native-development.gitbook.io/docs/v/ja/

Github Copilot のかしこい使い方

https://zenn.dev/gon/articles/06fe05730f8294

# その他

日本語の文章を書く手助けもしてくれます。

コードでエラーが起きたら、現在のコードをコピーして GitHub Copilot に貼り付けてみるといいかもしれません。

もしそれで解決しないのなら、ChatGPT に貼り付けてみるといいかもしれません。

# ライバル登場？？？（追記:2023 年 5 月 11 日）

上の方に順に追記、下の方が古くなっている。

話題になっているもの
一月ごとに次世代型 AI が登場している

## Duet AI for Google Cloud

［速報］Google Cloud でのシステム開発について何でも AI が教えてくれる「Duet AI for Google Cloud」発表。Google I/O 2023 － Publickey

https://www.publickey1.jp/blog/23/google_cloudaiduet_ai_for_google_cloud.html

Google の GitHub Copilot に対抗する「Duet AI for Google Cloud」が登場。Google I/O 2023 で発表された。

Duet AI for Google Cloud は「Code アシスタンス」と「Chat アシスタンス」の 2 つの機能を提供します。

Visual Studio Code で利用可能

## Bard

https://bard.google.com/

Bard といえば Google の ChatGPT ですね。
ちょっと触ってみたけどめちゃくちゃ早い。
Google が検索では後発だったのに検索スピードで他を駆逐していった事を思い出してしまった。

## 用語 その他

### AGI とは

AGI とは、汎用人工知能と呼ばれるもので、人間と同等の知能を持った AI の一種です。
AGI は、あらゆる知的作業を理解・学習・実行できる AI で、人工知能の研究の主要かつ最終的な目標です。

## Auto-GPT

Auto-GPT は、自分で目標を設定し、それを達成するために必要なタスクを自動的に生成して実行できます。

長文を読める、分割をして読んでくれる
10 万文字でも大丈夫

1 回は 4000 文字まで？

自立型 AI とも呼ばれる、玄人向け
外部ファイルを読み込める
詳細は不明

## GOD MODE

https://godmode.space/

長文を読み込めない
1 回は 8000 トーンまで？
外部ファイルを読み込めない

AutoGPT と BabyAGI を組み合わせた
詳細は不明

Auto-GPT という最新の AI を使って、さまざまなタスクを自動的に生成して実行できるウェブサイトです。

OpenAI のキーが必要
お試しでなくてもさわれるようだ。

## babyAGI

不明

## Amazon CodeWhisperer

AWS 版 GitHub Copilot となる「Amazon CodeWhisperer」が正式版に。個人ユーザーは無料、VSCode に対応

https://www.publickey1.jp/blog/23/awsgithub_copilotamazon_codewhisperervscode.html

Amazon CodeWhisperer と GitHub Copilot を同時に使う事はできなようです。
どちらかを選択する必要があります。

※自分は GitHub Copilot を使っているので、Amazon CodeWhisperer は使っていません。

理由としては、**GitHub Copilot コマンドパレット** がある分、GitHub Copilot の方が使いやすいからです。

# 次世代 Github Copilot X シリーズ

開発中もしくはウェイングリストに登録が必要。

- GitHub Copilot chat
- GitHub Copilot Voice

# GitHub Copilot chat

使用中の画面

![VSCode全画面表示.PNG](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44761/5702890d-37ef-c146-226e-9fc20198f68a.png)

## 公式の説明

https://docs.github.com/en/early-access/copilot/github-copilot-chat-transparency-note

現在の所、**VSCode の Visual Studio Code Insider** (VSCode の開発版)でしか使えないようです。

ChatGPT のように普通に質問に答えてくれます。

ファイルを開いて、重要なコードを選択してから質問をするとより洗練された回答をしてくれます。

コマンドを使って質問すると、より洗練された回答をしてくれます。

VSCode 上で開いているファイルをみて答えてくれるようです。

## 導入＆使い方

導入:省略

### 参考

GitHub Copilot chat 使ってみるよ！ - Qiita

https://qiita.com/kohashi/items/05bc01cbb3a74fdc7227

### 4 つの初め方+自分で設定する 2 つの初め方

1. プライマリサイドバーから使用する。（デフォルト）
1. 右クリックから使用する。（マウスから）

1. 「新しいウィンドウ」から使用する。
1. パネルを開いて Github Copilot chat から使用する。（自分で設定）
1. セカンダリサイドバーから使用する。（自分で設定）

※「自分で設定」とは、プライマリサイドバーの **Github Copilot chat** をパネル上やセカンダリサイドバーに移動させてそこから使用することが出来ます。

### 新しいウィンドウで開く方法

Chat: Open Editor (GitHub Copilot)

```keybindings.json

{
  "key": "",
  "command": "workbench.action.openChat.copilot"
}

```

※デフォルトでのキー設定はありません。

## GitHub Copilot chat のコマンド一覧を表示する方法

入力欄から **`/help`** と入力すると、コマンドの一覧が表示されます。

### GitHub Copilot chat のコマンド一覧

コマンドを使って質問範囲を狭めているようです。
※普通に日本語で質問してもコードに関する事なら何でも答えてくれます。

```
/vscode - Questions about VS Code
/tests - Generate unit tests for the selected code.
/simplify - Simplify the selected code.
/fix - Propose a fix for the problems in the selected code.
/explain - Explain step-by-step how the selected code works.
/ext - Ask about the VS Code extension development.
/help - General help about GitHub Copilot

```

`/vscode`
VS Code に関する質問

`/tests`
範囲選択したコードに対して、ユニットテストを生成してくれる。

`/simplify`
範囲選択したコードをシンプルにしてくれる。

`/fix`
範囲選択したコードの問題を修正してくれる。

`/explain`
範囲選択したコードの解説をしてくれる。

`/ext`
VS Code の拡張機能開発に関する質問

`/help`
GitHub Copilot に関する一般的な質問

## 日本語は？

日本語でも答えてくれます。

## GitHub Copilot chat の配置問題

### 悩み (個人の問題)

これまでの私の使い方ですとプライマリサイドバーで **GitHub Copilot chat** を開くと狭いので、いちいち **GitHub Copilot chat** を開いた時はマウスで幅を広げたり狭めたりしていました。

VSCode の拡張機能の中で **GitHub Copilot「系」** だけはマウスで幅を広げていたわけです。拡張機能ごとに幅を覚えてくれてなかったので今まで手動でした。

### 解決策 セカンダリサイドバー

VSCode のマニュアルを見直して新たに使える機能があったのでそれを利用しました。
セカンダリサイドバーを使う事でプライマリサイドバーは幅が狭い時用、セカンダリサイドバーは幅が広い時用に使い分ける事ができるようになりました。

↓ この場所にセカンダリサイドバーが追加されました。
公式の画像ですが、この画像ではセカンダリサイドバーはまだ説明されていないままです。

![VSCode画面（公式ページから）セカンダリサイドバー.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44761/eeaae519-685f-9eaf-8b1d-d0282a863e9f.png)

↑ **B** の Side Bar がプライマリサイドバーです。
そして、右側の赤い丸の場所でセカンダリサイドバーが使えるようになりました。

https://code.visualstudio.com/docs/getstarted/userinterface

### セカンダリサイドバーの使い方

セカンダリサイドバーはドラッグアンドドロップで使えます。

例えば、**GitHub Copilot chat** のアイコンをセカンダリサイドバーがある右側にドラッグアンドドロップして使っています。
リセット（元に戻す）は右クリックから「場所のリセット」を選びます。

ターミナル上にドラッグアンドドロップしてしまうと消えるように見えるので注意してください。
パネルの項目が一つ増えているので気づくと思います。

### GitHub Copilot chat のウィンドウをどこに置くか？

私は、**GitHub Copilot chat** のアイコンをセカンダリサイドバーがある右側にドラッグアンドドロップして使っています。

## GitHub Copilot chat キーボードショートカット

新機能:セカンダリサイドバー
VSCode の管理（左下の歯車アイコン）＞キーボードショートカットで
**セカンダリサイドバー**
で検索すると、

キーボードショートカット（デフォルト）
表示: セカンダリ サイド バー ビューをパネルに移動する
表示: セカンダリ サイド バーの表示/非表示を切り替える
表示: セカンダリ サイド バーにフォーカスする
表示: セカンダリ サイド バーを閉じる
の４つが表示されます。

↓ インプットボックスにフォーカスが当たらないので独自にキーボードショートカットを設定しました。

```keybindings.json
[
  // VSCodeは同じキーで複数のコマンドを実行する事ができます。
  // セカンダリサイドバーをトグルします。
  {
    "key": "ctrl+q",
    "command": "workbench.action.toggleAuxiliaryBar"
  },
  {
    // セカンダリサイドバーのインプットボックスにフォーカスします。
    "key": "ctrl+q",
    "command": "workbench.action.focusAuxiliaryBar"
  },
  {
    // セカンダリサイドバーを閉じます。
    "key": "ctrl+q",
    "command": "workbench.action.closeAuxiliaryBar",
    "when": "auxiliaryBarVisible"
  }
]

```

※ ポイントは `"when": "auxiliaryBarVisible"` セカンダリサイドバーにフォーカスが当たっている時だけ有効になります。これで開くと閉じるのコマンドを同じキーで実行できるようになりました。

`AuxiliaryBar`はセカンダリサイドバーの事です。

※パネルのターミナル上では Ctrl+q はシステムが使っているのでセカンダリサイドバーのトグルに利用できません。

↓ インプットボックスにフォーカスを当てる必要がない時は、一番目のコマンドだけでトグルします。

```keybindings.json
[
  // セカンダリサイドバーをトグルします。
  {
    "key": "ctrl+q",
    "command": "workbench.action.toggleAuxiliaryBar"
  }
]

```

- **Ctrl+Q**
  このキー設定は 2 つのコマンドを 1 つのキーで設定してあり、
  **GitHub Copilot chat** を表示して入力部分にフォーカスが当てるように設定しています。この設定ですぐに質問ができるようになっています。

※ キーボードショートカットのキーは自由に設定してください。
これは Ctrl キーが A キーの左にあるキーボード用の設定です。
※セカンダリサイドバーには **GitHub Copilot chat** だけを登録していると想定しています。

### GitHub Copilot chat の配置問題の詳細

**GitHub Copilot chat** はデフォルトで左側に 2 個の吹き出し(2 個の画面？)のアイコンが登録されます。
これは画像 **A** の Activity Bar に登録され、**B** Side Bar の プライマリサイドバーを開いて使う事ができます。

現在サイドバーは 2 種類あって、プライマリサイドバーとセカンダリサイドバーがあります。

**GitHub Copilot chat** を使用できる選択肢は 画像 **D** の Panel を含めて３つあります

#### 使用場所の移動方法

**A** の Activity Bar に登録されている **GitHub Copilot chat** アイコンをドラッグアンドドロップで移動できます。

**D** の Panel や セカンダリサイドバーの上でドラッグアンドドロップで移動できます。

(他の拡張機能も機能単位でドラッグアンドドロップで移動できます。)

これのどこに配置すればいいのか？という悩みです。

左側（デフォルト）、下側、右側です。

左側はプライマリサイドバー
下側はパネル
右側はセカンダリサイドバー

プライマリサイドバーはファイルや検索のアイコンがある場所の事です。
パネルはターミナルや、デバッグコンソールや出力などが表示される場所です。
セカンダリサイドバーは VSCode に新たに追加された機能です。

左側だとファイルや検索でよく使うと思いますが、**GitHub Copilot chat** で使うとなると狭いです。
なので GitHub Copilot chat を使う時はマウスで幅を広げて調整して、ファイルや検索の時は余分なスペースを取ってしまいコードを書くスペースを狭くしてしまいます、なので左の選択肢は無しです。

下はパネル上にドラッグアンドドロップするとターミナルやデバッグコンソールや出力と同じように表示されます。

しかし **GitHub Copilot chat** は縦長に見たいのでこの選択肢も無しです。

なので右側のセカンダリサイドバーにドラッグアンドドロップします。

そうするとセカンダリサイドバーを開く事によって **GitHub Copilot chat** が使えるようになります。

# GitHub Copilot Voice

Wait list に登録して承認が必要です。

Wait list

一覧

https://githubnext.com/

GitHub Copilot Voice

https://githubnext.com/projects/copilot-voice/

# テストの実行環境に関して （検証中）

単にテストコードとテストフレームワークをインストールするだけでは動きません。

関数からテストコードは自動生成してくれますが、
そのテストを実行させるボタンを押してもエラーが返ってくるだけで動きません。

(なので調査中)

`npm install jest -g`
`npm install mocha chai -g`
↑ これだけでは動きません。

コードとテストだけの使い方はまだ不明です。

# コードレビューに関して （検証予定）

# GitHub Copilot CLI （検証予定）

@githubnext/github-copilot-cli - npm

https://www.npmjs.com/package/@githubnext/github-copilot-cli

githubnext は次世代の **GitHub Copilot** の開発元です。

TODO
※不要なら削除

# 感想

この記事に書いた事をすべて身につけても、結局はコメントの利用方法が無限にあるので、10－20%ぐらいしか使いこなせていないという実感があります。

Github Copilot では解決できない問題は Bing や ChatGPT に投げています。
(最近 Bing でもコード対応してくれているので助かります。)

AI の特性を考えてコメントにいかに良い質問などを書けるかが、そしてその人間の能力にかかっているかが大きいと思います。

なので AI によってプログラマーの仕事がなくなるという事は「まったく」ないと思います。
