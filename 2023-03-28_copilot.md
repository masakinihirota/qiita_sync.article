<!--
title:   GitHub Copilot導入後、初めて使う時
tags:    githubcopilot
id:      0e58a6b921e4420a2882
private: false
-->
### アイコンの説明

GitHub Copilot コマンド パレット

![GitHub Copilotアイコン画像説明付き.PNG](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44761/c59d6119-a693-a156-7f4b-65c57d9308d4.png)

### キーボードショートカットキー (VSCode)


| 操作 | ショートカットキー |
| ---- | ---- |
| 提案を受け入れる | TABキー |
| 提案を拒否する | Escキー |
| まとめて候補を出す | Ctrl+Enterキー |
| 単語単位で受け入れる | Ctrl＋右矢印キー |
| 単語単位での受け入れを元に戻す | Ctrl＋左矢印キー |
| 次の提案を見る | Alt＋] |
| 前の提案に戻る | Alt＋[ |
| インライン候補をトリガーする | Alt＋/ |
| Labs機能リストを表示 | Ctrl+Shift+Alt+e |
| サイドバー開閉のトグル [独自](#キーボードショートカットキー)  | Ctrl+Shift+a |





# 導入後（課金後）
導入後に何をしていいのか？何が出来るのかがよくわからなかったので調べてみた。

# 環境
Windows10
GitHub Copilot (導入 1年契約or1月契約)
VSCode

# GitHub Copilotの種類

1. Copilot
1. Copilot Labs
1. Copilot Nightly
1. Copilot for Individuals
1. Copilot for Business
1. Copilot X
1. Copilot Chat
1. Copilot for Pull Requests
1. Copilot for CLI(command line interface)
1. Copilot Voice
1. Copilot for Docs


* Copilot
GitHub Copilotの**基本的な機能**です。**GPT-3**をベースに作られています。Visual Studio Code、Visual Studio、Neovim、JetBrainsの各統合開発環境（IDE）で利用できます。
* Copilot Labs
GitHub Copilotの**実験的な機能**を提供するプログラムです。このプログラムは、GitHub Copilotの最新機能を試すことができます。
* Copilot Nightly
**GitHub Copilotの最新版**を提供するプログラムです。このプログラムは、GitHub Copilotの最新機能を試すことができます。ただし、**不安定な機能**が含まれている可能性があります。
* Copilot for Individuals
料金のプラン名：**個人利用向け**のGitHub Copilotです。このプランは、個人で利用する場合に適しています。
* Copilot for Business
料金のプラン名：**ビジネス利用向け**のGitHub Copilotです。このプランは、ビジネスで利用する場合に適しています。
* Copilot X
**GPT-4**を活用した、GitHub Copilotの高度な機能を提供するプログラムです。このプログラムは、より高度なコード補完機能を提供します。日本ではまだ発表されていません。
* Copilot Chat
Copilot Xの機能の一つと思われる名前。チャットベースのコード補完機能を提供するプログラムです。このプログラムは、**チャットベースのコード補完機能**を提供します。
* Copilot for Pull Requests
Copilot Xの機能の一つと思われる名前。Pull Request作成時にコード補完機能を提供するプログラムです。このプログラムは、**Pull Request作成時にコード補完機能**を提供します。
* Copilot for CLI(command line interface)
Copilot Xの機能の一つと思われる名前。コマンドラインインターフェース（CLI）で利用できるGitHub Copilotです。このプログラムは、**CLI上でコード補完機能**を提供します。
* Copilot Voice
Copilot Xの機能の一つと思われる名前。音声入力によるコード補完機能を提供するプログラムです。このプログラムは、**音声入力によるコード補完機能**を提供します。
* Copilot for Docs
Copilot Xの機能の一つと思われる名前。ドキュメント作成時にコード補完機能を提供するプログラムです。このプログラムは、**ドキュメント作成時にコード補完機能**を提供します。

※現在のGitHub CopilotのモデルはGPT-3です。

※Copilot X 発表時に追加される機能は未定とされていますが、これらが追加されるのではないかと思われます。
* Copilot Chat
* Copilot for Pull Requests
* Copilot for CLI(command line interface)
* Copilot Voice
* Copilot for Docs
Copilot X が現在のCopilotのバージョンアップ版なのか、別の機能として販売されるのかはわかっていません。
ただ、「Copilot X の開発コンセプトが、**開発ライフサイクル全体を通してすぐに利用できるAIアシスタント**に進化させるべく取り組んでいます。」とあるのでこれらの機能を統合したものをCopilot Xとして販売するものと思われます。

# どんな事ができるのか？（英語）

https://githubnext.com/projects/code-brushes

※このサイトで具体的な挙動が見れるので、特にオススメです。
ボタンひとつで切り替えて表示されるので理解するのに一番便利なサイトだと思います。

`ORIGINAL CODE（ボタン）CODE UPDATED WITH MAKE MORE READABLE BRUSH`

中央のボタンを押すだけで切り替えられます。
左側はオリジナルコード、右側はGitHub Copilotが書き換えたコードが表示されます。

# 用語
## GitHub Copilot コマンド パレット
それぞれの関数名の上に出てくる約10個のCopilotアイコンのことを指します。
アイコン一つ一つにGitHub Copilotの機能が振り分けられています。

## GitHub Copilot ステータスアイコン
VSCode画面下のパネルにあるアイコンです。
（左サイドバーにあるGitHub Copilotのアイコンと同じアイコンがあるはずです。）
GitHub Copilotの機能が有効かどうかを確認することができます。

# はじめの一歩

VSCodeで使用する。問題はここから、

最初に
VSCode拡張機能を入れる
* GitHub Copilot
* GitHub Copilot Labs

* GitHub Copilot Nightly
（これはGitHub Copilotをアンイストールしないとインストール出来ない。）

※GitHub Copilot X の発表はされたが、まだ詳細な報告はされていない。 (2023年3月28日)

上記の拡張機能を入れるとVSCodeの再起動が求められる。
次に拡張機能を利用するためにGitHubにログインするよう求められる。
ログインをする。
GitHub Copilot Labsで認証する。

# 使い方

## GitHub Copilot

### 何かを作る
新しいファイルを用意します。
拡張子を使用する言語にしておきます。
関数名を考えて書き出します。
そうすると、Copilotがコードを提案してきます。
**TABキー**で決定します。

提案を拒否する場合は、
**Escキー**を押します。

**候補の単語を1ワードごとに確定する	Ctrl＋右矢印キー**

**確定させた1ワードごとに元に戻す	Ctrl＋左矢印キー**
このショートカットキーは文章が提案された時に、「単語単位」で提案を受け入れます。

# Copilotの機能

#### 他の候補を見たい時
候補が出ている場面で
**次の提案を見る: Alt＋]**
**以前の提案に戻る: Alt＋[**

**インライン候補をトリガーするAlt＋/**
これは、GitHub Copilotに手動でコードの提案をさせるショートカットキーです。
現在の位置でGitHub Copilotを使いたい場合に使用します。

※提案にカーソルを合わせると、提案を選択するための GitHub Copilot コマンド パレットが表示されます。

#### まとめて候補を出す
通常は１行に1つづつ、そしてショートカットキーで一つ一つ見ていくが、それをまとめて表示して欲しい時に使います。

##### 使用方法
例えば、なにか適当な関数名を書きます。
**Ctrl+Enter**キーを押します。

そうすると新しいタブが開き、そこに幾つか候補が出てきます。（複数の候補がある場合）
候補の先頭にある**Accept Solution**をクリックすると、その選択したコードが挿入されます。

すべての提案を拒否する場合は、
タブを閉じます。

#### 具体例

##### 関数名で使用する。

```test.js
function calculateDaysBetweenDates(begin, end) {

```

※関数名がその関数の説明文になっているのがポイント
※閉じ括弧は習慣としてつけておいた方がいい、候補から選ばない可能性もあるので。
VSCode機能で自動的に閉じ括弧がつくように設定しておくと便利。

**Ctrl+Enter**キーを押します。
そうすると別画面が開き、幾つかの候補が表示されます。

**Accept Solution**をクリックすると、選択したコードが挿入されます。


##### コメント欄からコードを書く

例
`LeapYear.js
// うるう年の判定
function

```

関数名を書かなくても、コメントから類推してコードを提案してくれます。
functionまで書かないと、コードを提案してくれません。文章の候補を出してきます。

```users.ts
// CREATE TABLE users (
//   id INT PRIMARY KEY,
//   username VARCHAR(50) NOT NULL,
//   password VARCHAR(255) NOT NULL,
//   email VARCHAR(255) UNIQUE NOT NULL
// );
type User

```

SQL文を貼り付けて、そしてコメントアウトして、
`type User`と入力した時点でCtrl＋Enterを押すと、幾つかの候補が表示されます。
APIから受け取ったJsonデータでも大丈夫です、型定義する時に便利です。


##### コメントから質問してみる。
これは、GitHub Copilotの機能ではなく、GitHub Copilot Labsの機能です。


### GitHub Copilotの有効化、無効化
GitHub Copilot ステータスアイコンをマウスでクリックすることで、オンオフを選択できます。
※VSCodeの下にあるステータスバーに表示されているアイコンです。

### アイコンの説明

![GitHub Copilotアイコン画像説明付き.PNG](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44761/c59d6119-a693-a156-7f4b-65c57d9308d4.png)

#### 一覧
* IDE Brushes: Make this code more readable
* IDE Brushes: Add Types to this code
* IDE Brushes: Find a bug in this code
* IDE Brushes: Make this code easier to debug
* IDE Brushes: Clean up this code
* IDE Brushes: Document the steps of this code
* IDE Brushes: Make this code more robust
* IDE Brushes: Break this code into smaller chunks
* IDE Brushes: Document this code
* IDE Brushes: Use a custom brush





#### 説明
- IDE Brushes: Make this code more readable（コードを読みやすくする）: コードの可読性を高めるために、インデントや改行を追加し、コードブロックを整理することができます。

- IDE Brushes: Add Types to this code（コードに型を追加する）: 変数や関数の引数、戻り値に型を追加し、静的型付けを導入することができます。

- IDE Brushes: Find a bug in this code（コード内のバグを見つける）: コードの解析を行い、可能なバグを検出することができます。

- IDE Brushes: Make this code easier to debug（コードをデバッグしやすくする）: デバッグしやすいように、デバッグ情報を出力するコードや、条件分岐を追加するコードを挿入することができます。

- IDE Brushes: Clean up this code（コードをクリーンアップする）: コードの冗長性を削除し、不要なコードを削除して、コードの品質を向上させます。

- IDE Brushes: Document the steps of this code（コードの手順をドキュメント化する）: コードの動作を説明するコメントを追加し、コードの理解を容易にすることができます。

- IDE Brushes: Make this code more robust（コードをより堅牢にする）: エラーハンドリングコードを追加し、コードの品質を向上させます。

- IDE Brushes: Break this code into smaller chunks（コードをより小さな塊に分割する）: 大きな関数やクラスを小さな関数やクラスに分割することで、コードをより管理しやすくすることができます。

- IDE Brushes: Document this code（コードをドキュメント化する）: コードの目的や動作を説明するコメントを追加することで、コードの理解を容易にすることができます。

- IDE Brushes: Use a custom brush（カスタムブラシを使用する）: ユーザーが自分で定義したブラシを使用することができます。これにより、特定のプロジェクトに最適なブラシを作成することができます。


### テスト
開発中のアプリに、テストフレームワークをインストールしておく

Suggest a new test
新しいテストの提案

Run this test
テストを実行する



## GitHub Copilot Labs

GitHub Copilot Labs

GitHub Next | GitHub Copilot Labs
https://githubnext.com/projects/copilot-labs

### BRUSHES機能
複数の機能をまとめたものです。
コードを読みやすくしたり各行ごとにコメントを追加したり出来ます。

この機能は、標準で提供されている機能で満足していない場合、CUSTOMという機能を使うことで、自分でカスタマイズした機能を使うことが出来ます。

#### 実際に使用してみる
新しいファイルを用意する、拡張子を使用する言語にしておきます。
既存のファイルでも大丈夫です。

左サイドバーにあるCopilot アイコンを押します。
そうすると左サイドバーの隣にウィンドウが開きます。

* EXPLAIN コードの解説をおこなう
* LANGUAGE TRANSLATION  言語の変換
例：JavaScriptのコードをPythonへ変換

* BRUSHES  アイコンをクリックする事で各種機能が使用できる。
* TEST GENERATION コードに対してテストコードを作る。

それぞれの機能を使用することが出来ます。


##### CUSTOMの使い方

GitHub Copilot Labsの機能の一つです。

↓例えば、足し算なのに掛け算の結果を返す関数があったとします。

```sum.js
function sum(a, b) {
  return a * b;
}

```

関数全体を範囲選択します。
**Use a custom brush**をクリックします。（一番右端にあるアイコン）

入力を促されるウィンドウが開くので
「足し算をする」と入力します。（日本語でok！）

そうすると↓のように関数が修正されます。

```sum.js
function sum(a, b) {
  return a + b;
}

```

このようにユーザーの任意の機能を独自に作成することが出来ます。


# キーボードショートカットキー

VSCodeの設定です。
左下の歯車アイコンをクリックして、設定を開きます。

## サイドバーの表示・非表示を切り替える
Github Copilot Labsの色々な機能を使うためには、サイドバーを表示する必要があるため設定したキーボードショートカットキーです。

```keybindings.json
{
  "key": "ctrl+shift+a",
  "command": "workbench.action.toggleSidebarVisibility"
},

```

※keyは好きなキーに変更してください。


# ネットで拾ったテクニック

## 翻訳
VさんはTwitterを使っています: 「GitHub Copilot でコメント機能を使った q: と a: 機能スゴイ。 https://t.co/zsuE1gGhGv 」 / Twitter
https://twitter.com/voluntas/status/1647224026492813312



具体例

```
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

```

↑このように英語のコメントがあったとします。

```
# en:See https://help.github.com/articles/ignoring-files/ for more about ignoring files.
# ja:

```

↑と、このようにコメントの先頭にen:とつけます。
そして、新たにコメントで # ja: と追記します。そうすると・・

```
# en:See https://help.github.com/articles/ignoring-files/ for more about ignoring files.
# ja:詳しくは https://help.github.com/articles/ignoring-files/ を参照してください。

```

↑このように日本語が自動補完されます。

## 説明を書いてもらう

例えばこんなコードがあったとします。

```react.tsx
import React from "react"
import { createRoot } from "react-dom/client"

import App from "./App"
import reportWebVitals from "./reportWebVitals"

const container = document.getElementById("root") as HTMLElement
const root = createRoot(container)

root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)

reportWebVitals()


```

### 利用例

ファイルの先頭に

```
// q:このコードの説明を書く
// a:

```
とコメントを追記します。

↓このようにソースコードの先頭にコメントを記入します。

```
// q:このコードの説明を書く
// a:

import React from "react"
import { createRoot } from "react-dom/client"

import App from "./App"
import reportWebVitals from "./reportWebVitals"

const container = document.getElementById("root") as HTMLElement
const root = createRoot(container)

root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)

reportWebVitals()

```

↓後はタブキーを押していくだけで、自動で説明が補完されていきます。
補完候補が出なくなるまで続けていくとこんな感じになります。

```
// q:このコードの説明を書く
// a:Reactのルートコンポーネント
// a:StrictModeは、開発モードでのみ有効になる
// a:Appコンポーネントをレンダリングする
// a:reportWebVitalsは、パフォーマンスを計測するための関数
// a:containerは、DOMの要素を指定する
// a:rootは、containerを指定して、Reactのルートを作成する
// a:root.renderは、Reactのルートにコンポーネントをレンダリングする
// a:StrictModeは、開発モードでのみ有効になる
// a:Appコンポーネントをレンダリングする
// a:reportWebVitalsは、パフォーマンスを計測するための関数

import React from "react"
import { createRoot } from "react-dom/client"

import App from "./App"
import reportWebVitals from "./reportWebVitals"

const container = document.getElementById("root") as HTMLElement
const root = createRoot(container)

root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)

reportWebVitals()

```


# 参考

Getting started with GitHub Copilot in Visual Studio Code - GitHub Docs
https://docs.github.com/en/copilot/getting-started-with-github-copilot/getting-started-with-github-copilot-in-visual-studio-code

# その他
日本語の文章を書く手助けもしてくれています。

# ライバル登場？？？（追記:2023年4月14日）

AWS版GitHub Copilotとなる「Amazon CodeWhisperer」が正式版に。個人ユーザーは無料、VSCodeに対応 － Publickey

https://www.publickey1.jp/blog/23/awsgithub_copilotamazon_codewhisperervscode.html

情報を聞いたばかりでまだ何も知らないが、もしかしたらGitHub Copilotのライバルになるかもしれない。
Copilotと同等の性能があるたのなら無料のAmazonに流れるか、Copilotの価格が安くなるかもしれない。

Amazon CodeWhispererとGitHub Copilotを同時に使うとごちゃごちゃになってしまうので、どちらかを選択する必要がある。
