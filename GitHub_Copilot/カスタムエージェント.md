カスタムエージェントは、

* .agent.md という拡張子を持つMarkdownファイルとして定義されます。
* .github/agents フォルダ内に配置します。
二通りあります。

VS Code は、ワークスペースの `.github/agents` フォルダ内の任意の `.md` ファイルをカスタムエージェントとして検出します。

# YAML フロントマター とは？

YAML フロントマターは、Markdown ファイルの先頭に置くキーと値の集合（メタデータ）です。`---` で囲むことで本文とは別に設定情報を記述でき、静的サイトジェネレータやエディタ拡張などがこれを読み取って動作に利用します。

書き方の基本
- ファイルの最初に `---` を書き、最後にもう一度 `---` を書いてブロックを閉じます。
- キーは英数、値は文字列・数値・真偽値・配列・マップなどを取り得ます。
- 配列は `-` で表記し、ネストはインデントで表します。

簡単な例
---
description: "カスタムエージェントの説明"
name: "MyAgent"
argument-hint: "例: ファイル名を入力してください"
tools:
    - builtin/run
    - my-mcp-server/*
model: gpt-4o-mini
target: github-copilot
---

注意点
- YAML の文法に従う必要があります（インデントはスペースのみ、正しいコロンや配列表記など）。文法エラーがあるとパーサが失敗します。
- フロントマターはファイルの最上部に配置してください。本文の前にスペースやコメントがあると認識されない場合があります。
- 値にコロンや改行が含まれる場合はクォートするか、複数行文字列（|）を使って表現します。
- セキュリティ上の理由から、機密情報（パスワードやシークレット）はフロントマターに直接書かないでください。

Tips
- VS Code の YAML 拡張やオンラインの YAML リンターで検証してからコミットすると安心です。
- tools や mcp-servers を指定する際は、実際の環境で利用できるか事前に確認しておくと、動作時のエラーを減らせます。
- 最小限のフィールドを使い、必要に応じて徐々に設定を追加する運用がおすすめです。
- GitHub Copilot 用のエージェントでは `target: github-copilot` を忘れずに指定してください。

# Header ヘッダー（オプション）

ヘッダーは、以下のフィールドを持つ YAML フロントマターとして記述します。

| フィールド | 説明 |
| --- | --- |
| description | カスタムエージェントの簡潔な説明。チャット入力フィールドのプレースホルダーテキストとして表示されます。 |
| name | カスタムエージェントの名前。指定がない場合はファイル名が使用されます。 |
| argument-hint | チャット入力フィールドに表示されるオプションのヒントテキスト。ユーザーがカスタムエージェントと対話する方法を案内します。 |
| tools | このエージェントで利用可能なツールまたはツールセット名の一覧。組み込みツール、ツールセット、MCPツール、拡張機能が提供するツールを含められます。MCPサーバーの全ツールを指定するには <server name>/* 形式を使用します。ツールの詳細はチャットで確認してください。 |
| model | プロンプト実行時に使用する AI モデル。指定しない場合はモデルピッカーで現在選択されているモデルが使用されます。 |
| target | カスタムエージェントの対象環境またはコンテキスト（vscode または github-copilot）。 |
| mcp-servers | （オプション）GitHub Copilot（target: github-copilot）でカスタムエージェントと併用する Model Context Protocol (MCP) サーバー設定 JSON の一覧。 |
| handoffs | カスタムエージェント間の遷移に使用する、推奨される次のアクションやプロンプトのオプション一覧。チャット応答が完了した後にハンドオフボタンがインタラクティブな候補として表示されます。 |
| handoffs.label | ハンドオフボタンに表示されるテキスト。 |
| handoffs.agent | 切り替え先のエージェント識別子。 |
| handoffs.prompt | 切り替え先のエージェントに送信するプロンプトテキスト。 |
| handoffs.send | プロンプトを自動送信するかどうかを示すオプションの真偽値フラグ（デフォルトは false）。 |

注意
カスタムエージェント使用時に指定されたツールが利用できない場合は、そのツールは無視されます。

Tips: tools や mcp-servers を使うときは、実際の環境で利用可能かを事前に検証するとハンドオフやツール呼び出しの失敗を防げます。



handoffs
（エージェント間ハンドオフ）は、これらのファイルのフロントマター（YAMLセクション）で設定します。以下に、典型的なハンドオフ設定例を示します。

カスタムエージェントをつなげる仕組みをhandoffsと呼びます。
handoffsはカスタムエージェントの複数の組み合わせで作られます。
handoffsはバトンを渡すことをいいます。
