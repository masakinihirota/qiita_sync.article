<!--
title:   Next.js App router èªè¨¼æ©Ÿèƒ½ä»˜ã é–‹ç™ºç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
tags:    Next.js,Supabase,ãƒ¡ãƒ¼ãƒ«èªè¨¼
id:      12da291e560c4850b511
private: true
-->
----------------------------------------

git tagã®ä»˜ã‘æ–¹
ã‚³ãƒŸãƒƒãƒˆå¾Œã«
git tag <tagname>



----------------------------------------

TODO

Next.js Supabaseèªè¨¼æ©Ÿèƒ½ä»˜ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

npx create-next-app -e with-supabase
ã‚’
i18nã«å¯¾å¿œã•ã›ã‚‹

VNSã‚’è¨­è¨ˆã™ã‚‹

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’è¨­è¨ˆã™ã‚‹

ãƒ‡ãƒ¼ã‚¿ã®ã‚„ã‚Šå–ã‚Šã‚’è¡Œã†

ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹


----------------------------------------


# Next.jsã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

æ¨å¥¨ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

npx create-next-app -e with-supabase

Next.jsã®å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ã®ä¸€ã¤ã§ã™ã€‚
â†“ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãã®ã¾ã¾åˆ©ç”¨ã—ã¾ã™ã€‚

next.js/examples/with-supabase at canary Â· vercel/next.js

https://github.com/vercel/next.js/tree/canary/examples/with-supabase






å‹•ä½œç¢ºèª
npm run dev

ã¾ã ã€å‹•ã‹ãªã„
Supabaseã®ç’°å¢ƒãƒ•ã‚¡ã‚¤ãƒ«ãŒå¿…è¦ã§ã™ã€‚

Supabaseã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ã¦ç’°å¢ƒå¤‰æ•°ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚



# ç’°å¢ƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹

â€»Supabaseã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆæ¸ˆã¿ã§ã€
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šæƒ…å ±ã¯çŸ¥ã£ã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚

touch .env.local

```.env.local
NEXT_PUBLIC_SUPABASE_URL=https://zhlmcrnnjbsfhbnctenz.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=ey***********************************74

```

.env.local.example
ã¯å‰Šé™¤ã—ã¾ã™ã€‚



å‹•ä½œç¢ºèª
npm run dev
npm run build
npm run start

â€»npm run devã§èµ·å‹•ã—ã¦ã„ã‚‹ã¨ã€npm run buildã¯å‹•ä½œã—ã¾ã›ã‚“ã€‚



----------------------------------------

# GitHubã¸ã® PUSH ã¨ Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ ï¼‹ ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³

å‹•ä½œç¢ºèªã§ããŸã®ã§GitHubã¨Vercelã«ä¸€æ°—ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚

Next.js âœ–ï¸ Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ¢
https://zenn.dev/shgs/articles/6b7fde20a6a596


## GitHub ã¸ã®PUSH

GitHubã¸ã¯VSCodeã®æ©Ÿèƒ½ ã‚½ãƒ¼ã‚¹ç®¡ç†ã§ç°¡å˜ã«ãƒªãƒã‚¸ãƒˆãƒªãŒä½œæˆã•ã‚Œã€PUSHå‡ºæ¥ã¾ã—ãŸã€‚



## Vercel ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

Vercelã¸GitHubã«ä½œã£ãŸãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚

https://vercel.com/

å³ä¸Šã® Add Newãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦
Projectã‚’é¸æŠã—ã¾ã™ã€‚

å…ˆç¨‹ä½œã£ãŸãƒªãƒã‚¸ãƒˆãƒªã‚’é¸ã³ Importãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™ã€‚


Supabaseã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§
Environment Variablesã‚’è¨­å®šã—ã¾ã™ã€‚


NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJh*************************X8"
NEXT_PUBLIC_SUPABASE_URL="https://gzctqdrrnnkaxwwtzbsw.supabase.co"

ç’°å¢ƒå¤‰æ•°ã‚’å…¥åŠ›ã—ãŸã‚‰ Add ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ä¸€ã¤ã¥ã¤ç™»éŒ²ã—ã¦ã„ãã¾ã™ã€‚

ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ã€ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¾ã§ã—ã°ã‚‰ãå¾…ã¡ã¾ã™ã€‚


Congratulationsã¨è¡¨ç¤ºã•ã‚ŒãŸã‚‰æˆåŠŸã§ã™ã€‚



----------------------------------------

## ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¨­å®š

Vercelã§ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®šã™ã‚‹æ–¹æ³• | YoheiKoãƒ–ãƒ­ã‚°
https://yoheiko.com/blog/vercel%E3%81%A7%E3%81%AE%E7%8B%AC%E8%87%AA%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E8%A8%AD%E5%AE%9A/



----------------------------------------

# Vercelä¸Šã§Supabaseã¨é€£æºã™ã‚‹

Integrationsã«è¡Œã

é€£æºã™ã‚‹Supabaseã‚’æ¢ã—ã¾ã™ã€‚

Vercel | Works With Supabase
https://supabase.com/partners/integrations/vercel

ã“ã‚Œã§Supabaseã®ç’°å¢ƒå¤‰æ•°ãªã©ã¯è‡ªå‹•çš„ã«å–å¾—ã•ã‚Œã¾ã™ã€‚


ãƒ­ãƒ¼ã‚«ãƒ«ã«VercelãŒå–å¾—ã—ãŸç’°å¢ƒå¤‰æ•°ã‚’å–å¾—ã—ã¾ã™ã€‚

ãƒ­ãƒ¼ã‚«ãƒ«ã§Vercelã¸ã®ãƒ­ã‚°ã‚¤ãƒ³
npx vercel login
	GitHubã‚’é¸æŠã—ã¾ã™ã€‚



ãƒ­ãƒ¼ã‚«ãƒ«ä¸Šã‹ã‚‰Vercelã¨ãƒªãƒ³ã‚¯ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é¸æŠ
npx vercel link
	ãƒªãƒ³ã‚¯ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠã—ã¾ã™ã€‚



ç’°å¢ƒå¤‰æ•°ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«å–å¾—ã—ã¾ã™ã€‚
npx vercel env pull
	.env.localã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚
	.gitignoreã«å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯è¨˜å…¥ã•ã‚Œã¦ã„ã¾ã™ã€‚ï¼‰

ã™ã§ã«.env.localãŒã‚ã‚‹å ´åˆã¯å‰Šé™¤ã—ã¦ã‹ã‚‰ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨å†ç”Ÿæˆã•ã‚Œã¾ã™ã€‚



ã“ã‚Œã§ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã‚’è¡Œã„ã€‚
GitHubã¸PUSHã™ã‚‹ã¨
è‡ªå‹•çš„ã«Vercelã¸ãƒ‡ãƒ—ãƒ­ã‚¤ãŒèµ°ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ç’°å¢ƒã¯ã€é–‹ç™ºä¸­ã§ã™ã¨ç°¡å˜ã«å£Šã‚Œã‚‹ã®ã§éšæ™‚ã€Œæ³¨è¦–ã€ãŒå¿…è¦ã§ã™ã€‚



----------------------------------------



# srcãƒ•ã‚©ãƒ«ãƒ€ã®ä½œæˆ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç§»å‹•

mkdir src

srcã®ä¸‹ã«appãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨componentsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç§»å‹•ã—ã¾ã™ã€‚


tsconfig.jsonãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€éƒ¨å¤‰æ›´

```tsconfig.json
    "paths": {
      "@/*": ["./src/*"]
    }

```




tailwind.config.jsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€éƒ¨å¤‰æ›´

```tailwind.config.js
  content: [
    "./src/pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/components/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  darkMode: "media",
  theme: {
ã€‚ã€‚ã€‚

```

â€»src/pages ã¯Next.jsã®pages dirã‚’ä½¿ã£ã¦ã„ãŸã¨ãã®åæ®‹ã§ã™ã€‚
Next.js 13 ã¯ pages dir ã¨ app dir ã®ä¸¡æ–¹ã‚’åŒæ™‚ã«ä½¿ãˆã‚‹ã®ã§æ®‹ã—ã¦ãŠãã¾ã™ã€‚

darkMode: "media",ã‚’è¿½åŠ ã—ã¾ã™ã€‚



mkdir src/styles

src\app\globals.css
ã‚’
src\styles\globals.css
ã¸ç§»å‹•ã—ã¾ã™ã€‚


ãƒ‘ã‚¹ã®ä¿®æ­£ã‚’ã—ã¾ã™ã€‚

```src\app\layout.tsx
import "@/styles/globals.css"

```



src\styles\globals.csså†…å®¹ã®ä¿®æ­£

```src\styles\globals.css
@tailwind base;
@tailwind components;
@tailwind utilities;

```

src\app\layout.tsx ãƒ‘ã‚¹ã®ä¿®æ­£

```
import "@/styles/globals.css";

```



package.jsonãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€éƒ¨å¤‰æ›´

```package.json
  "name": "vns.blue",
  "version": "0.1.0",

```

â€»åå‰ã¯è‡ªç”±ã«ã¤ã‘ã¦ãã ã•ã„ã€‚



# eslintã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

npm i eslint eslint-config-next


touch .eslintrc.json

.eslintrc.json(åˆæœŸ)

```.eslintrc.json
{
  "extends": "next/core-web-vitals"
}

```



## tsconfig.json

TypeScriptã‚’é–‹ç™ºã—ã‚„ã™ãã™ã‚‹

```tsconfig.json (å¤‰æ›´ç®‡æ‰€)
    "strict": false,
    "strictNullChecks": true,

```



"strict": false ã¯ã€ä»¥ä¸‹ã®è¨­å®šã‚’ç„¡åŠ¹ã«ã—ã¾ã™ã€‚

"noImplicitAny": trueï¼šæš—é»™çš„ã«anyå‹ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹å¼ã‚’è¨±å¯ã—ã¾ã›ã‚“ã€‚
"strictNullChecks": trueï¼šnullã¨undefinedã®æ‰±ã„ã«é–¢ã™ã‚‹å³å¯†ãªå‹ãƒã‚§ãƒƒã‚¯ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚
"strictFunctionTypes": trueï¼šé–¢æ•°ã®å‹ãƒã‚§ãƒƒã‚¯ã‚’å³å¯†ã«è¡Œã„ã¾ã™ã€‚
"strictPropertyInitialization": trueï¼šã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®åˆæœŸåŒ–ã‚’å³å¯†ã«è¡Œã„ã¾ã™ã€‚
"noImplicitThis": trueï¼šthisã®å‹ãƒã‚§ãƒƒã‚¯ã‚’å³å¯†ã«è¡Œã„ã¾ã™ã€‚

â†‘ã“ã®ï¼•ã¤ã®ã†ã¡

"strictNullChecks"ã ã‘æœ‰åŠ¹ã«ã—ã¾ã™ã€‚


å‹•ä½œç¢ºèª

npm run dev



----------------------------------------

# i18n

i18n with Next.js 13 and app directory / App Router (an i18next guide)

https://locize.com/blog/next-13-app-dir-i18n/

â†‘ã“ã®Blogã‚’å‚è€ƒã«â†“ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¾ã—ãŸã€‚

masakinihirota/i18n

https://github.com/masakinihirota/i18n

i18nã‚µãƒ³ãƒ—ãƒ«(2023src\__vns\lab\nexti18n)ã®
(ã“ã‚Œã¯i18nextã®å…¬å¼Blogã‚µãƒ³ãƒ—ãƒ«ã‚’æµç”¨ã—ãŸã‚‚ã®ã§ã™ã€‚)
src\app\[lng]\ ä»¥ä¸‹
src\app\i18n\ ä»¥ä¸‹
ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚



ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i accept-language i18next i18next-browser-languagedetector i18next-resources-to-backend react-cookie react-i18next



å‹•ä½œç¢ºèª
npm run dev
npm run build
npm run start



----------------------------------------

# Layout


```src\app\layout.tsx
import "@/styles/globals.css";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body>
        {/* â†“ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«å½±éŸ¿ã‚’ä¸ãˆã¦ã„ã‚‹ */}
        <main className="flex flex-col items-center min-h-screen bg-background">
          {children}
        </main>
      </body>
    </html>
  );
}

```

å‹•ä½œç¢ºèª
npm run dev
npm run build
npm run start



```src\app\page.tsx
import { createServerComponentClient } from "@supabase/auth-helpers-nextjs";
import { cookies } from "next/headers";
import Link from "next/link";
import LogoutButton from "../components/LogoutButton";

export const dynamic = "force-dynamic";

export default async function Index() {
  const supabase = createServerComponentClient({ cookies });

  const {
    data: { user },
  } = await supabase.auth.getUser();

  return (
    // å…¨ä½“ã‚’ç¸¦ã«ãªã‚‰ã¹ã¦ã„ã‚‹ã€å¹…ã„ã£ã±ã„ã«ä¸¦ã¹ã¦ã„ã‚‹
    <div className="flex flex-col items-center w-full">
      {/* navéƒ¨åˆ† Home ,Advertisement, Dark mode,Language, Login */}
      {/* ãƒŠãƒ“éƒ¨åˆ†ã®é«˜ã•ã‚’æ±ºã‚ã¦ã„ã‚‹ã€ãƒœãƒ¼ãƒ€ãƒ¼ãƒ©ã‚¤ãƒ³ãƒœãƒˆãƒ ã‚’æã„ã¦ã„ã‚‹ ãƒœãƒ¼ãƒ€ãƒ¼è‰²ã¯ç¾åœ¨ã®æ–‡å­—è‰²
      ãƒŠãƒ“éƒ¨åˆ†ã¨ãƒ¡ã‚¤ãƒ³éƒ¨åˆ†ã®åˆ†é›¢ç®‡æ‰€ */}
      <nav className="flex justify-center w-full h-16 border-b border-current">
        {/* ãƒŠãƒ“éƒ¨åˆ† ä¸Šä¸‹ä¸­å¤®ã«æƒãˆã¦ã„ã‚‹ æ¨ªã«å‡ç­‰ã«ãªã‚‰ã¹ã¦ã„ã‚‹ å¹…ã„ã£ã±ã„ã«ä½¿ã£ã¦ã„ã‚‹ */}
        <div className="flex items-center justify-between w-full">
          VNS.BLUE
          <div />
          Dark mode
          <div />
          Language
          <div />
          Advertisement
          <div>
            {user ? (
              <div className="flex items-center gap-4">
                Hey, {user.email}!
                <LogoutButton />
              </div>
            ) : (
              <Link
                href="/login"
                className="px-4 py-2 no-underline rounded-md bg-btn-background hover:bg-btn-background-hover"
              >
                Login
              </Link>
            )}
          </div>
        </div>
      </nav>
      <main className="flex flex-col w-full max-w-4xl p-3 text-xl text-foreground">
        <Link href="./examples/client-component">Client Component Example</Link>
        <Link href="./examples/route-handler">Route Handler Example</Link>
        <Link href="./examples/server-action">Server Action Example</Link>
        <Link href="./examples/server-component">Server Component Example</Link>
        <br />
        {/* <Link href={`/${lng}/login`}></Link> */}
        <Link href={`/en`}>è‹±èª</Link>
        <Link href="/de">ãƒ‰ã‚¤ãƒ„èª</Link>
        <Link href="/ja">æ—¥æœ¬èª</Link>
      </main>
      <div />
      <footer className="flex items-center justify-center h-16">
        VNS.BLUE 2023
      </footer>
    </div>
  );
}

```



```src\app\[lng]\layout.js
import { dir } from "i18next";
import { languages } from "../i18n/settings";

export async function generateStaticParams() {
  return languages.map((lng) => ({ lng }));
}

export default function RootLayout({ children, params: { lng } }) {
  return (
    <div lang={lng} dir={dir(lng)}>
      {children}
    </div>
  );
}

```



å‹•ä½œç¢ºèª
npm run dev
npm run build
npm run start



â€»Linkãƒœã‚¿ãƒ³ã§TOPç”»é¢ã«æˆ»ã‚‹ã¨ç”»é¢ãŒçœŸã£æš—
ãƒªãƒ­ãƒ¼ãƒ‰ã§æ²»ã‚‹



----------------------------------------

# Supabaseã¨ã®ã‚¢ã‚¯ã‚»ã‚¹

Next.js 13 App router ã¨ Supabase ã§ã®ï¼”ã¤ã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³• - Qiita

https://qiita.com/masakinihirota/items/b4b168a056dc10776d87


vns\app\_examples
ã‚’
vns\app\examples
ã«å¤‰æ›´ã—ã¾ã™ã€‚

Supabaseã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ãã¾ã™ã€‚

SQL Editorã‚’é–‹ãã¾ã™ã€‚

```
create table if not exists todos (
  id uuid default gen_random_uuid() primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  title text,
  is_complete boolean default false,
  user_id uuid references auth.users default auth.uid()
);

-- Set up Row Level Security (RLS)
-- See https://supabase.com/docs/guides/auth/row-level-security for more details.
alter table todos
  enable row level security;

create policy "Authenticated users can select todos" on todos
  for select to authenticated using (true);

create policy "Authenticated users can insert their own todos" on todos
  for insert to authenticated with check (auth.uid() = user_id);

```

ã‚’è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚

å³ä¸‹ã® ã€ŒRUN CTRLã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ æˆåŠŸã—ãŸã‚‰ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ â†“Successã‚’ç¢ºèªã§ãã¾ã™ã€‚

ã€ŒSuccess. No rows returnedã€

ã“ã‚Œã§ todos ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå‡ºæ¥ã¾ã—ãŸã€‚



ã‚·ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é©ç”¨ã™ã‚‹

```
insert into todos(title)
values
  ('Create Supabase project'),
  ('Create Next.js app from Supabase Starter template'),
  ('Keep building cool stuff!');

```

ã‚·ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã¨åŒæ§˜ã«SQLæ–‡ã‚’è²¼ã‚Šä»˜ã‘ã¦å®Ÿè¡Œã—ã¾ã™ã€‚

Supabaseã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã® Table Editor ã§ todosãƒ†ãƒ¼ãƒ–ãƒ«ã‚’é¸æŠã™ã‚‹ã¨ã€‚
ãƒ‡ãƒ¼ã‚¿ã‚‚å…¥ã£ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

ã“ã‚Œã§Supabaseå´ã®ä¸‹æº–å‚™ã¯å®Œäº†ã§ã™ã€‚

ã“ã‚Œã‹ã‚‰Next.jsã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰Supabaseã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦
ãã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹ã¾ã§ã‚’å®Ÿè·µã—ã¾ã™ã€‚


4ã¤ã®æ¥ç¶šæ–¹æ³•

1. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ Supabaseã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•
2. ãƒ«ãƒ¼ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§ Supabaseã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•
3. Server Actionsã§Supabaseã®DBã‚’æ“ä½œã™ã‚‹æ–¹æ³•
4. ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ Supabaseã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•


ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«4ã¤ã®ãƒªãƒ³ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```
Client Component Example
Route Handler Example
Server Action Example
Server Component Example

```




å‹•ä½œç¢ºèª

npm run dev

http://localhost:3000/

æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã®ãªã‚‰ã°

ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ãªã„å ´åˆ
ãƒ‡ãƒ¼ã‚¿ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€
Server Actionã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“

ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹å ´åˆ
ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
Server Actionã‚’åˆ©ç”¨ã—ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’æŒ¿å…¥ã§ãã¾ã™ã€‚
â€»é€£æ‰“ã™ã‚‹ã¨é€£æ‰“ã—ãŸåˆ†ã ã‘ãƒ‡ãƒ¼ã‚¿ãŒæŒ¿å…¥ã•ã‚Œã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã®è§£èª¬ã¯Blogè¨˜äº‹ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚

ã“ã‚Œã§æœ€ä½é™ã®Webã‚¢ãƒ—ãƒªãŒå®Œæˆã—ã¾ã—ãŸã€‚



>æœ€ä½é™ã®Webã‚¢ãƒ—ãƒªã¨ã¯ï¼Ÿ
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç™»éŒ²ã€ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã€‚
DBã‚’ä½œã‚Šã€ãã®ä¸­ã«ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€‚
ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’æŒ‡å®šã—ã¦å‘¼ã³å‡ºã—ã¦ã€ç”»é¢ã«è¡¨ç¤ºã•ã›ã‚‹ã€‚
ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦DBã«ç™»éŒ²ã§ãã‚‹ã€‚
ãã®ç™»éŒ²ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã§ãã‚‹ã€‚



ä¸€æ®µè½ã¤ã„ãŸã®ã§
gitã®ã‚¿ã‚°ã‚’ä½œæˆ
tag i18n



----------------------------------------

# æ¬¡ã¸

TODO

ã“ã®ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã«ã€æ–°ãŸãªæ©Ÿèƒ½ã€ç›®çš„ã«ã‚ã£ãŸãƒ‡ãƒ¼ã‚¿å‡ºåŠ›ç­‰ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚

ãã®å‰ã«ã¾ãšã¯é–‹ç™ºã—ã‚„ã™ã„ã‚ˆã†ã«
åŸºæœ¬çš„ãªé–‹ç™ºç’°å¢ƒã«æ•´ãˆã¦ã„ãã¾ã™ã€‚



i18nåŒ– çµ‚äº†
	å¾Œã‹ã‚‰è¿½åŠ ã™ã‚‹ã»ã†ãŒè¤‡é›‘åŒ–ã—ã‚„ã™ã„ã®ã§å…ˆã«å®Ÿè£…ã—ã¦ãŠãã¾ã™ã€‚
	 [i18n]ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã£ã¦è¨€èªã®å‹•çš„ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

huskey
	è‡ªå‹•ãƒ“ãƒ«ãƒ‰ï¼†æˆåŠŸæ™‚ã«PUSH

ESlint
	ã‚ˆã‚Šä¾¿åˆ©ã«è¨­å®šã‚’ã—ã¾ã™ã€‚
Prettier

Darkmode

è£…é£¾

Storybook

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ RLS



----------------------------------------

åŸºæœ¬çš„ãªä½¿ã„æ–¹ huskey v8 ã‚³ãƒŸãƒƒãƒˆæ™‚ã«è‡ªå‹•ãƒ“ãƒ«ãƒ‰ or è‡ªå‹•ãƒ†ã‚¹ãƒˆ å¤±æ•—æ™‚ã«ã‚³ãƒŸãƒƒãƒˆã¯å®Ÿè¡Œã•ã‚Œãªã„ã€‚ æˆåŠŸæ™‚ã¯é€šå¸¸é€šã‚Šã€‚ - Qiita

https://qiita.com/masakinihirota/items/217ae8fc036e605e0482

# huskey ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

å…¬å¼ã‚µã‚¤ãƒˆ
Getting started | ğŸ¶ husky

https://typicode.github.io/husky/getting-started.html

ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯
"husky": "^8.0.0"



è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰

```
npx husky-init && npm install

```



ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ä¸­ã®è©³ç´°ã¯å…¬å¼ã‚µã‚¤ãƒˆã‚’å¾¡è¦§ãã ã•ã„ã€‚



## buildã‚³ãƒãƒ³ãƒ‰ã®è¿½åŠ 

ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ç·¨é›†ã—ã¾ã™ã€‚

```.husky\pre-commit
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npm run build   ï¼œï¼œï¼œã“ã“ã«å®Ÿè¡Œã—ãŸã„npm scriptã‚’æ›¸ãã¾ã™ã€‚

```

ã“ã‚Œã§ã‚³ãƒŸãƒƒãƒˆæ™‚ã«ã€Œãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã€ã§ npm run build ãŒèµ°ã‚Š
buildãŒå¤±æ•—ã™ã‚‹ã¨ã‚³ãƒŸãƒƒãƒˆãŒã•ã‚Œã¾ã›ã‚“ã€‚ï¼œï¼œä¾¿åˆ©
buildãŒæˆåŠŸã™ã‚‹ã¨ã‚³ãƒŸãƒƒãƒˆã¯é€šå¸¸é€šã‚Šã§ã™ã€‚

å¾Œã§lintã‚³ãƒãƒ³ãƒ‰ç­‰ã‚’è¿½åŠ äºˆå®šã€‚


ã‚³ãƒãƒ³ãƒ‰ã®è¿½åŠ ã‚³ãƒãƒ³ãƒ‰

npm testã‚’è¿½åŠ ã—ãŸã„å ´åˆ

```terminal
npx husky add .husky/pre-commit "npm test"

```



å‹•ä½œç¢ºèªã¯ã“ã‚Œã‹ã‚‰ã¯huskeyã¾ã‹ã›ï¼Ÿ
npm run devã®æ–¹ã ã‘ã§ã‚‚ç¢ºèªã™ã‚‹ã€‚


git tag huskey



----------------------------------------

ãƒ•ã‚¡ãƒ“ã‚³ãƒ³

VNS.BLUEã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã®è‰²

é’ç³»çµ±ã®è‰²ã«æ±ºã‚ã‚‹ã€‚

RGB	#
0		00
126		7E
254		FE

#007EFE

ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚’ä½œã‚Šæ›¸ãæ›ãˆã¾ã™ã€‚

src\app\favicon.ico



----------------------------------------




## middleware

2ã¤ã®ãƒªãƒã‚¸ãƒˆãƒª
with-supabase
ã¨
i18n
ã“ã®2ã¤ã®middlewareã‚’ã¾ã¨ã‚ã¾ã™ã€‚

middleware.ts
ã«æ‹¡å¼µå­ã‚’å¤‰æ›´ã—ã¾ã™ã€‚



```middleware.ts
import { createMiddlewareClient } from "@supabase/auth-helpers-nextjs";
import { NextResponse } from "next/server";

import type { NextRequest } from "next/server";

import acceptLanguage from "accept-language";

import { fallbackLng, languages, cookieName } from "@/app/i18n/settings";

acceptLanguage.languages(languages);

export const config = {
  // matcher: '/:lng*'
  matcher: ["/((?!api|_next/static|_next/image|assets|favicon.ico|sw.js).*)"],
};

export async function middleware(req: NextRequest) {
  const res = NextResponse.next();

  // Create a Supabase client configured to use cookies
  const supabase = createMiddlewareClient({ req, res });

  // Refresh session if expired - required for Server Components
  // https://supabase.com/docs/guides/auth/auth-helpers/nextjs#managing-session-with-middleware
  await supabase.auth.getSession();

  let lng;
  if (req.cookies.has(cookieName))
    lng = acceptLanguage.get(req.cookies.get(cookieName)?.value);
  if (!lng) lng = acceptLanguage.get(req.headers.get("Accept-Language"));
  if (!lng) lng = fallbackLng;

  // Redirect if lng in path is not supported
  if (
    !languages.some((loc) => req.nextUrl.pathname.startsWith(`/${loc}`)) &&
    !req.nextUrl.pathname.startsWith("/_next")
  ) {
    return NextResponse.redirect(
      new URL(`/${lng}${req.nextUrl.pathname}`, req.url)
    );
  }

  const refererHeaderValue = req.headers.get("referer");

  if (refererHeaderValue !== null) {
    const refererUrl = new URL(refererHeaderValue);
    const lngInReferer = languages.find((l) =>
      refererUrl.pathname.startsWith(`/${l}`)
    );
    const res = NextResponse.next();
    if (lngInReferer) res.cookies.set(cookieName, lngInReferer);
    return res;
  }

  return res;
}

```



å‹•ä½œã€ã‚¨ãƒ©ãƒ¼ç¢ºèª
ãƒ–ãƒ©ã‚¦ã‚¶ã®èª¿æŸ»æ¤œè¨¼ç”»é¢ã‚’é–‹ã„ã¦ãŠã
ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã‚’é–‹ã

npm run dev



----------------------------------------

ã“ã“ã§ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ã‚‹ã®ã«æ°—ã¥ã

```
app-index.js:31 Warning: Extra attributes from the server: class
    at body
    at html
    at RedirectErrorBoundary

```

åŸå› ã¯
ãƒ–ãƒ©ã‚¦ã‚¶ã®æ‹¡å¼µæ©Ÿèƒ½

å•é¡Œè§£æ±º
https://www.slingacademy.com/article/next-js-warning-extra-attributes-from-the-server/



å¯¾å¿œç­–ã¯
ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç”»é¢ã‚’åˆ©ç”¨ã™ã‚‹ã€‚ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã“ãªã„ã€‚

æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ãªã„ã€‚ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã“ãªã„ã€‚

<body suppressHydrationWarning={true}>
bodyã‚¿ã‚°ã« ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹ã™ã‚‹ã€‚

â†‘suppressHydrationWarningãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€
ReactãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’
ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹éš›ã«ã€
è­¦å‘Šã‚’æŠ‘åˆ¶ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚



```src\app\layout.tsx
import "@/styles/globals.css";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html>
      <head />
      <body suppressHydrationWarning={true}>{children}</body>
    </html>
  );
}

```



å‹•ä½œã€ã‚¨ãƒ©ãƒ¼ç¢ºèª
ãƒ–ãƒ©ã‚¦ã‚¶ã®èª¿æŸ»æ¤œè¨¼ç”»é¢ã‚’é–‹ã„ã¦ãŠã
ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã‚’é–‹ã

npm run dev





----------------------------------------

# eslint & prettier

VSCodeã®è¨­å®š Default Formatterã‚’Prettierã«ã™ã‚‹ã€‚

```setting.json
"editor.defaultFormatter": "esbenp.prettier-vscode"

```



# prettier

å…¬å¼ã‚µã‚¤ãƒˆ Install Prettier

https://prettier.io/docs/en/install.html

prettier ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

npm install -D prettier

eslint ã¨è¨­å®šãŒè¡çªã™ã‚‹ã®ã‚’é¿ã‘ã‚‹ãŸã‚ã®è¨­å®š

npm install -D eslint-config-prettier

ç©ºã®.prettierrc ã‚’ä½œæˆã—ã¦ã€Prettier ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã“ã¨ã‚’ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚„ãã®ä»–ã®ãƒ„ãƒ¼ãƒ«ã«çŸ¥ã‚‰ã›ã¾ã™ã€‚

touch .prettierrc

```.prettierrc

```

Prettier ã‚’ VSCode ã§ä½¿ã†ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã‚’ Prettier ã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

.eslintrc.json ã« prettier è¨­å®šã®è¿½åŠ ã‚’ã—ã¾ã™ã€‚

```.eslintrc.json
{
  "extends": [
    "next/core-web-vitals",
    "prettier"
  ]
}

```

package.json ã« format ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```package.json (è¿½è¨˜)
"scripts": {
  "format": "prettier --write ."
  ...

```

## .prettierrc è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ 

.prettierrc ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­å®šã—ã¾ã™ã€‚

```.prettierrc
{
  "tabWidth": 4,
  "useTabs": false
}

```

â€»ãƒ«ãƒ¼ãƒ«ã¯å„è‡ªã§å¥½ããªã‚ˆã†ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚

â†“ ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯æ¨å¥¨ã•ã‚Œãªããªã‚Šã¾ã—ãŸã€‚
eslint-plugin-prettier

æ¬¡ã«ã€.prettierignore ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã€ã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ãªã„ã‹ã‚’ Prettier CLI ã¨ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«çŸ¥ã‚‰ã›ã¾ã™ã€‚

touch .prettierignore

```.prettierignore
# Ignore artifacts:
build
coverage

# dotfile
.env*

# markdown
*.md

# next.js
/.next/
/out/

# production
/build

package-lock.json

*.stories.ts
*.stories.tsx

```



## Prettier ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

â€»é€šå¸¸ã¯ VSCode å´ã‚’è¨­å®šã™ã‚Œã°ã€ä¿å­˜æ™‚ã«è‡ªå‹•ã§å®Ÿè¡Œã•ã‚Œã‚‹ã®ã§ã€ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã¤ã“ã¨ã¯ã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ã€‚

å‹•ä½œç¢ºèªã®ãŸã‚ prettier ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

å…¨ä½“ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¾ã™ã€‚
npx prettier . --write

src ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¾ã™ã€‚
npx prettier src/ --write

å·¨å¤§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã«æ™‚é–“çŸ­ç¸®ã®ãŸã‚ãƒ•ã‚©ãƒ«ãƒ€ã‚’æŒ‡å®šã—ãŸã„å ´åˆ
npx prettier [ãƒ•ã‚©ãƒ«ãƒ€å] --write

ç›´æ¥ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹å ´åˆ
npx prettier src\app\page.tsx --write

prettier ãŒå®Ÿè¡Œæ¸ˆã¿ã‹ã®ç¢ºèªï¼ˆä¸Šæ›¸ãã¯ã—ãªã„ï¼‰
npx prettier . --check



å‹•ä½œç¢ºèª
npm run buildç¢ºèª



----------------------------------------

# eslintã®è©³ç´°ãªè¨­å®š

## .eslintignore ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

.eslintignore ã‚’ä½œæˆã—ã¾ã™ã€‚

touch .eslintignore

â†“lint å¯¾è±¡ã‹ã‚‰å¤–ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­å®šã—ã¾ã™ã€‚

```.eslintignore
# config
.eslintrc.json
.prettierrc
next.config.js
tailwind.config.js
tsconfig.json
postcss.config.js

# build dir
build/
bin/
obj/
out/
.next/

# è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«
package-lock.json

# Storybook
*.stories.ts
*.stories.tsx

# CSSãƒ•ã‚¡ã‚¤ãƒ«
*.css

# mdxãƒ•ã‚¡ã‚¤ãƒ«
*.mdx

# ã™ã¹ã¦ã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–ã™ã‚‹
**/*.png
**/*.jpg
**/*.jpeg
**/*.gif
**/*.ico

```


# ESLint ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«


next.js/packages/eslint-config-next/index.js at canary Â· vercel/next.js Â· GitHub

https://github.com/vercel/next.js/blob/canary/packages/eslint-config-next/index.js

ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã‚’èª¿ã¹ã‚‹ã¨ next/core-web-vitals ã¯
next/recommended
react/recommended
react-hooks/recommended
ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã‚‹ã®ã§ã€â†‘ ã“ã‚Œã‚‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ä¸è¦ã§ã™ã€‚


# eslint-plugin-import

Next.js é–‹ç™º ESLint ã§ import æ–‡ã®è‡ªå‹•æŒ¿å…¥ã€è‡ªå‹•å‰Šé™¤ã€è‡ªå‹•ã‚½ãƒ¼ãƒˆ - Qiita

https://qiita.com/masakinihirota/items/fae505a58892b00550a7

npm install -D eslint-plugin-unused-imports --legacy-peer-deps




```.eslintrc.json
{
  "extends": ["next/core-web-vitals", "prettier"],
  "plugins": ["unused-imports"],
  "rules": {
    "unused-imports/no-unused-imports": "warn"
  }
}

```

â€» â†‘ã“ã®è¨­å®šã¯å¿…è¦ãªæœ€å°é™ã®è¨­å®šã«ã—ã¦ã‚ã‚‹ã®ã§ã€è‡ªå‹•æŒ¿å…¥ã€è‡ªå‹•å‰Šé™¤ã®ç¢ºèªç”¨ã¨ã—ã¦æœ‰åŠ¹ã§ã™ã€‚




ã•ã‚‰ã«ã€ä¸¦ã¹æ›¿ãˆã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```.eslintrc.json
{
  "extends": ["next/core-web-vitals", "prettier"],
  "plugins": ["unused-imports"],
  "rules": {
    // TypeScriptã§æœªä½¿ç”¨ã®å¤‰æ•°ã‚’è¨±å¯ã™ã‚‹ã‹ã©ã†ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€offã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€æœªä½¿ç”¨ã®å¤‰æ•°ã‚’è¨±å¯ã—ã¾ã™ã€‚
    "@typescript-eslint/no-unused-vars": "off",
    // æœªä½¿ç”¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€warnã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€æœªä½¿ç”¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒã‚ã‚‹å ´åˆã«è­¦å‘Šã‚’å‡ºã—ã¾ã™ã€‚
    "unused-imports/no-unused-imports": "warn",
    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆé †åºã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€é…åˆ—ã®ä¸­ã«è¤‡æ•°ã®ã‚°ãƒ«ãƒ¼ãƒ—ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚å„ã‚°ãƒ«ãƒ¼ãƒ—ã¯ã€groupsãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
    "import/order": [
      "warn",
      {
        "groups": [
          // builtin: Node.js ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
          // external: npm install ç­‰ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤–éƒ¨ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
          // internal: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã€ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          // parent: è¦ªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          // sibling: å…„å¼Ÿãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          // index: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          // object: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          // type: å‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          "builtin",
          "external",
          "internal",
          ["parent", "sibling"],
          "index",
          "object",
          "type"
        ],
        // ãã‚Œãã‚Œã®groupsã¨ã®é–“ã¯1è¡Œåˆ†ç©ºã‘ã¾ã™ã€‚
        "newlines-between": "always",
        // ç‰¹å®šã®ã‚°ãƒ«ãƒ¼ãƒ—ã® import æ–‡ã‚’é™¤å¤–ã™ã‚‹ã‹ã©ã†ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚
        "pathGroupsExcludedImportTypes": ["builtin", "external"],
        // order ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ã—ã¾ã™ã€‚
        // caseInsensitive ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€å¤§æ–‡å­—å°æ–‡å­—ã‚’ç„¡è¦–ã—ã¦ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ä¸¦ã¹ã‚‹ã‹ã©ã†ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚
        "alphabetize": { "order": "asc", "caseInsensitive": true },
        "pathGroups": [
          // pattern: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€src/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã®ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
          // group: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ãŒä¸€è‡´ã—ãŸå ´åˆã«ã€ã©ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«å±ã™ã‚‹ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€internalã‚°ãƒ«ãƒ¼ãƒ—ã«å±ã™ã‚‹ã‚ˆã†ã«æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
          // position: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ãŒä¸€è‡´ã—ãŸå ´åˆã«ã€ã©ã®ä½ç½®ã«æŒ¿å…¥ã™ã‚‹ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€beforeã«æŒ‡å®šã—ã¦ã„ã‚‹ãŸã‚ã€ä»–ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚ˆã‚Šã‚‚å‰ã«æŒ¿å…¥ã•ã‚Œã¾ã™ã€‚
          {
            "pattern": "src/**",
            "group": "internal",
            "position": "before"
          }
        ]
      }
    ]
  }
}

```




## ç¢ºèªç”¨ã®ãƒšãƒ¼ã‚¸

import æ–‡ã®è‡ªå‹•å‰Šé™¤ã‚„è‡ªå‹•æŒ¿å…¥ãŒè©¦ã›ã¾ã™ã€‚

```src\app\XXX.tsx
// importæ–‡ã®é †ç•ªã‚‚è‡ªå‹•æ•´å½¢ã•ã‚Œã¾ã™ã€‚
import { type NextPage } from "next";
import Link from "next/link";

const Home: NextPage = () => {
  return (
    <main>
      {/* TailwindCSSã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å€¤ã‚‚è‡ªå‹•æ•´åˆ—ã•ã‚Œã¾ã™ã€‚ */}
      <h1 className="pt-2 p-4">VNS.BLUE</h1>
      Next.js app router é–‹ç™ºç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (Storybook Supabase shadcn/ui)
      <br />
      {/* â†“ã“ã®è¡Œã‚’æ¶ˆã™ã¨importæ–‡ãŒè‡ªå‹•å‰Šé™¤ã•ã‚Œã¾ã™ã€‚ */}
      <Link href="/">Home</Link>
    </main>
  );
};

export default Home;

```



```.eslintrc.json
{
  "extends": ["eslint:recommended", "next/core-web-vitals", "prettier"],
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    // tsx ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®JSXæ§‹æ–‡ã‚’æ­£ã—ãè§£æã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
    "ecmaFeatures": {
      "jsx": true
    },
    "ecmaVersion": 2020,
    "sourceType": "module",
    "jsx": "react"
  },
  // react: Reactã®æ§‹æ–‡ã‚’è§£æã™ã‚‹ãŸã‚ã®ãƒ«ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™ã€‚
  // import: importæ–‡ã®æ§‹æ–‡ã‚’è§£æã™ã‚‹ãŸã‚ã®ãƒ«ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™ã€‚
  // unused-imports: æœªä½¿ç”¨ã®importæ–‡ã‚’æ¤œå‡ºã™ã‚‹ãŸã‚ã®ãƒ«ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™ã€‚
  "plugins": ["react", "import", "unused-imports"],
  "root": true,
  "rules": {
    // TypeScriptã§æœªä½¿ç”¨ã®å¤‰æ•°ã‚’è¨±å¯ã™ã‚‹ã‹ã©ã†ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€offã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€æœªä½¿ç”¨ã®å¤‰æ•°ã‚’è¨±å¯ã—ã¾ã™ã€‚
    "@typescript-eslint/no-unused-vars": "off",
    // æœªä½¿ç”¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€warnã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€æœªä½¿ç”¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒã‚ã‚‹å ´åˆã«è­¦å‘Šã‚’å‡ºã—ã¾ã™ã€‚
    "unused-imports/no-unused-imports": "warn",
    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆé †åºã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€é…åˆ—ã®ä¸­ã«è¤‡æ•°ã®ã‚°ãƒ«ãƒ¼ãƒ—ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚å„ã‚°ãƒ«ãƒ¼ãƒ—ã¯ã€groupsãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
    "import/order": [
      // ã‚¨ãƒ©ãƒ¼ã ã¨å‹•ä½œãŒæ­¢ã¾ã‚Šã¾ã™ã€‚
      // è­¦å‘Šã ã¨è­¦å‘Šè¡¨ç¤ºã¯ã•ã‚Œã¾ã™ãŒå‹•ä½œã¯æ­¢ã¾ã‚Šã¾ã›ã‚“ã€‚
      "warn",
      {
        "groups": [
          // builtin: Node.js ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
          // external: npm install ç­‰ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤–éƒ¨ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
          // internal: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã€ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          // parent: è¦ªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          // sibling: å…„å¼Ÿãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          // index: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          // object: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          // type: å‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã®
          "builtin",
          "external",
          "internal",
          ["parent", "sibling"],
          "index",
          "object",
          "type"
        ],
        // ãã‚Œãã‚Œã®groupsã¨ã®é–“ã¯1è¡Œåˆ†ç©ºã‘ã¾ã™ã€‚
        "newlines-between": "always",
        // ç‰¹å®šã®ã‚°ãƒ«ãƒ¼ãƒ—ã® import æ–‡ã‚’é™¤å¤–ã™ã‚‹ã‹ã©ã†ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚
        "pathGroupsExcludedImportTypes": ["builtin", "external"],
        // order ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ã—ã¾ã™ã€‚
        // caseInsensitive ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€å¤§æ–‡å­—å°æ–‡å­—ã‚’ç„¡è¦–ã—ã¦ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«ä¸¦ã¹ã‚‹ã‹ã©ã†ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚
        "alphabetize": { "order": "asc", "caseInsensitive": true },
        "pathGroups": [
          // pattern: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€src/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã®ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
          // group: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ãŒä¸€è‡´ã—ãŸå ´åˆã«ã€ã©ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«å±ã™ã‚‹ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€internalã‚°ãƒ«ãƒ¼ãƒ—ã«å±ã™ã‚‹ã‚ˆã†ã«æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
          // position: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ãŒä¸€è‡´ã—ãŸå ´åˆã«ã€ã©ã®ä½ç½®ã«æŒ¿å…¥ã™ã‚‹ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€beforeã«æŒ‡å®šã—ã¦ã„ã‚‹ãŸã‚ã€ä»–ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚ˆã‚Šã‚‚å‰ã«æŒ¿å…¥ã•ã‚Œã¾ã™ã€‚
          {
            "pattern": "src/**",
            "group": "internal",
            "position": "before"
          }
        ]
      }
    ]
  }
}

```



## ESlintã§ã®ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹

### *.tsxãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å ´åˆ

npx eslint src/**/*.tsx

### å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å ´åˆ

npx eslint src/**/*

â€»ãƒã‚§ãƒƒã‚¯ã‚’ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã¯ .eslintignore ã«ç™»éŒ²ã—ã¾ã™ã€‚


## prettierã®ãƒ«ãƒ¼ãƒ«ã§æ›¸ãæ›ãˆã‚‹

npx prettier . --write



----------------------------------------

ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®å®Ÿè£…