<!--
title: masakinihirota-template GitHub Copilot ã«ã‚ˆã‚‹è¨­è¨ˆã¨å®Ÿè£…
tags: VNS
id: f893eed64266631706b2
private: true
-->


----------------------------------------

TODO

ã‚¿ã‚¤ãƒˆãƒ«
åœŸå°ã¯äººé–“ã€æ©Ÿèƒ½ã¯Vibeã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

åœŸå°éƒ¨åˆ†ã¯ã€ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‹ã‚‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãªã©ã¯äººåŠ›ã§è¡Œã†

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã£ã¦ãã“ã‹ã‚‰Vibeã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡Œã†

è¿½åŠ æ©Ÿèƒ½
å®Ÿéš›ã®æ©Ÿèƒ½ã¯Vibeã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§è¡Œã†

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯v0ã€Readdyã€same.newãªã©ã§ä½œã‚‹

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã€æ±ç”¨çš„ã§ã€åŠ¹æœçš„ãªãƒ«ãƒ¼ãƒ«ã‚’
æ•™ãˆã¦ã‚‚ã‚‰ã†ã€‚

åŠ¹æœçš„ã ã£ãŸãƒ«ãƒ¼ãƒ«ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹ã€‚



# é‡è¦ã‚³ãƒãƒ³ãƒ‰

```terminal
pnpm run dev
pnpm run storybook
supabase start
supabase stop
# Stopã‚³ãƒãƒ³ãƒ‰ã§ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¿å­˜ã•ã‚Œã¾ã™ã€‚
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯DBeaver(å¤–éƒ¨DBãƒ„ãƒ¼ãƒ«)ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

pnpm db:generate
pnpm db:migrate
pnpm db:push
pnpm db:studio
pnpm db:seed





```

# URL

## ãƒ­ãƒ¼ã‚«ãƒ«

Next.jsã‚¢ãƒ—ãƒª
http://localhost:3000

Storybook
http://localhost:6006/

ãƒ­ãƒ¼ã‚«ãƒ«ã® Supabase
http://127.0.0.1:54323/project/default



## ã‚µãƒ¼ãƒãƒ¼

Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
Dashboard | Supabase
https://supabase.com/dashboard/projects

Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
https://vercel.com/dashboard

å…¬é–‹ã‚µã‚¤ãƒˆ
Next.js and Supabase Starter Kit
https://vns-masakinihirota.vercel.app/



## package.jsonã®script

â€» package.jsonã®scriptã‚’è‡ªåˆ†ãªã‚Šã«ä½¿ã„ã‚„ã™ã„ã‚ˆã†ã«æ•´ç†ã—ã¾ã™ã€‚

å„CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã®ã§ã€ç›´æ¥å®Ÿè¡Œã™ã‚‹ã®ã§ã€ä¸è¦ãªscriptã‚’å‰Šé™¤ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚



----------------------------------------

# ä½œæ¥­ã®æµã‚Œ

## è¨­è¨ˆæ›¸ã‚’æ›¸ã

Webã‚¢ãƒ—ãƒªmasakinihirotaã®è¨­è¨ˆæ›¸

## ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‚’ä½œã‚‹

AIã«è¨­è¨ˆæ›¸ã‹ã‚‰å®Ÿè£…ã™ã‚‹ã‚¿ã‚¹ã‚¯ã«åˆ†è§£ã—ã¦ã‚‚ã‚‰ã„ã€ãã®ã‚¿ã‚¹ã‚¯ã‚’ãƒªã‚¹ãƒˆåŒ–ã—ãŸã‚‚ã®ã€‚

Webã‚¢ãƒ—ãƒªãªã®ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ãƒšãƒ¼ã‚¸å˜ä½ã§ä½œæ¥­ã‚’åˆ†å‰²ã—ã¦ã‚‚ã‚‰ã†ã€‚
ãã®ä½œæ¥­ã‚’ã‚¿ã‚¹ã‚¯ã¨ã—ã¦æ‰±ã„ã€ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‚’ä½œã‚‹ã€‚

é€²æ—ç®¡ç†ã‚‚å…¼ã­ã¾ã™ã€‚

ç¬¬ä¸‰ç‰ˆ VSCode ã® Rules for AI å…¨ä½“ã®ãƒ«ãƒ¼ãƒ«è¨­å®š #githubcopilot - Qiita
https://qiita.com/masakinihirota/items/fa7854f30e6c657d0cda

ä¾¿åˆ©ãªMCP 2025å¹´4æœˆç‰ˆ (ã‚‚ã†å¤ã„ã‚³ãƒ¼ãƒ‰ã®ææ¡ˆã¯ã—ãªããªã‚‹MCPä»–) #Supabase - Qiita
https://qiita.com/masakinihirota/items/8971aa8ccead3193e77f



## VNS masakinihirotaã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ

Webã‚¢ãƒ—ãƒªmasakinihirotaã‚’ä½œã‚Šã¾ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®è¨­è¨ˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã€
è¤‡æ•°ã®ãƒªãƒã‚¸ãƒˆãƒªã«ãã‚Œãã‚Œå½¹å‰²ã‚’ä¸ãˆã¦ç®¡ç†ã—ã‚„ã™ãã—ã¾ã™ã€‚

### ãƒªãƒã‚¸ãƒˆãƒªã®å½¹å‰²


Webã‚¢ãƒ—ãƒªã§å¿…è¦ãª
* è¨­è¨ˆæ›¸ ãƒªãƒã‚¸ãƒˆãƒª
* Webã‚¢ãƒ—ãƒªæœ¬ä½“ ãƒªãƒã‚¸ãƒˆãƒª
* GitHub Copilotã¸ã®æŒ‡ç¤ºæ›¸ ãƒªãƒã‚¸ãƒˆãƒª
* ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ ãƒªãƒã‚¸ãƒˆãƒª
* ã‚µãƒ³ãƒ—ãƒ«ã€è³‡æ–™ç½®ãå ´

ğŸ‘†ã“ã‚Œã‚‰ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ã€
VSCodeã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ä¸€ã¤ã«ã¾ã¨ã‚ã¾ã™ã€‚
GitHub Copilotã¯ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å…¨ä½“ã‚’ã¿ã¦ãã‚Œã¾ã™ã€‚




### ã‚¢ãƒ—ãƒªæœ¬ä½“ ãƒªãƒã‚¸ãƒˆãƒª

ã‚¢ãƒ—ãƒªæœ¬ä½“ã®ã‚³ãƒ¼ãƒ‰ãŒç½®ã„ã¦ã‚ã‚Šã¾ã™ã€‚
Next.jsç­‰ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚

masakinihirota/vns-masakinihirota
https://github.com/masakinihirota/vns-masakinihirota



### GitHub Copilotã¸ã®æŒ‡ç¤ºæ›¸ ãƒªãƒã‚¸ãƒˆãƒª

GitHub Copilotã¸ã®æŒ‡ç¤ºæ›¸

masakinihirota/vns-masakinihirota-custom-instructions
https://github.com/masakinihirota/vns-masakinihirota-custom-instructions

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ã€
* GitHub Copilotã¸ã®æŒ‡ç¤ºæ›¸
* è¨­è¨ˆæ›¸ã‹ã‚‰ä½œæˆã—ãŸã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ
* ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‹ã‚‰ä½œæˆã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
* ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‚’ä½¿ã£ãŸé€²æ—ç®¡ç†
ã®å½¹å‰²ãŒã‚ã‚Šã¾ã™ã€‚

è¨­è¨ˆæ›¸ã‚’å…ƒã«ã€é–‹ç™ºã«å¿…è¦ãªã‚¿ã‚¹ã‚¯ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚
ã‚¿ã‚¹ã‚¯ã¯ã€æ©Ÿèƒ½å˜ä½ã‚„å·¥ç¨‹å˜ä½ã§ç´°ã‹ãåˆ†å‰²ã—ã¾ã™ã€‚
é€²æ—ç®¡ç†ã‚’åŒæ™‚ã«è¡Œã„ã¾ã™ã€‚

#### GitHub Copilotã¸ã®æŒ‡ç¤ºæ›¸

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã¸ã®æŒ‡ç¤ºæ›¸ã§ã™ã€‚
ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®çµ±ä¸€ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã§ã™ã€‚

#### ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

è¨­è¨ˆæ›¸ã‹ã‚‰ä½œæˆã—ãŸãƒªã‚¹ãƒˆã§ã™ã€‚

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«

æ©Ÿèƒ½ã”ã¨ã«å®Ÿè£…ã™ã‚‹ãŸã‚ã®ã€GitHub Copilotã¸ã®æŒ‡ç¤ºæ›¸ã§ã™ã€‚
æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹äº‹ã«ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚



### Webã‚¢ãƒ—ãƒªã®è¨­è¨ˆæ›¸ ãƒªãƒã‚¸ãƒˆãƒª

ã‚¢ãƒ—ãƒªã®ç›®çš„ã€æ©Ÿèƒ½ã€æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã€APIè¨­è¨ˆã€ç”»é¢é·ç§»å›³ç­‰

masakinihirota/vns-masakinihirota-design
https://github.com/masakinihirota/vns-masakinihirota-design



### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ ãƒªãƒã‚¸ãƒˆãƒª

Webã‚¢ãƒ—ãƒªã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

â€»é‡è¦
ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã„ã¦ã€ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã‹ã‚ŒãŸã“ã¨ãŒæœ€ã‚‚å„ªå…ˆã•ã‚Œã¾ã™ã€‚

masakinihirota/vns-masakinihirota-doc
https://github.com/masakinihirota/vns-masakinihirota-doc



### ã‚µãƒ³ãƒ—ãƒ« ãƒªãƒã‚¸ãƒˆãƒª

GitHub Copilotã«èª­ã‚“ã§ã‚‚ã‚‰ã†ã‚µãƒ³ãƒ—ãƒ«
ãã®ä»–ã®è³‡æ–™ãªã©ã‚’ç½®ãã¾ã™ã€‚

masakinihirota/vns-masakinihirota-sample
https://github.com/masakinihirota/vns-masakinihirota-sample

â€»ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“


----------------------------------------
----------------------------------------
----------------------------------------


# Vercel CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Vercel CLI Overview

https://vercel.com/docs/cli

```terminal
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i -g vercel
vercel --version

```

----------------------------------------

# ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼

ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚’åˆ©ç”¨ã—ã¦ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åœŸå°ã‚’ä½œã‚Šã¾ã™ã€‚

nextjs/saas-starter: Get started quickly with Next.js, Postgres, Stripe, and shadcn/ui.
https://github.com/nextjs/saas-starter

Framework: Next.js
Database: Postgres
ORM: Drizzle
Payments: Stripe
UI Library: shadcn/ui
ãƒ¡ãƒ¼ãƒ«èªè¨¼

ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã«å¾Œã§è¿½åŠ ã™ã‚‹ã‚‚ã®
	Googleèªè¨¼
	GitHubèªè¨¼
	Supabaseã®è¿½åŠ 
	ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
	Hono
	husky
	Turborepo

ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ã‚ãªã„å ´åˆ

```terminal
npx create-next-app@latest

```

åŸºæœ¬çš„ã«ã€Next.jsã«å¤§å‹ã®ãƒ„ãƒ¼ãƒ«ã‚’å…ˆã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
Supabase
Storybook

é–‹ç™ºã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«å´ã§é–‹ç™ºã—ã¦ã€GitHubã«pushã—ã¾ã™ã€‚
ãã†ã™ã‚‹ã¨è‡ªå‹•çš„ã«ã‚µãƒ¼ãƒãƒ¼(Vercel)å´ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚



##  ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆ

Vercel
Cloudflare Workers
ãã®ä»–å¥½ããªå ´æ‰€



## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å±•é–‹
README.mdãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚€

ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º
`.env.local`
æœ¬ç•ªç’°å¢ƒ
`.env`

ã‚’ç”¨æ„ã—ã¾ã™ã€‚

```.gitignore
# env files
.env*
.env*.local
.env*.production

```

Gitã¨GitHubã§ç®¡ç†ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```terminal
git init
pnpm install

```

GitHubã¸ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦Publicãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ã€‚

â€»ç’°å¢ƒå¤‰æ•°ãŒgitã®è¿½è·¡å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã«ãªã£ã¦ãªã„ã‹ç¢ºèªã—ã¾ã™ã€‚



## gité–‹ç™ºãƒ–ãƒ©ãƒ³ãƒ

main		ãƒ¡ã‚¤ãƒ³
dev			é–‹ç™º

devã§é–‹ç™ºã—ã¦ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚¨ãƒ©ãƒ¼ãŒãªãã€ãƒ“ãƒ«ãƒ‰ãŒé€šã£ãŸã‚‰mainã«ãƒãƒ¼ã‚¸ã—ã¦
mainã¯githubã¸pushã—ã¾ã™ã€‚

ã“ã‚Œã¯huskyã‚’ä½¿ã†ã¨åŠè‡ªå‹•åŒ–ã•ã‚Œã¾ã™ã€‚
é‡è¦ãªæ±ºå®šã¯äººé–“ã®æ‰‹ã§ã€ãã‚Œä»¥å¤–ã¯è‡ªå‹•åŒ–ã«å‡ºæ¥ã¾ã™ã€‚

----------------------------------------

## èµ·å‹•ã•ã›ã‚‹ã¾ã§

Supabase ã®ç’°å¢ƒå¤‰æ•°ã®ä½œæˆ
Stripe ã®ç’°å¢ƒå¤‰æ•°ã®ä½œæˆ
Googleèªè¨¼ã®ç’°å¢ƒå¤‰æ•°ã®ä½œæˆ
GitHubèªè¨¼ã®ç’°å¢ƒå¤‰æ•°ã®ä½œæˆ

Vercelã«ç™»éŒ²



----------------------------------------

# Vercel

## Vercelã§GitHubã¨é€£æº

Vercelã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã£ã¦ã€GitHubã®ãƒªãƒã‚¸ãƒˆãƒªã¨æ¥ç¶šã—ã¾ã™ã€‚

## ã‚¢ãƒ—ãƒªã‚’Vercelã«ãƒ‡ãƒ—ãƒ­ã‚¤

Vercelã¨GitHubã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒªãƒ³ã‚¯ã•ã›ã‚‹ã“ã¨ã§
GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã—ãŸã¨åŒæ™‚ã«Vercelã«ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã™ã€‚

## Vercel CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ãƒ­ã‚°ã‚¤ãƒ³

```terminal
pnpm i -g vercel
vercel login

```

## vercelã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªãƒ³ã‚¯

ãƒ­ãƒ¼ã‚«ãƒ«ä¸Šã‹ã‚‰Vercelã¨ãƒªãƒ³ã‚¯ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é¸æŠ

```terminal
vercel link

```

GitHubã®ãƒªãƒã‚¸ãƒˆãƒªã¨Vercelã®Productionã‚’æ¥ç¶š




## ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

### Supabaseã®ç’°å¢ƒå¤‰æ•°

Vercelã®ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹

Supabase for Vercel
https://vercel.com/marketplace/supabase

ğŸ‘†Vercelã®ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã«SupabaseãŒã‚ã‚‹ã®ã§
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨
Supabaseã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ç¹‹ãŒã‚Šã€
ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã‚’è‡ªå‹•ã§ã—ã¦ãã‚Œã¾ã™ã€‚

```enviromnents
POSTGRES_URL
POSTGRES_PRISMA_URL
POSTGRES_URL_NON_POOLING
POSTGRES_USER
POSTGRES_HOST
POSTGRES_PASSWORD
POSTGRES_DATABASE
SUPABASE_SERVICE_ROLE_KEY
SUPABASE_ANON_KEY
SUPABASE_URL
SUPABASE_JWT_SECRET
NEXT_PUBLIC_SUPABASE_ANON_KEY
NEXT_PUBLIC_SUPABASE_URL

```

## ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜

```terminal
vercel env pull

```

ğŸ‘†Vercelã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã®ç’°å¢ƒå¤‰æ•°ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚

.env.localãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚
æ—¢å­˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã¨ä¸Šæ›¸ãã™ã‚‹ã‹èã„ã¦ãã¾ã™ã€‚



## Vercelã§ã®ãƒ“ãƒ«ãƒ‰

ã‚³ãƒ¼ãƒ‰ã¨ãã®ç’°å¢ƒå¤‰æ•°ãŒãã¡ã‚“ã¨è¨­å®šã•ã‚Œã¦ã„ã‚‹ã¨
ãƒ“ãƒ«ãƒ‰ãŒé€šã‚Šã¾ã™ã€‚

Vercelã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ãDomainsã‚’è¦‹ã¦ã¿ã‚‹ã¨
ã‚¢ãƒ—ãƒªã®å…¬é–‹ã—ã¦ã„ã‚‹URLãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã§ã‚‚ã†ã™ã§ã«è‡ªåˆ†ã®ã‚¢ãƒ—ãƒªãŒä¸–ç•Œã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã§ã‚³ãƒ¼ãƒ‰ã¨DBã¨å…¬é–‹ã®åŸºç¤çš„ãªéƒ¨åˆ†ã¯ã€å®Œäº†ã—ã¾ã—ãŸã€‚
ã‚ã¨ã¯æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ãã ã‘ã§ã™ã€‚




## ä»–ã®ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆ

Vercelã®ç„¡æ–™æ ã§è¶³ã‚Šãªã„æ™‚ã«
Cloudflare Workers



----------------------------------------

# Supabaseã®è¨­å®š(ãƒ­ãƒ¼ã‚«ãƒ«)

## Supabase CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Supabase CLI | Supabase Docs

https://supabase.com/docs/guides/cli/getting-started?queryGroups=platform&platform=windows

```terminal
# install
scoop bucket add supabase https://github.com/supabase/scoop-bucket.git
scoop install supabase

# update
scoop update supabase

```



## Supabaseã®ã‚³ãƒãƒ³ãƒ‰

terminalä¸Šã§ç›´æ¥ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã¾ã™ã€‚

```terminal
supabase start
supabase stop
supabase status
supabase reset
supabase link
supabase projects list

supabase gen types typescript --local > types/types_db.ts

supabase db diff
supabase migration new
supabase migration list

supabase db dump --data-only -f supabase/seed.sql

supabase push
supabase pull

```




## ãƒ­ãƒ¼ã‚«ãƒ«ã®Supabase

```terminal
supabase init

```

# DBã‚’Supabaseç”¨ã«å¤‰æ›´

SAASã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ Next.js 15 shadcn/ui Postgres Drizzle Stripe ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ ğŸ‘ˆSupabaseã«å¤‰æ›´ #stripe - Qiita
https://qiita.com/masakinihirota/items/f3a8251dd86c10ecbe75

ğŸ‘†ã“ã®è¨˜äº‹ã‚’å‚è€ƒã«è¨­å®šã—ã¾ã™ã€‚



## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« èµ·å‹•ç¢ºèª


```terminal
supabase start
supabase status
pnpm run dev

```

.envãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

```.env
# Drizzleã®ç’°å¢ƒå¤‰æ•°
# ãƒ­ãƒ¼ã‚«ãƒ«ã®Supabaseã¸ã®æ¥ç¶šç”¨
POSTGRES_URL=postgresql://postgres:postgres@127.0.0.1:54322/postgres

# Stripeç”¨ç’°å¢ƒå¤‰æ•°
STRIPE_SECRET_KEY="sk_test_*****"
STRIPE_WEBHOOK_SECRET="whsec_*****"
BASE_URL=http://localhost:3000
AUTH_SECRET="*****"

```



## Tips

<details><summary>Tips Supabase</summary>

Supabaseã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‹ã™ã¨é‡ããªã‚Šã™ãã¡ã‚ƒã†å•é¡Œã‚’è§£æ±ºã™ã‚‹ã€Windowså‹¢å‘ã‘ã€‘
https://zenn.dev/masa5714/articles/3b5ea07c15f159


é–‹ç™ºä¸­ã¯ä½¿ã‚ãªã„æ©Ÿèƒ½ã‚’åˆ‡ã£ã¦ãŠãã“ã¨ã§ã€PCãŒè»½ããªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ã€â†“ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã€inbucketï¼ˆãƒ¡ãƒ¼ãƒ«ï¼‰ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
ã®enabledã®é …ç›®ã‚’falseã§åˆ‡ã£ã¦ãŠãã¾ã™ã€‚

è¨­å®šä¾‹

```supabase\config.toml
[realtime]
enabled = false

ãƒ»ãƒ»ãƒ»

[inbucket]
enabled = false

ãƒ»ãƒ»ãƒ»

[storage]
enabled = false

```

</details>





----------------------------------------

# Supabaseã®è¨­å®š(ã‚µãƒ¼ãƒãƒ¼)

ã‚¦ã‚§ãƒ–ä¸Šã§Supabaseã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚

## Vercel ã¨ Supabase ã®é€£æº
Vercel ã®ç”»é¢ã§ã€ Settings > Integrations > Browse Marketplace ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã€‚
Supabase ã‚’æ¤œç´¢ã—é€£æºã‚’è¡Œã„ã¾ã™ã€‚

Supabaseã®ç’°å¢ƒå¤‰æ•°ãŒVercelã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚

ğŸ‘‡ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ç’°å¢ƒå¤‰æ•°ã®ãƒªã‚¹ãƒˆ

```vercel ç’°å¢ƒå¤‰æ•°
POSTGRES_URL
POSTGRES_PRISMA_URL
POSTGRES_URL_NON_POOLING
POSTGRES_USER
POSTGRES_HOST
POSTGRES_PASSWORD
POSTGRES_DATABASE
SUPABASE_SERVICE_ROLE_KEY
SUPABASE_ANON_KEY
SUPABASE_URL
SUPABASE_JWT_SECRET
NEXT_PUBLIC_SUPABASE_ANON_KEY
NEXT_PUBLIC_SUPABASE_URL

```

Stripeã®ç’°å¢ƒå¤‰æ•°ã‚‚è¿½åŠ ã—ã¾ã™ã€‚
Vercelã®Pdoructionã«æˆ»ã‚Š
ä¸Šå´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§ã«ã‚ã‚‹Settingsã‚’é–‹ãã¾ã™ã€‚
Environment Variablesã‚’é–‹ã„ã¦ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```.env
# Stripeç”¨ç’°å¢ƒå¤‰æ•°

## STRIPE_SECRET_KEY=sk_test_***
## STRIPE_WEBHOOK_SECRET=whsec_***
## AUTH_SECRET="*****"

```

.envãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ç’°å¢ƒå¤‰æ•°ã‚’Vercelã«ç™»éŒ²ã—ã¾ã™ã€‚

æ‰‹å…ƒã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä½•ã‹ã—ã‚‰ç·¨é›†ã—ã¦
GitHubã«pushã™ã‚‹ã¨

Vercelã§è‡ªå‹•ã§BuildãŒå§‹ã¾ã‚Šã¾ã™ã€‚
å‹•ã‹ãªã„å ´åˆã¯æ‰‹å‹•ã§è¡Œã„ã¾ã™ã€‚

BuildãŒæˆåŠŸã™ã‚‹ã¨
StatusãŒå³ä¸Šã«ã€Œç·‘ã®â—ã‚¢ã‚¤ã‚³ãƒ³ã€ã¨ReadyãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

ã“ã‚Œã§ã“ã®Webã‚¢ãƒ—ãƒªå…¨ä¸–ç•Œã«å…¬é–‹ã•ã‚Œã¾ã—ãŸã€‚



## ã‚µãƒ¼ãƒãƒ¼ã®èªè¨¼è¨­å®š

Supabaseã«æˆ»ã‚Šã¾ã™ã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã€ŒAuthenticationã€â†’ã€ŒSign In/Upã€ã§
ãƒ¡ãƒ¼ãƒ«
Google
GitHub
æœ‰åŠ¹åŒ–(Enable)ã«ã—ã¾ã™ã€‚

ğŸ‘†å¿…è¦ãªèªè¨¼ã‚’è¨±å¯ã—ã¾ã™ã€‚




----------------------------------------

# Drizzle ORM

Drizzle ORM - PostgreSQL

https://orm.drizzle.team/docs/get-started/supabase-new

ğŸ‘‡ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿

```terminal
pnpm i drizzle-orm postgres dotenv
pnpm i -D drizzle-kit tsx

```

# Drizzleã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ åŸºæœ¬æ“ä½œ

## åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

```terminal
# ç›´æ¥Drizzleã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
npx drizzle-kit generate
npx drizzle-kit push
npx drizzle-kit migrate
npx drizzle-kit pull

# package.json script
pnpm db:generate
pnpm db:migrate
pnpm db:seed
pnpm db:studio

```



â€»`npx drizzle-kit pull` ã¯ `npx drizzle-kit introspect` ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã™ã€‚

# Drizzleã®åŸºæœ¬çš„ãªä½¿ç”¨æ‰‹é †

ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã®ç™»éŒ²å ´æ‰€
lib\db\schema\*.ts
ã“ã“ã«ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

Drizzleã®ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«(*.ts)ã‚’ç·¨é›†ã—ã¾ã™ã€‚
ã“ã®TypeScriptã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰SQLæ–‡ã‚’ç”Ÿæˆã—ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã€‚
ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’pushã§Supabaseã«åæ˜ ã•ã›ã¾ã™ã€‚

å®Ÿéš›ã®æ‰‹é †

ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã®æ–°è¦ä½œæˆã€ç·¨é›†ã—ã¾ã™ã€‚

ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Œæˆã—ãŸã‚‰

```terminal
npx drizzle-kit generate

```

ğŸ‘†ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«(*****.ts)ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«(ç´”æ­£ãªSQLæ–‡)ã‚’ä½œã‚Šã¾ã™ã€‚

ğŸ‘‡ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰Supabaseã«åæ˜ ã•ã›ã‚‹æ–¹æ³•ã€‚
2ç¨®é¡ã‚ã‚Šã¾ã™ã€‚

```terminal
# è¨˜éŒ²ã€å±¥æ­´ãŒæ®‹ã‚‰ãªã„æ–¹æ³•
npx drizzle-kit push

# è¨˜éŒ²ã€å±¥æ­´ãŒæ®‹ã‚‹æ–¹æ³•
npx drizzle-kit migrate

```

ã®ã©ã¡ã‚‰ã‹ã§Supabaseã«åæ˜ ã•ã›ã¾ã™ã€‚

é–‹ç™ºä¸­ã¯ä½•åº¦ã‚‚æ°—è»½ã«å¤‰æ›´ã§ãã‚‹ `push`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚å³åæ˜ ã€‚
æœ¬ç•ªé‹ç”¨ä¸­ã¯å¤‰æ›´è¨˜éŒ²ã‚’ä¿å­˜ã™ã‚‹ `migrate`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã¡ã‚‡ã£ã¨æ™‚é–“ãŒã‹ã‹ã‚‹ã€‚
ã¨ä½¿ã„åˆ†ã‘ã¾ã™ã€‚

* ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°ã—ãä½œã‚‹æ–¹æ³•

```terminal
# Drizzleã®å ´åˆ
npx drizzle-kit generate

# Supabaseã®å ´åˆ
supabase migration new [Name]

```



# drizzle-kit ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

`npx drizzle-kit` ã‚³ãƒãƒ³ãƒ‰ã¯ã€Drizzle ORM ã®ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã§ã™ã€‚ä»¥ä¸‹ã¯å„ã‚³ãƒãƒ³ãƒ‰ã®èª¬æ˜ã§ã™ã€‚

ãƒ˜ãƒ«ãƒ—ã‚³ãƒãƒ³ãƒ‰

`npx drizzle-kit -h`

```terminal
drizzle-kit [command]

#ğŸ‘‡commandãƒªã‚¹ãƒˆ
generate: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
migrate: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
push: ã‚¹ã‚­ãƒ¼ãƒã®å¤‰æ›´ã‚’ç›´æ¥ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«é©ç”¨ã—ã¾ã™ã€‚
studio: Drizzle Studio ã‚’èµ·å‹•ã—ã¾ã™ã€‚
drop: æŒ‡å®šã—ãŸãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¦ã€é€£å‹•ã—ã¦ã„ã‚‹ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚‚æ›´æ–°ã—ã¾ã™ã€‚


check: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚

introspect: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’èª¿æŸ»ã—ã¾ã™ã€‚

up: ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

```



# RLS

	æœªå®Œæˆ

----------------------------------------

ã“ã“ã¾ã§æˆåŠŸ


----------------------------------------

# Webã‚¢ãƒ—ãƒªã®ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿

ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã¯auth.usersãƒ†ãƒ¼ãƒ–ãƒ«ã«ç™»éŒ²ã•ã‚Œã¾ã™ã€‚

ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’Webã‚¢ãƒ—ãƒªå´ã§ã‚‚ä½¿ã„ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€
public.rootAccountã‚’ä½œæˆã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚

auth.usersãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’public.rootAccountãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚



## Drizzleã‚’ä½¿ã£ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ



## Supabaseã®å‹

å‹ã®ä¿å­˜å ´æ‰€ã‚’ä½œæˆã€‚

```terminal
mkdir types

```

## å‹ã®ç”Ÿæˆ

```terminal
#ã‚µãƒ¼ãƒãƒ¼
supabase gen types typescript --project-id [Reference ID] > types/types_db.ts

#ãƒ­ãƒ¼ã‚«ãƒ«
supabase gen types typescript --local --schema public > types/types_db.ts

supabase gen types typescript --local > types/types_db.ts

```

â€»[Reference ID] Supabaseã® Reference ID ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

publicã®å ´åˆ --schema ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯çœç•¥ã§ãã¾ã™ã€‚
`--schema public`

æˆåŠŸã™ã‚‹ã¨å‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚



## Supabaseã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºç¤

Drizzleã§ã®ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰
ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«
ã‚¸ã‚§ãƒãƒ¬ãƒ¼ãƒˆã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦
SQLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

SQLãƒ•ã‚¡ã‚¤ãƒ«ã‚’Supabaseå´ã‹ã‚‰åæ˜ ã•ã›ã‚‹æ–¹æ³•ã¯resetã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
SupabaseãŒç«‹ã¡ä¸ŠãŒã‚‹æ™‚ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚

```terminal
supabase db reset

```

Supabase ã‚µãƒ¼ãƒãƒ¼ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰ã®å¤‰æ›´ãŒã‚ã‚‹å ´åˆã«å–ã‚Šå…¥ã‚Œã¾ã™ã€‚

```terminal
supabase db pull

```

ãƒ­ãƒ¼ã‚«ãƒ«ã®è¨­å®šã‚’ã‚µãƒ¼ãƒãƒ¼ã«åæ˜ ã•ã›ã‚‹ã‚³ãƒãƒ³ãƒ‰

```terminal
supabase db push

```

## ã‚µãƒ¼ãƒãƒ¼ã¨ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å·®ãŒå‡ºãŸã¨ãã®ä¿®æ­£

Supabaseã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
ã‚µãƒ¼ãƒãƒ¼å´ã®é©ç”¨æ–¹æ³•

â†“REMOTEï¼ˆã‚µãƒ¼ãƒãƒ¼ï¼‰å´ã¸ã®é©ç”¨æ–¹æ³•

```terminal
supabase migration repair 20230618024722 --status applied
supabase migration repair 20231017082823 --status applied

```

Supabaseã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
ãƒ­ãƒ¼ã‚«ãƒ«å´ã®å‰Šé™¤æ–¹æ³•
ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¶ˆã™ã ã‘

â†“REMOTEï¼ˆã‚µãƒ¼ãƒãƒ¼ï¼‰å´ã®å‰Šé™¤æ–¹æ³•

```terminal
supabase migration repair 20231017052010 --status reverted
supabase migration repair 20231017082823 --status reverted

```



## Supabaseã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

```terminal
#ã‚¹ã‚­ãƒ¼ãƒã®ã¿
supabase db dump -f supabase/schema.sql

#ãƒ‡ãƒ¼ã‚¿ã®ã¿
supabase db dump -f supabase/seed.sql --data-only

```

ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚






----------------------------------------
----------------------------------------
----------------------------------------

# 

ã“ã“ã¾ã§ã¯ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚’å®Ÿéš›ã«å‹•ã‹ã™ã¾ã§
ã“ã“ã‹ã‚‰ä¸‹ã¯ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«å¤‰ãˆã‚‹

----------------------------------------
----------------------------------------


----------------------------------------

# Stripe

## Stripe CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Stripe CLI ã‚’ä½¿ã£ã¦ã¿ã‚‹ | Stripe ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

https://docs.stripe.com/stripe-cli?locale=ja-JP

```terminal
scoop bucket add stripe https://github.com/stripe/scoop-stripe-cli.git

scoop install stripe

# update
scoop update stripe

```

## Stripeã®ã‚³ãƒãƒ³ãƒ‰

terminalä¸Šã§ç›´æ¥ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã¾ã™ã€‚

ğŸ‘‡ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«ãƒ¡ãƒ¼ãƒ«ç¢ºèªãŒå¿…è¦ã§ã™ã€‚

```terminal
stripe login
stripe listen --forward-to http://127.0.0.1:3000/api/webhooks

```

ğŸ‘‡fixtures/stripe-fixtures.json ã‚’ç·¨é›†ã—ã¦ä¾¡æ ¼è¨­å®šã‚’ã™ã‚‹ã¨åæ˜ ã•ã‚Œã¾ã™ã€‚

```terminal
stripe fixtures fixtures/stripe-fixtures.json

```


## Stripeã®ç’°å¢ƒå¤‰æ•°

æ‰‹å‹•ã§è¨­å®šã—ã¾ã™ã€‚

Stripe ã®ç’°å¢ƒå¤‰æ•°ã‚’Vercelã«è¨­å®šã—ã¾ã™ã€‚

Stripeã®ã‚µã‚¤ãƒˆã§ç’°å¢ƒå¤‰æ•°ã‚’å–å¾—ã—ã¦ãã¾ã™ã€‚

```Environment Variables
STRIPE_SECRET_KEY=sk_test_***
STRIPE_WEBHOOK_SECRET=whsec_***

```

# AUTH_SECRETã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¦å–å¾—ã—ã¾ã™ã€‚

readme.md Step 5 ã®æ‰‹é †ã‚’æ‰‹å‹•ã§ç”Ÿæˆã—ã¾ã™ã€‚

```generateAuthSecret.js
import crypto from "node:crypto";

function generateAuthSecret() {
	console.log("Step 5: Generating AUTH_SECRET...");
	const fx = crypto.randomBytes(32).toString("hex");
	console.log("ğŸš€ ~ generateAuthSecret ~ fx:", fx);
}

generateAuthSecret();

```

ğŸ‘†ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ğŸ‘‡å®Ÿè¡Œã—ã¦å€¤ã‚’å–å¾—ã—ã¾ã™;

```terminal
ts-node generateAuthSecret.js

```

å‡ºåŠ›ã•ã‚ŒãŸå€¤ã‚’

Environment Variables

```.env
AUTH_SECRET=***

```

ğŸ‘†ã«ç™»éŒ²ã—ã¾ã™ã€‚

----------------------------------------

# Stripeã®å‹•ä½œç¢ºèª

## ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ç«‹ã¡ä¸Šã’ å‹•ä½œç¢ºèª

```terminal
npm run dev
supabase start
stripe listen --forward-to=localhost:3000/api/webhooks
pnpm test

```


----------------------------------------

# Stripeã®è¨­å®š ãƒ­ãƒ¼ã‚«ãƒ«å´ï¼ˆVSCodeä¸Šã§ã®ï¼‰Webhookã®è¨­å®š

```terminal
stripe login

Your pairing code *****

https://dashboard.stripe.com/stripecli/*****

```

ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚


URLãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ãã®URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã¾ã™ã€‚
ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚

Stripe CLI ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã™ã‹ï¼Ÿ
ã¨èã‹ã‚Œã‚‹ã®ã§ã€

pairing codeã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã¯ãšãªã®ã§ã€

ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™ã€‚

```ãƒ–ãƒ©ã‚¦ã‚¶
ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã—ãŸ
ã“ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã¦ã€CLI ã«æˆ»ã‚‹ã“ã¨ãŒã§ãã¾

```

ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¾ã™ã€‚


# Stripeè¨­å®šä¾¡æ ¼ã®åæ˜ ã€‚

ã‚µãƒ³ãƒ—ãƒ«ã§
fixtures\stripe-fixtures.json
ãŒäº‹å‰ã«ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚’Stripeã«åæ˜ ã•ã›ã¾ã™ã€‚

â€»ğŸ‘‡ã“ã®æ‰‹ç¶šãã¯é †ç•ªã‚’é©å½“ã«ã‚„ã‚‹ã¨åæ˜ ã•ã‚Œãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

Next.jsã®ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã¦(pnpm run dev)ãŠã„ã¦ã‹ã‚‰ã€‚
Stripeã®APIç›£è¦–(stripe listen)
ä¾¡æ ¼è¨­å®šã®å®Ÿè¡Œ(stripe fixtures)
â€»ã“ã®é †ç•ªã‚’å®ˆã£ã¦ãã ã•ã„ã€‚

å®Ÿè¡Œé †

```terminal
pnpm run dev

```

```ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ãã¨
No subscription pricing plans found. Create them in your Stripe Dashboard.

```

ã¨ã¾ã åæ˜ ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®terminalã§

```terminal
stripe listen --forward-to http://127.0.0.1:3000/api/webhooks

```

ğŸ‘† stripeã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãŠãã¾ã™ã€‚

ã¾ãŸã€åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®terminalã§

```terminal
stripe fixtures fixtures/stripe-fixtures.json

```

ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€stripe-fixtures.jsonã«æ›¸ã„ãŸStripeã®è¨­å®šãŒåæ˜ ã•ã‚Œã¾ã™ã€‚

â€»ã“ã®stripe-fixtures.jsonã¯è¿½è¨˜å‹ã§ã™ã€å¾Œã‹ã‚‰ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã—ã¦ã‚‚ä¾¡æ ¼ãŒæ–°ãŸã«è¿½åŠ ã•ã‚Œã‚‹ã ã‘ã§ã™ã€‚

â†‘ãã‚Œãã‚Œåˆ¥ã®terminalã‚’é–‹ã„ã¦å®Ÿè¡Œã—ã¾ã™ã€‚
ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€
æˆåŠŸã™ã‚Œã°ã€ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã®ãƒ‡ãƒ¢ç”»é¢ã®ã‚ˆã†ã« ã‚µãƒ–ã‚¹ã‚¯ ãƒ—ãƒ©ãƒ³ ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚



## Stripeã®è¨­å®š ãƒ­ãƒ¼ã‚«ãƒ«å´ï¼ˆVSCodeä¸Šã§ã®ï¼‰Webhookã®è¨­å®š

```terminal
stripe login

Your pairing code *****

https://dashboard.stripe.com/stripecli/*****

```

ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚


URLãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ãã®URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã¾ã™ã€‚
ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚

Stripe CLI ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã™ã‹ï¼Ÿ
ã¨èã‹ã‚Œã‚‹ã®ã§ã€

pairing codeã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã¯ãšãªã®ã§ã€

ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™ã€‚

```ãƒ–ãƒ©ã‚¦ã‚¶
ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã—ãŸ
ã“ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã¦ã€CLI ã«æˆ»ã‚‹ã“ã¨ãŒã§ãã¾

```

ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¾ã™ã€‚


# Stripeè¨­å®šä¾¡æ ¼ã®åæ˜ ã€‚

ã‚µãƒ³ãƒ—ãƒ«ã§
fixtures\stripe-fixtures.json
ãŒäº‹å‰ã«ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚’Stripeã«åæ˜ ã•ã›ã¾ã™ã€‚

â€»ğŸ‘‡ã“ã®æ‰‹ç¶šãã¯é †ç•ªã‚’é©å½“ã«ã‚„ã‚‹ã¨åæ˜ ã•ã‚Œãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

Next.jsã®ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã¦(pnpm run dev)ãŠã„ã¦ã‹ã‚‰ã€‚
Stripeã®APIç›£è¦–(stripe listen)
ä¾¡æ ¼è¨­å®šã®å®Ÿè¡Œ(stripe fixtures)
â€»ã“ã®é †ç•ªã‚’å®ˆã£ã¦ãã ã•ã„ã€‚

å®Ÿè¡Œé †

```terminal
pnpm run dev

```

```ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ãã¨
No subscription pricing plans found. Create them in your Stripe Dashboard.

```

ã¨ã¾ã åæ˜ ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®terminalã§

```terminal
stripe listen --forward-to http://127.0.0.1:3000/api/webhooks

```

ğŸ‘† stripeã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãŠãã¾ã™ã€‚

ã¾ãŸã€åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®terminalã§

```terminal
stripe fixtures fixtures/stripe-fixtures.json

```

ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€stripe-fixtures.jsonã«æ›¸ã„ãŸStripeã®è¨­å®šãŒåæ˜ ã•ã‚Œã¾ã™ã€‚

â€»ã“ã®stripe-fixtures.jsonã¯è¿½è¨˜å‹ã§ã™ã€å¾Œã‹ã‚‰ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã—ã¦ã‚‚ä¾¡æ ¼ãŒæ–°ãŸã«è¿½åŠ ã•ã‚Œã‚‹ã ã‘ã§ã™ã€‚

â†‘ãã‚Œãã‚Œåˆ¥ã®terminalã‚’é–‹ã„ã¦å®Ÿè¡Œã—ã¾ã™ã€‚
ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€
æˆåŠŸã™ã‚Œã°ã€ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã®ãƒ‡ãƒ¢ç”»é¢ã®ã‚ˆã†ã« ã‚µãƒ–ã‚¹ã‚¯ ãƒ—ãƒ©ãƒ³ ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚



----------------------------------------

ã“ã“ã¾ã§ã§ã€Next.jsã®ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼
Supabaseã®ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ­ãƒ¼ã‚«ãƒ«ã®é–‹ç™ºç’°å¢ƒ
Vercelã§ã®å…¬é–‹ãŒå‡ºæ¥ã¾ã—ãŸã€‚

Supabaseã®ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ­ãƒ¼ã‚«ãƒ«ã‚’ã‚ã¨ã§Linkã—ã¾ã™ã€‚


----------------------------------------
----------------------------------------
----------------------------------------
----------------------------------------
----------------------------------------

# èªè¨¼ã®è¿½åŠ 

ã‚½ãƒ¼ã‚·ãƒ£ãƒ«èªè¨¼ã®è¿½åŠ ã‚’ã—ã¾ã™ã€‚
Supabaseã®èªè¨¼ã§å®Ÿè£…ã—ã¾ã™ã€‚


## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```terminal
# èªè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
pnpm add @supabase/ssr @supabase/supabase-js
# ã‚¢ã‚¤ã‚³ãƒ³
pnpm add react-icons

```

GitHubèªè¨¼ã¨Googleèªè¨¼ã‚’è¿½åŠ 
ã‚ã¨ã§ä»–ã®ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ã‚‚è¿½åŠ å¯èƒ½ã«ã—ã¾ã™ã€‚

å€™è£œ
Google
GitHub
ãƒ¡ãƒ¼ãƒ«
X Twitter



## Supabaseã®è¨­å®š

### Supabaseã®ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®èªè¨¼ã®è¨­å®š

supabase\config.toml

```config.toml
...
[auth.external.google]
enabled = true
client_id = "env(GOOGLE_CLIENT_ID)"
secret = "env(GOOGLE_SECRET)"
# Overrides the default auth redirectUrl.
redirect_uri = "http://localhost:54321/auth/v1/callback"

[auth.external.github]
enabled = true
client_id = "env(GITHUB_CLIENT_ID)"
secret = "env(GITHUB_SECRET)"
# Overrides the default auth redirectUrl.
redirect_uri = "http://localhost:54321/auth/v1/callback"

```

ğŸ‘†Supabaseã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜ã—ã¾ã™ã€‚


```.env
# GitHub OAuth
GITHUB_CLIENT_ID="*****"
GITHUB_CLIENT_SECRET="*****"

# Google OAuth
GOOGLE_CLIENT_ID="*****"
GOOGLE_SECRET="*****"

```

## Googleèªè¨¼

Googleã®OAuthèªè¨¼æƒ…å ±ã®å–å¾—

Login with Google | Supabase Docs
https://supabase.com/docs/guides/auth/social-login/auth-google

### å‚è€ƒ

è©±é¡Œã®Supabaseã§ã‚µã‚¯ãƒƒã¨Googleèªè¨¼æ©Ÿèƒ½ã‚’ã¤ãã£ã¦ã¿ãŸï¼ #React - Qiita
https://qiita.com/kaho_eng/items/a37ff001ea9eae226183



### ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®Googleèªè¨¼

è¨­å®šç”»é¢(vns-masakinihirota)
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â€“ Google Auth Platform â€“ vns-masakinihirota â€“ Google Cloud ã‚³ãƒ³ã‚½ãƒ¼ãƒ«
https://console.cloud.google.com/auth/clients?project=vns-masakinihirota

åå‰
masakinihirota

æ‰¿èªæ¸ˆã¿ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURI
`http://localhost:54321/auth/v1/callback`
ã‚’è¨­å®šã—ã¾ã™ã€‚



Supabase CLIã§èµ·å‹•ã™ã‚‹ã¨ã€ http://127.0.0.1:54321 ãŒAPIã®URLã¨ãªã‚Šã¾ã™ãŒã€ã“ã‚Œã¯ç½ ã§ã™ã€‚ï¼ˆé–‹ç™ºã‚¢ãƒ—ãƒªå´ã§èªè¨¼ã‚’ã™ã‚‹ã¨localhostã‹ã‚‰127.0.0.1ã«é£›ã°ã•ã‚Œã¦ã—ã¾ã†ã€‚ï¼‰

ã€Supabaseã€‘ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã§OAuthã®å‡¦ç†ã«è‹¦ã—ã‚ã‚‰ã‚ŒãŸã®ã§è§£æ±ºç­–ã®ãƒ¡ãƒ¢æ›¸ãã‚’æ®‹ã—ã¾ã™
https://zenn.dev/masa5714/articles/8922dfb9e0c9ff



```config.toml
[auth]
enabled = true
# The base URL of your website. Used as an allow-list for redirects and for constructing URLs used
# in emails.
# site_url = "http://127.0.0.1:3000"
site_url = "http://localhost:3000"

# A list of *exact* URLs that auth providers are permitted to redirect to post authentication.
# additional_redirect_urls = ["https://127.0.0.1:3000"]
additional_redirect_urls = ["http://localhost:3000"]

```

â€»Supabaseã®å†èµ·å‹•
â€»ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã®å†èµ·å‹•
ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ã€ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¿½åŠ ã—ãŸã‚Šç·¨é›†ã™ã‚‹ã¨ã€å†èµ·å‹•ã—ãŸã»ã†ãŒæ­£å¸¸ã«å‹•ããƒ‘ã‚¿ãƒ¼ãƒ³ãŒå¤šã„ãŸã‚ã€‚



### ã‚µãƒ¼ãƒãƒ¼ã§ã®Googleèªè¨¼





https://console.cloud.google.com/home/dashboard

Supabaseã®èªè¨¼ Googleã«è¨­å®šã—ãŸã‚‰å®Œäº†ã§ã™ã€‚

ğŸ‘‡æœ€ä½é™ã®Googleèªè¨¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é›†ã‚ã¾ã—ãŸ
uithubã¨ã„ã†Webã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã—ã¾ã—ãŸã€‚

```
vns-masakinihirota
â””â”€â”€ app
    â””â”€â”€ (login)
        â””â”€â”€ oauth-google
            â”œâ”€â”€ api
                â””â”€â”€ auth
                â”‚   â””â”€â”€ callback.ts
            â”œâ”€â”€ page.tsx
            â””â”€â”€ supabase-client.ts


```/app/(login)/oauth-google/api/auth/callback.ts:
 1 | import type { NextApiRequest, NextApiResponse } from "next";
 2 | import { supabase } from "../../supabase-client";
 3 | 
 4 | export default async function handler(
 5 |   req: NextApiRequest,
 6 |   res: NextApiResponse,
 7 | ) {
 8 |   const { code } = req.query;
 9 | 
10 |   if (!code) {
11 |     return res.status(400).json({ error: "No code provided" });
12 |   }
13 | 
14 |   // Supabaseã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIã‚’ä½¿ç”¨
15 |   const { error } = await supabase.auth.exchangeCodeForSession(code as string);
16 |   if (error) {
17 |     return res.status(400).json({ error: error.message });
18 |   }
19 |   // èªè¨¼å¾Œã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆ(å®Ÿéš›ã¯oauth-googleãƒšãƒ¼ã‚¸ã®è¨­å®šã«ä¾å­˜ã—ã¦ã„ã‚‹)
20 |   return res.redirect("/");
21 | }
22 | 

```



```/app/(login)/oauth-google/page.tsx:
 1 | "use client";
 2 | 
 3 | import { useState } from "react";
 4 | import { supabase } from "./supabase-client";
 5 | 
 6 | const GoogleOAuthPage = () => {
 7 |   const [isLoading, setIsLoading] = useState(false);
 8 |   const [error, setError] = useState<string | null>(null);
 9 | 
10 |   const handleLogin = async () => {
11 |     setIsLoading(true);
12 |     setError(null);
13 |     const { error } = await supabase.auth.signInWithOAuth({
14 |       provider: "google",
15 |       // èªè¨¼å¾Œã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆ
16 |       options: {
17 |         redirectTo: `http://localhost:3000/`,
18 |       },
19 |     });
20 |     if (error) {
21 |       setError(error.message);
22 |     }
23 |     setIsLoading(false);
24 |   };
25 | 
26 |   return (
27 |     <div className="flex flex-col items-center justify-center min-h-screen bg-gray-100">
28 |       <h1 className="text-2xl font-bold mb-4">Googleã§ãƒ­ã‚°ã‚¤ãƒ³</h1>
29 |       {error && <p className="text-red-500 mb-4">{error}</p>}
30 |       <button
31 |         onClick={handleLogin}
32 |         className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
33 |         disabled={isLoading}
34 |       >
35 |         {isLoading ? "ãƒ­ã‚°ã‚¤ãƒ³ä¸­..." : "Googleã§ãƒ­ã‚°ã‚¤ãƒ³"}
36 |       </button>
37 |     </div>
38 |   );
39 | };
40 | 
41 | export default GoogleOAuthPage;
42 | 

```



```/app/(login)/oauth-google/supabase-client.ts:
1 | import { createClient } from "@supabase/supabase-js";
2 | 
3 | const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;
4 | const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;
5 | 
6 | // Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’åˆæœŸåŒ–
7 | export const supabase = createClient(supabaseUrl, supabaseAnonKey);
8 | 

```



```logout/page.tsx
"use client";

import { supabase } from "@/app/(login)/oauth-google/supabase-client";
import { useState } from "react";

/**
 * ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
 */
const LogoutButton = () => {
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const handleLogout = async () => {
    setIsLoading(true);
    setError(null);

    const { error } = await supabase.auth.signOut();
    if (error) {
      setError(error.message);
    } else {
      // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå¾Œã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆ
      window.location.href = "/";
    }

    setIsLoading(false);
  };

  return (
    <button
      onClick={handleLogout}
      className="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
      disabled={isLoading}
    >
      {isLoading ? "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆä¸­..." : "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ"}
    </button>
  );
};

/**
 * ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒšãƒ¼ã‚¸
 */
const LogoutPage = () => {
  return (
    <div className="flex flex-col items-center justify-center min-h-screen bg-gray-100">
      <h1 className="text-2xl font-bold mb-4">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</h1>
      <p className="mb-4">ä»¥ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¦ãã ã•ã„ã€‚</p>
      <LogoutButton />
    </div>
  );
};

export default LogoutPage;

```

ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®å‹•ä½œç¢ºèª




## GitHubèªè¨¼









----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------
----------------------------------------





----------------------------------------
----------------------------------------
----------------------------------------
----------------------------------------
----------------------------------------

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹é–‹ç™ºãƒ„ãƒ¼ãƒ«

ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã«è¿½åŠ ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

	Biome æ•´å½¢
	husky ãƒã‚§ãƒƒã‚¯
shadcn/ui UIé›† ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
vitest ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º

----------------------------------------

# Biome æ•´å½¢

## CLI

ã¯ã˜ã‚ã‚‹ | Biome
https://biomejs.dev/ja/guides/getting-started/

```terminal
pnpm add --save-dev --save-exact @biomejs/biome
pnpm biome init

```


## è¨­å®š

ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã§ã‚¨ãƒ©ãƒ¼ã€è­¦å‘ŠãŒå‡ºã¦ããŸã‚‚ã®ã‚’offã«è¨­å®šã€‚

```biome.json
{
  "$schema": "https://biomejs.dev/schemas/1.9.4/schema.json",
  "vcs": {
    "enabled": false,
    "clientKind": "git",
    "useIgnoreFile": false
  },
  "files": {
    "ignoreUnknown": false,
    "ignore": []
  },
  "formatter": {
    "enabled": true,
    "formatWithErrors": false,
    "ignore": [],
    "indentStyle": "space"
  },
  "organizeImports": {
    "enabled": true
  },
  "javascript": {
    "formatter": {
      "quoteStyle": "double"
    }
  },
  "json": {
    "parser": { "allowComments": true },
    "formatter": {
      "enabled": true,
      "indentStyle": "space",
      "lineWidth": 80
    }
  },
  "linter": {
    "ignore": [],
    "rules": {
      "recommended": true,
      "suspicious": {
        "noExplicitAny": "off",
        "noArrayIndexKey": "off"
      },
      "style": {
        "noNonNullAssertion": "off",
        "useSelfClosingElements": "off",
        "noUnusedTemplateLiteral": "off",
        "useImportType": "error"
      },
      "a11y": {
        "useButtonType": "off"
      },
      "correctness": {
        "useExhaustiveDependencies": "off",
        "noSwitchDeclarations": "off"
      }
    }
  }
}

```

## ãƒã‚§ãƒƒã‚¯

package.jsonã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è¿½åŠ 
appã¨componentsãƒ•ã‚©ãƒ«ãƒ€ãŒå¯¾è±¡ã®å ´åˆ

```package.json
    "lint": "biome lint --write app components",
    "format": "biome format --write app components",
    "check": "biome check --write app components"

```

### 1ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ä½¿ã„æ–¹

```
pnpm biome check --write <files>

```

### ã¾ã¨ã‚ã¦ãƒã‚§ãƒƒã‚¯ã™ã‚‹ä½¿ã„æ–¹

```terminal
pnpm lint
pnpm format
pnpm check

```

### check ã‚³ãƒãƒ³ãƒ‰

è¤‡æ•°ã®ãƒ„ãƒ¼ãƒ«ã‚’ä¸€åº¦ã«å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚ç¾åœ¨ã¯ä»¥ä¸‹ã®ã“ã¨ã‚’è¡Œã„ã¾ã™ã€‚

ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒ³ãƒˆ
ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®æ•´ç†

## VScodeã®æ‹¡å¼µæ©Ÿèƒ½

ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã‹ã‚‰Biomeã‚’æ¢ã—ã¾ã™ã€‚

```settings.json
"editor.codeActionsOnSave": {
  "quickfix.biome": true,
  "source.organizeImports.biome": true
},
"editor.defaultFormatter": "biomejs.biome",
"[typescript]": {
   "editor.defaultFormatter": "biomejs.biome"
},

```

â€»ğŸ‘†ã®è¨­å®šã®å ´åˆã€è¨€èªã”ã¨ã«è¨­å®šã‚’ã—ã¾ã™ã€‚


<details><summary>Biomeã®ãƒ«ãƒ¼ãƒ«</summary>

https://zenn.dev/ako/articles/b8a686843f6b83

```

"rules": {
      "a11y": {
        "noAriaUnsupportedElements": "error", // ARIAã®å½¹å‰²ã€çŠ¶æ…‹ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚µãƒãƒ¼ãƒˆã—ãªã„è¦ç´ ã«ã¯ã€ã“ã‚Œã‚‰ã®å±æ€§ãŒãªã„ã“ã¨ã‚’å¼·åˆ¶
        "noBlankTarget": "error", // target="_blank"ã‚’ä½¿ã†æ™‚ã€rel=â€œnoreferrerâ€ã‚’å¼·åˆ¶
        "noDistractingElements": "error", // å­˜åœ¨ã—ãªã„è¦ç´ ã§ã‚¨ãƒ©ãƒ¼
        "noNoninteractiveElementToInteractiveRole": "error", // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªARIAãƒ­ãƒ¼ãƒ«ãŒéã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–HTMLè¦ç´ ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œãªã„ã‚ˆã†ã«
        "noPositiveTabindex": "error", // tabIndexã§æ•´æ•°ä½¿ã†ã¨ã‚¨ãƒ©ãƒ¼
        "noRedundantAlt": "error", // æš—é»™çš„ãªãƒ­ãƒ¼ãƒ«ã§ã®roleã®ä½¿ç”¨ã§ã‚¨ãƒ©ãƒ¼
        "useAltText": "error", // altå¿…è¦ãªè¦ç´ ã§å¼·åˆ¶
        "useAriaPropsForRole": "error", // ARIAãƒ­ãƒ¼ãƒ«ã§å¿…é ˆã®ARIAå±æ€§ã‚’å¼·åˆ¶
        "useHtmlLang": "error", // HTMLã®langã‚’ä½¿ã†
        "useIframeTitle": "error", // iframeã§titleã‚’å¼·åˆ¶
        "useMediaCaption": "error", // audio, videoè¦ç´ ã§ã€trackè¦ç´ ã‚’å¼·åˆ¶
        "useValidAnchor": "error", // ã™ã¹ã¦ã®ã‚¢ãƒ³ã‚«ãƒ¼ãŒæœ‰åŠ¹ã§ã‚ã‚‹
        "useValidAriaProps": "error", // æ­£ã—ã„aria-*ã‚’ä½¿ã†
        "useValidAriaValues": "error", // æ­£ã—ã„ARIAã‚’ä½¿ã†
        "useValidLang": "error" // langå±æ€§ã§æ­£ã—ã„è¨€èªãƒ»å›½ã‚’ä½¿ã†
      },
      "complexity": {
        "noBannedTypes": "warn", // èª¤è§£ã‚’æ‹›ãå‹ã§ã‚¨ãƒ©ãƒ¼
        "noExtraBooleanCast": "error", // ç„¡é§„ãªBooleanã§ã‚¨ãƒ©ãƒ¼
        "noForEach": "warn", // forEachã§ã‚¨ãƒ©ãƒ¼ã€‚for ofã‚’ä½¿ã†
        "noMultipleSpacesInRegularExpressionLiterals": "error", // æ­£è¦è¡¨ç¾ã®é€£ç¶šã‚¹ãƒšãƒ¼ã‚¹ã§ã‚¨ãƒ©ãƒ¼
        "noStaticOnlyClass": "error", // staticã ã‘ã®classã§ã‚¨ãƒ©ãƒ¼
        "noUselessConstructor": "error", // ç„¡é§„ãªconstructorã§ã‚¨ãƒ©ãƒ¼
        "noUselessRename": "error", // ç„¡é§„ãª as ã§ã‚¨ãƒ©ãƒ¼
        "noUselessSwitchCase": "error", // ç„¡é§„ãªswitchã®caseã§ã‚¨ãƒ©ãƒ¼
        "useLiteralKeys": "error", // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã€ a[b]ã§ã¯ãªãã€a.bã‚’ä½¿ã†
        "useOptionalChain": "error", // ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒã‚§ãƒ¼ãƒ³ã‚’ä½¿ã†ã‚ˆã†ã«ã™ã‚‹
        "useSimplifiedLogicExpression": "error" // ç„¡é§„ãªè«–ç†å¼ã§ã‚¨ãƒ©ãƒ¼å‡ºã™ ä¾‹ï¼‰ const bool =  true || foo
      },
      "correctness": {
        "noChildrenProp": "error", // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®childrenã‚’Propsã§æ¸¡ã™ã¨ã‚¨ãƒ©ãƒ¼
        "noConstAssign": "error", // constã‚’å†ä»£å…¥ã§ã‚¨ãƒ©ãƒ¼
        "noConstantCondition": "error", // æ¡ä»¶å¼ã®ä¸­èº«ãŒå®šæ•°ã§ã‚¨ãƒ©ãƒ¼ï¼ˆç¢ºå®šã™ã‚‹ã‹ã‚‰ï¼‰
        "noEmptyPattern": "error", // ç©ºã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¦æ­¢ const {} = a, const {a: {}} = foo
        "noPrecisionLoss": "error", // æ¡æ•°ã®å¤šã™ãã‚‹æ•°å­—ã§ã‚¨ãƒ©ãƒ¼ï¼ˆåˆ¶åº¦ãŒè½ã¡ã‚‹ï¼‰
        "noRenderReturnValue": "error", // ReactDOM.renderã®ä»£å…¥ã‚’è¨±å¯ã—ãªã„ const foo = ReactDOM.render()
        "noSelfAssign": "error", // a = aã‚’è¨±å¯ã—ãªã„
        "noSetterReturn": "error", // classã®setãƒ¡ã‚½ãƒƒãƒ‰ãŒå€¤ã‚’ç›´æ¥è¿”ã™ã®ã‚’ç¦æ­¢
        "noStringCaseMismatch": "error", // é•ã†æ–‡å­—ã®Caseã¨ã®æ¯”è¼ƒã§ã‚¨ãƒ©ãƒ¼ ä¾‹ï¼‰toUpperCaseã—ãŸæ–‡å­—ã¨ã€ãã†ã§ãªã„æ–‡å­—ã¨ã®æ¯”è¼ƒ
        "noUnnecessaryContinue": "error", // ãƒ«ãƒ¼ãƒ—æ–‡ã®æœ€åˆã§continueã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noUnreachable": "error", // åˆ°é”ä¸å¯èƒ½ãªã‚³ãƒ¼ãƒ‰ã§ã‚¨ãƒ©ãƒ¼
        "noInvalidConstructorSuper": "error", // extendsã—ã¦ãŸã‚‰constructorã§superã‚’å¼·åˆ¶
        "noUnsafeOptionalChaining": "error", // å®‰å…¨ã§ãªã„ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒã‚§ãƒ¼ãƒ³ã§ã‚¨ãƒ©ãƒ¼
        "noUnusedVariables": "warn", // æœªä½¿ç”¨ã®å¤‰æ•°ã§ã‚¨ãƒ©ãƒ¼
        "noVoidElementsWithChildren": "error", // childrenã®ç„¡ã„è¦ç´ ã«å…¥ã‚Œã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noVoidTypeReturn": "error", // è¿”ã‚Šå€¤ãŒvoidå‹ã®é–¢æ•°ãŒã€returnã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "useIsNan": "error", // NaNã‚’æ¯”è¼ƒã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "useValidForDirection": "error" // forãƒ«ãƒ¼ãƒ—ã§ã€çµ‚äº†ã—ãªã„æ¡ä»¶ã ã¨ã‚¨ãƒ©ãƒ¼
      },
      "performance": {
        "noDelete": "error" // deleteæ¼”ç®—å­ä½¿ã†ã¨ã‚¨ãƒ©ãƒ¼
      },
      "security": {
        "noDangerouslySetInnerHtml": "warn" // dangerouslySetInnerHTMLç¦æ­¢
      },
      "style": {
        "noArguments": "error", // å®šç¾©ã—ã¦ãªã„å¤‰æ•°ä½¿ã†ã¨ã‚¨ãƒ©ãƒ¼
        "noNegationElse": "warn", // æ¡ä»¶ã§!fooã®ã‚ˆã†ã«æ›¸ã„ã¦elseãŒã‚ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noNonNullAssertion": "warn", // foo!.varã®æ›¸ãæ–¹ã§ã‚¨ãƒ©ãƒ¼
        "noParameterAssign": "error", // é–¢æ•°ã®å¼•æ•°ã‚’é–¢æ•°å†…ã§æ›´æ–°ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noUnusedTemplateLiteral": "error", // æ™®é€šã®æ–‡å­—åˆ—ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—ä½¿ã†ã¨ã‚¨ãƒ©ãƒ¼
        "noVar": "error", // varä½¿ã†ã¨ã‚¨ãƒ©ãƒ¼
        "useConst": "error", // letã§å†ä»£å…¥ã•ã‚Œãªã„ãŠå¤‰æ•°ã¯ã‚¨ãƒ©ãƒ¼ã€constã«ã™ã‚‹
        "useExponentiationOperator": "error", // éšä¹—ã§Math.powä½¿ã†ã¨ã‚¨ãƒ©ãƒ¼ã€**ã«ç½®æ›
        "useNamingConvention": "off", // snakeCaseã§ã‚¨ãƒ©ãƒ¼ã€optionã§å¤‰ãˆã‚‰ã‚Œã‚‹
        "useSelfClosingElements": "error", // <div></div>ã®ã‚ˆã†ã«å­ä¾›ã®ç„¡ã„è¦ç´ ã§ã‚¨ãƒ©ãƒ¼ã€<div/>ã«ç½®æ›
        "useShorthandArrayType": "error", // å‹ã§Arrayä½¿ã†ã¨ã‚¨ãƒ©ãƒ¼ã€[]ã«ç½®æ›
        "useTemplate": "error" // æ–‡å­—ã®è¶³ã—ç®—ã¯å…¨ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—ã«ã™ã‚‹
      },
      "suspicious": {
        "noArrayIndexKey": "error", // JSXã®mapã§keyã«indexã‚’æ¸¡ã™ã¨ã‚¨ãƒ©ãƒ¼
        "noAssignInExpressions": "error", // æ¡ä»¶å¼ã«ä¸­ã§å†ä»£å…¥ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noAsyncPromiseExecutor": "error", // new Promise()ã®ä¸­ã§asyncé–¢æ•°ä½¿ç”¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noCatchAssign": "error", // catch(e)ã®eã«å†ä»£å…¥ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noClassAssign": "error", // classã«å†ä»£å…¥ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noCommentText": "error", // JSXå†…ã®æ­£ã—ããªã„ã‚³ãƒ¡ãƒ³ãƒˆã§ã‚¨ãƒ©ãƒ¼ <div>// a</div> => <div>{/* a */}</div>
        "noCompareNegZero": "error", // -0ã¨æ¯”è¼ƒã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noConsoleLog": "warn", // console.logã§ã‚¨ãƒ©ãƒ¼
        "noDoubleEquals": "error", // æ¯”è¼ƒã§==ã‚’ç¦æ­¢ã€===ã«ã™ã‚‹
        "noDuplicateCase": "error", // switchã®é‡è¤‡ã™ã‚‹caseã§ã‚¨ãƒ©ãƒ¼
        "noDuplicateClassMembers": "error", // classã®é‡è¤‡ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¨ãƒ©ãƒ¼
        "noDuplicateJsxProps": "error", // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é‡è¤‡ã™ã‚‹Propsã§ã‚¨ãƒ©ãƒ¼
        "noDuplicateObjectKeys": "error", // é‡è¤‡ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®keyã§ã‚¨ãƒ©ãƒ¼
        "noDuplicateParameters": "error", // é–¢æ•°ã®é‡è¤‡ã™ã‚‹paramsã§ã‚¨ãƒ©ãƒ¼
        "noEmptyInterface": "error", // ç©ºã®interfaceã®å®šç¾©ã§ã‚¨ãƒ©ãƒ¼
        "noExplicitAny": "warn", // anyã®ä»•æ§˜ã‚’ç¦æ­¢
        "noExtraNonNullAssertion": "error", // é–“é•ã£ãŸénullã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚¨ãƒ©ãƒ¼
        "noFunctionAssign": "error", // functionã®å†ä»£å…¥ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noImportAssign": "error", // importã§ä½¿ã†å€¤ã‚’å†ä»£å…¥ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noPrototypeBuiltins": "error", // ã‚¨ãƒ©ãƒ¼ã®æã‚Œã®ã‚ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã‚¨ãƒ©ãƒ¼ ä¾‹ propertyIsEnumerable, isPrototypeOf
        "noRedeclare": "error", // åŒã˜åå‰ã®å®£è¨€ã§ã‚¨ãƒ©ãƒ¼
        "noRedundantUseStrict": "error", // use strictãŒåŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã§é‡è¤‡ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noSelfCompare": "error", // åŒã˜å€¤ã®æ¯”è¼ƒã§ã‚¨ãƒ©ãƒ¼
        "noShadowRestrictedNames": "error", // äºˆç´„èªã§å‘½åã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "noUnsafeDeclarationMerging": "error", // åŒã˜åå‰ã®classã¨interfaceã‚’å®šç¾©ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼
        "useDefaultSwitchClauseLast": "error", // switchã§defaultãŒæœ€å¾Œã§ãªã„ã¨ã‚¨ãƒ©ãƒ¼
        "useGetterReturn": "error", // classã®getãƒ¡ã‚½ãƒƒãƒ‰ã§returnã‚’ã—ãªã„ã¨ã‚¨ãƒ©ãƒ¼
        "useValidTypeof": "error" // typeofã§æ¯”è¼ƒã™ã‚‹å€¤ãŒæ­£ã—ããªã„ã¨ã‚¨ãƒ©ãƒ¼
      },
      "nursery": {
        "noDuplicateJsonKeys": "error", // JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§åŒã˜keyä½¿ã†ã¨ã‚¨ãƒ©ãƒ¼
        "noEmptyCharacterClassInRegex": "error", // æ­£è¦åŒ–ã®[]ã®ä¸­ãŒç©ºã ã¨ã‚¨ãƒ©ãƒ¼
        "noExcessiveComplexity": "warn", // è¤‡é›‘ãªã‚³ãƒ¼ãƒ‰æ›¸ãã¨ã‚¨ãƒ©ãƒ¼(éšå±¤ãŒæ·±ããªã‚‹)
        "noGlobalIsFinite": "error", // isFiniteã§ã¯ç„¡ãã€Number.isFiniteã‚’ä½¿ã†
        "noGlobalIsNan": "error", // isNaNã§ã¯ç„¡ãã€Number.isNaNã‚’ä½¿ã†
        "noUselessElse": "warn", // ç„¡é§„ãªelseã¯æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³ã«ã™ã‚‹
        "useArrowFunction": "warn", // ã‚¢ãƒ­ãƒ¼é–¢æ•°ã‚’å¼·åˆ¶
        "useCollapsedElseIf": "warn", // elseã®ä¸­ã®ç„¡é§„ãªæ¡ä»¶ã‚’else ifã«å¼·åˆ¶ã™ã‚‹
        "useExhaustiveDependencies": "warn", // useEffectç­‰ã®Hooksã®ä¾å­˜é…åˆ—ãŒæ­£ã—ããªã„ã¨ã‚¨ãƒ©ãƒ¼
        "useGroupedTypeImport": "error", // import {type A, type B}ã‚’ã€import type {A, B}ã«å¼·åˆ¶
        "useHookAtTopLevel": "error", // Hooksã¯Topãƒ¬ãƒ™ãƒ«ã§ä½¿ã‚ãªã„ã¨ã‚¨ãƒ©ãƒ¼
        "useIsArray": "error", // instanceof Arrayã§ã¯ãªãã€Array.isArray()ã‚’å¼·åˆ¶
        "useShorthandAssign": "error" // çŸ­ã„æ›¸ãæ–¹ã‚’å¼·åˆ¶ a = a + 1 => a += 1
      }
    }
  }

```

</details>


----------------------------------------

huskyã®


# husky ãƒã‚§ãƒƒã‚¯

## husky ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```terminal
pnpm i -D husky
npx husky init

touch .husky/pre-commit
touch .husky/pre-push

```

## ã‚³ãƒŸãƒƒãƒˆæ™‚ã®è‡ªå‹•å®Ÿè¡Œ

gitã®ã‚³ãƒŸãƒƒãƒˆã®å‰ã« ***** ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```.husky/pre-commit
pnpm check

```

## ãƒ—ãƒƒã‚·ãƒ¥æ™‚ã®è‡ªå‹•å®Ÿè¡Œ

githubã¸ã®pushã®å‰ã«buildã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```.husky/pre-push
pnpm run build

```

ã“ã‚Œã§ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹ã¨ãƒ“ãƒ«ãƒ‰ãŒé€šã‚‰ãšã€pushã§ããªããªã‚Šã¾ã™ã€‚

pre-commitæ©Ÿèƒ½ã§gitã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹å‰ã«lintãƒã‚§ãƒƒã‚¯ç­‰ã‚’ã—ã¾ã™ã€‚
pre-pushæ©Ÿèƒ½ã§githubã«pushã™ã‚‹å‰ã«ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚


----------------------------------------

# Hono

Hono - Web framework built on Web Standards
https://hono.dev/docs/

Honoã‚’Next.jsã§åˆ©ç”¨ã™ã‚‹ãŸã‚èª¿ã¹ãŸãƒ¡ãƒ¢(+Supabase) #Drizzle - Qiita
https://qiita.com/masakinihirota/items/a6b8e438a76543819f27

ä»Šãƒ›ãƒƒãƒˆãªHonoã‚’ä½¿ã£ã¦Next.jsã®Route Handlersã‚’ãƒã‚¤ã‚¸ãƒ£ãƒƒã‚¯ã™ã‚‹
https://zenn.dev/chot/articles/e109287414eb8c


optional Catch-all Segment ã‚’ä½¿ã£ã¦ API ãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```terminal
pnpm add hono

```

ğŸ‘†honoã‚’è¿½åŠ ã™ã‚‹ã ã‘






ã‚µãƒ³ãƒ—ãƒ«

app\api\[...route]\route.ts

```route.ts
import { Hono } from 'hono'
import { handle } from 'hono/vercel'

export const runtime = 'edge'

const app = new Hono().basePath('/api')

app.get('/hello', (c) => {
  return c.json({
    message: 'Hello from Hono!'
  })
})

export const GET = handle(app)

```



app\(dashboard)\hono\page.tsx

```page.tsx
'use client'
import { useEffect, useState } from 'react'

export default function Home() {
  const [message, setMessage] = useState()

  useEffect(() => {
    const fetchData = async () => {
      const res = await fetch('/api/hello')
      const { message } = await res.json()
      setMessage(message)
    }
    fetchData()
  }, [])

  if (!message) return <p>Loading...</p>

  return <p>{message}</p>
}

```

ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã•ã›ã¦
http://localhost:3000/hono
ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚
HonoãŒå‹•ä½œã—ã¦ã„ã¾ã™ã€‚




----------------------------------------


















----------------------------------------
----------------------------------------
----------------------------------------
----------------------------------------
----------------------------------------

# ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã®åŸºæœ¬

ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ¥ã€…ã«ç®¡ç†ã™ã‚‹

ãƒ•ã‚§ãƒƒãƒã¯ã©ã£ã¡ã«ã™ã‚‹ã‹ãã®æ™‚è€ƒãˆã‚‹ã€‚

Next.js App routerã§ã® ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ¥ã€…ã«ç®¡ç† #AppRouter - Qiita
https://qiita.com/masakinihirota/items/2695cba68816794e33d3



----------------------------------------

# å…±é€šã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

app\(dashboard)\layout.tsx

## ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã‚¢ãƒ—ãƒªã®ä½œã‚‹æ©Ÿèƒ½ã®ãƒœã‚¿ãƒ³ã‚’ä¸¦ã¹ã‚‹

ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
è¨€èª
åºƒå‘Š
Pricing
Account






## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------
----------------------------------------





----------------------------------------
----------------------------------------

ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼å€™è£œ

## å¤šè¨€èªå¯¾å¿œ

weijunext/nextjs-15-starter
https://github.com/weijunext/nextjs-15-starter/tree/main
## GitHubèªè¨¼

PaddleHQ/paddle-nextjs-starter-kit
https://github.com/PaddleHQ/paddle-nextjs-starter-kit

Paddle Billing Subscription Starter
https://vercel.com/templates/next.js/paddle-billing-subscription-starter

## GitHubèªè¨¼ Stripe

dzlau/stripe-supabase-saas-template
https://github.com/dzlau/stripe-supabase-saas-template

Next.js SaaS Starter
https://vercel.com/templates/next.js/next-js-saas-starter-1

- ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—/ã‚µã‚¤ãƒ³ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¿˜ã‚Œ/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆã®å®Œå…¨ãªãƒ•ãƒ­ãƒ¼
- Googleã¨Githubã‚’ä½¿ç”¨ã—ãŸOAuth
- Stripeã®æ–™é‡‘è¡¨ã¨Stripe Checkoutã‚’åˆ©ç”¨ã—ãŸé¡§å®¢èª²é‡‘è¨­å®š
- Stripe Customer Portalã¨ã®çµ±åˆã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèª²é‡‘è¨­å®šã‚’ç®¡ç†å¯èƒ½
- /dashboardä»¥ä¸‹ã®ä¿è­·ã•ã‚ŒãŸãƒ«ãƒ¼ãƒˆ
- Drizzle ORM/Postgresã®çµ±åˆ
- Tailwind CSS/shadcnã®åˆ©ç”¨
- Stripe Webhooks/APIãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦é¡§å®¢ã®ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³ã‚’å–å¾—
















----------------------------------------

# ncuã®å°å…¥ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

ncuã¯ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’èª¿ã¹ã‚‹ï¼†æ›´æ–°ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®vulnerabilityå¯¾å¿œãƒ•ãƒ­ãƒ¼ - Qiita
https://qiita.com/riversun/items/7f1679509f38b1ae8adb

```terminal
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæœ€æ–°ã‹ç¢ºèªã—ã¾ã™ã€‚
pnpm outdated

# å…¨ã¦æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã„å ´åˆã¯
ncu -u

```


## ãƒ¡ã‚¸ãƒ£ãƒ¼ã‹ãƒã‚¤ãƒŠãƒ¼ã‹ã€ã©ã“ã¾ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹ã®ã‹ã‚’é¸ã¶

### ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¾ã§æœ€æ–°ã«ã—ãŸã„å ´åˆ

```terminal
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i -g npm-check-updates

# å…¨ã¦æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã„å ´åˆã¯
ncu -u

# ã¨ã—ã¦ã‹ã‚‰ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦
pnpm install

```

### ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¾ã§æœ€æ–°ã«ã™ã‚‹å ´åˆ

```terminal
pnpm update

```

## ã‚‚ã†ä¸€åº¦ç¢ºèªã™ã‚‹

```terminal
pnpm outdated

# ç¢ºèªã—ã¦ã“ã‚Œã§è‰¯ã„ã®ãªã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã™ã‚‹ã€‚
npm install --legacy-peer-deps
pnpm install --legacy-peer-deps

```


