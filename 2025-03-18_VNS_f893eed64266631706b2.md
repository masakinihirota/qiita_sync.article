<!--
title:   masakinihirota-template
tags:    VNS
id:      f893eed64266631706b2
private: true
-->
VNS
masakinihirotaのテンプレートの作成


スターター

Next.js 15を利用
Supabaseのサーバーと接続
Vercelに接続
Stripeは後回し




----------------------------------------

# スターター

nextjs/saas-starter: Get started quickly with Next.js, Postgres, Stripe, and shadcn/ui.
https://github.com/nextjs/saas-starter

スターターをインストール後、自分の使うツールを組み込んでテンプレートを作ります。

# リポジトリ

masakinihirota/vns-masakinihirota: vns-masakinihirota
https://github.com/masakinihirota/vns-masakinihirota



## todo

### アプリ
Supabase用に変更
サーバーのSupabaseと接続
githubにリポジトリ
Vercelにデプロイ

ローカルにSupabaseを立てる
開発はローカルのSupabase使用
運用はサーバーのSupabase使用
バックアップを取る
リストア計画を取る

### ドキュメント

vitepress



##





----------------------------------------

# DBをSupabase用に変更

SAASスターター Next.js 15 shadcn/ui Postgres Drizzle Stripe テンプレート 👈️Supabaseに変更 #stripe - Qiita
https://qiita.com/masakinihirota/items/f3a8251dd86c10ecbe75

👆この記事通りの設定します。

## インストール

```
pnpm install
supabase init
supabase start
supabase status

```

.envファイルの作成



## 起動確認

pnpm run dev

http://localhost:3000/

## GitHub

GitHubへのプッシュ

----------------------------------------

# Vercel

## VercelでGitHubと連携

Vercelのアカウントを作って、GitHubのリポジトリと接続します。

## 環境変数の設定

### Supabaseの環境変数

Supabase for Vercel
https://vercel.com/marketplace/supabase

👆VercelのマーケットプレイスにSupabaseがあるので
インストールすると
Supabaseのプロジェクトと繋がり、
環境変数の設定を自動でしてくれます。

```enviromnents
POSTGRES_URL
POSTGRES_PRISMA_URL
POSTGRES_URL_NON_POOLING
POSTGRES_USER
POSTGRES_HOST
POSTGRES_PASSWORD
POSTGRES_DATABASE
SUPABASE_SERVICE_ROLE_KEY
SUPABASE_ANON_KEY
SUPABASE_URL
SUPABASE_JWT_SECRET
NEXT_PUBLIC_SUPABASE_ANON_KEY
NEXT_PUBLIC_SUPABASE_URL

```



## Stripe

手動で設定します。

Stripe の環境変数をVercelに設定します。

Stripeのサイトで環境変数を取得してきます。

```Environment Variables
STRIPE_SECRET_KEY=sk_test_***
STRIPE_WEBHOOK_SECRET=whsec_***

```

STRIPE_SECRET_KEY

sk_test_51Oo9cWAN9U18k68cBjroyntAzn7kzhSCp0CMvFUOOUWpJUysCFelbef2Kmfg4TpjAOYqqe0ig62j2rbUgRglEUQd00ZI7LqOBR

# AUTH_SECRETはスクリプトファイルを実行して取得します。

readme.md Step 5 の手順を手動で生成します。

```generateAuthSecret.js
import crypto from "node:crypto";

function generateAuthSecret() {
	console.log("Step 5: Generating AUTH_SECRET...");
	const fx = crypto.randomBytes(32).toString("hex");
	console.log("🚀 ~ generateAuthSecret ~ fx:", fx);
}

generateAuthSecret();

```


```Environment Variables
AUTH_SECRET=***

```

## Vercelでのビルド

コードとその環境変数がきちんと設定されていると
ビルドが通ります。

これでコードとDBと公開の基礎的な部分は、完了しました。
あとは機能を追加していくだけです。



----------------------------------------

# 

スターターの過去の記事を参照



## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------
----------------------------------------


