<!--
title:   masakinihirota-template
tags:    VNS
id:      f893eed64266631706b2
private: true
-->

```terminal
npm run dev
pnpm run storybook
supabase start

```



VNS
masakinihirotaã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ


ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼

Next.js 15ã‚’åˆ©ç”¨
Supabaseã®ã‚µãƒ¼ãƒãƒ¼ã¨æ¥ç¶š
Vercelã«æ¥ç¶š
Stripeã¯å¾Œå›ã—

----------------------------------------

# URL

## ãƒ­ãƒ¼ã‚«ãƒ«

Next.jsã‚¢ãƒ—ãƒª
http://localhost:3000

Storybook
http://localhost:6006/

ãƒ­ãƒ¼ã‚«ãƒ«ã® Supabase
http://127.0.0.1:54323/project/default



## ã‚µãƒ¼ãƒãƒ¼

Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
Dashboard | Supabase
https://supabase.com/dashboard/projects

Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
https://vercel.com/dashboard

å…¬é–‹ã‚µã‚¤ãƒˆ
Next.js and Supabase Starter Kit
https://vns-masakinihirota.vercel.app/



----------------------------------------

# ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼

nextjs/saas-starter: Get started quickly with Next.js, Postgres, Stripe, and shadcn/ui.
https://github.com/nextjs/saas-starter

ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€è‡ªåˆ†ã®ä½¿ã†ãƒ„ãƒ¼ãƒ«ã‚’çµ„ã¿è¾¼ã‚“ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚

# ãƒªãƒã‚¸ãƒˆãƒª

masakinihirota/vns-masakinihirota: vns-masakinihirota
https://github.com/masakinihirota/vns-masakinihirota

cloneã§å–å¾—ã—ã¦ãªã‹ã£ãŸã®ã§ã€å…ƒã®ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒã‚ã£ãŸã‚‰æ‰‹å‹•ã§ç¢ºèªã™ã‚‹ã€‚

## todo

### ã‚¢ãƒ—ãƒª
Supabaseç”¨ã«å¤‰æ›´
ã‚µãƒ¼ãƒãƒ¼ã®Supabaseã¨æ¥ç¶š
githubã«ãƒªãƒã‚¸ãƒˆãƒª
Vercelã«ãƒ‡ãƒ—ãƒ­ã‚¤

ãƒ­ãƒ¼ã‚«ãƒ«ã«Supabaseã‚’ç«‹ã¦ã‚‹
é–‹ç™ºã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®Supabaseä½¿ç”¨
é‹ç”¨ã¯ã‚µãƒ¼ãƒãƒ¼ã®Supabaseä½¿ç”¨
ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã‚‹
ãƒªã‚¹ãƒˆã‚¢è¨ˆç”»ã‚’å–ã‚‹

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

vitepress



----------------------------------------

# DBã‚’Supabaseç”¨ã«å¤‰æ›´

SAASã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ Next.js 15 shadcn/ui Postgres Drizzle Stripe ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ ğŸ‘ˆï¸Supabaseã«å¤‰æ›´ #stripe - Qiita
https://qiita.com/masakinihirota/items/f3a8251dd86c10ecbe75

ğŸ‘†ã“ã®è¨˜äº‹é€šã‚Šã®è¨­å®šã—ã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```
pnpm install
supabase init
supabase start
supabase status

```

.envãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ



## èµ·å‹•ç¢ºèª

pnpm run dev

http://localhost:3000/

## GitHub

GitHubã¸ã®ãƒ—ãƒƒã‚·ãƒ¥


----------------------------------------

# CLI

## package.jsonã®script

â€» package.jsonã®scriptã‚’è‡ªåˆ†ãªã‚Šã«ä½¿ã„ã‚„ã™ã„ã‚ˆã†ã«æ•´ç†ã—ã¾ã™ã€‚

å„CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã®ã§ã€ç›´æ¥å®Ÿè¡Œã™ã‚‹ã®ã§ã€ä¸è¦ãªscriptã‚’å‰Šé™¤ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚


### CLI

supabase
Stripe
Vercel

#### CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

scoopã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

â€»VSCodeã®powershellã¯scoopãŒæœ€åˆã‹ã‚‰ä½¿ãˆã‚‹ã¯ãšã§ã™ã€‚


##### Supabase CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Supabase CLI | Supabase Docs

https://supabase.com/docs/guides/cli/getting-started?queryGroups=platform&platform=windows

```terminal
# install
scoop bucket add supabase https://github.com/supabase/scoop-bucket.git
scoop install supabase

# update
scoop update supabase

```



##### Stripe CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Stripe CLI ã‚’ä½¿ã£ã¦ã¿ã‚‹ | Stripe ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

https://docs.stripe.com/stripe-cli?locale=ja-JP

```terminal
scoop bucket add stripe https://github.com/stripe/scoop-stripe-cli.git

scoop install stripe

# update
scoop update stripe

```



##### Vercel CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Vercel CLI Overview

https://vercel.com/docs/cli

```terminal
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm i -g vercel
vercel --version

```

## Stripeã®ã‚³ãƒãƒ³ãƒ‰

terminalä¸Šã§ç›´æ¥ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã¾ã™ã€‚

```terminal
stripe login
stripe listen --forward-to http://127.0.0.1:3000/api/webhooks
stripe fixtures fixtures/stripe-fixtures.json

```

ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«ãƒ¡ãƒ¼ãƒ«ç¢ºèªãŒå¿…è¦
fixtures/stripe-fixtures.json ã‚’ç·¨é›†ã—ã¦ä¾¡æ ¼è¨­å®šã‚’ã™ã‚‹ã¨åæ˜ ã•ã‚Œã¾ã™ã€‚



## Supabaseã®ã‚³ãƒãƒ³ãƒ‰

terminalä¸Šã§ç›´æ¥ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã¾ã™ã€‚

```terminal
supabase start
supabase stop
supabase status
supabase reset
supabase link

supabase gen types typescript --local > types/types_db.ts

supabase db diff
supabase migration new

supabase db dump --data-only -f supabase/seed.sql

supabase push
supabase pull

```

supabaseã®CLIã‚’ç›´æ¥å©ã

â€»supabaseã®CLIã¯ç›´æ¥å©ã‘ã‚‹ã‚ˆã†ã«ã—ã¦ãŠã„ãŸã»ã†ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚

## gité–‹ç™ºãƒ–ãƒ©ãƒ³ãƒ

main		ãƒ¡ã‚¤ãƒ³
dev			é–‹ç™º


devã§é–‹ç™ºã—ã¦ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚¨ãƒ©ãƒ¼ãŒãªãã€ãƒ“ãƒ«ãƒ‰ãŒé€šã£ãŸã‚‰mainã«ãƒãƒ¼ã‚¸ã—ã¦
mainã¯githubã¸pushã—ã¾ã™ã€‚

ã“ã‚Œã¯huskyã‚’ä½¿ã†ã¨åŠè‡ªå‹•åŒ–ã•ã‚Œã¾ã™ã€‚
é‡è¦ãªæ±ºå®šã¯äººé–“ã®æ‰‹ã§ã€ãã‚Œä»¥å¤–ã¯è‡ªå‹•åŒ–ã«å‡ºæ¥ã¾ã™ã€‚



## ncuã®å°å…¥ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

ncuã¯ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’èª¿ã¹ã‚‹ï¼†æ›´æ–°ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®vulnerabilityå¯¾å¿œãƒ•ãƒ­ãƒ¼ - Qiita
https://qiita.com/riversun/items/7f1679509f38b1ae8adb

```terminal
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæœ€æ–°ã‹ç¢ºèªã—ã¾ã™ã€‚
pnpm outdated

# å…¨ã¦æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã„å ´åˆã¯
ncu -u

```


## ãƒ¡ã‚¸ãƒ£ãƒ¼ã‹ãƒã‚¤ãƒŠãƒ¼ã‹ã€ã©ã“ã¾ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹ã®ã‹ã‚’é¸ã¶

### ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¾ã§æœ€æ–°ã«ã—ãŸã„å ´åˆ

```terminal
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i -g npm-check-updates

# å…¨ã¦æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã„å ´åˆã¯
ncu -u

# ã¨ã—ã¦ã‹ã‚‰ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦
pnpm install

```

### ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¾ã§æœ€æ–°ã«ã™ã‚‹å ´åˆ

```terminal
pnpm update

```

## ã‚‚ã†ä¸€åº¦ç¢ºèªã™ã‚‹

```terminal
pnpm outdated

# ç¢ºèªã—ã¦ã“ã‚Œã§è‰¯ã„ã®ãªã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã™ã‚‹ã€‚
npm install --legacy-peer-deps
pnpm install --legacy-peer-deps

```



----------------------------------------

# Vercel

## ã‚¢ãƒ—ãƒªã‚’Vercelã«ãƒ‡ãƒ—ãƒ­ã‚¤

Vercelã¨GitHubã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒªãƒ³ã‚¯ã•ã›ã‚‹ã“ã¨ã§
GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã—ãŸã¨åŒæ™‚ã«Vercelã«ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã™ã€‚


## Vercel CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ãƒ­ã‚°ã‚¤ãƒ³

```terminal
pnpm i -g vercel
vercel login

```

## vercelã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªãƒ³ã‚¯

ãƒ­ãƒ¼ã‚«ãƒ«ä¸Šã‹ã‚‰Vercelã¨ãƒªãƒ³ã‚¯ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é¸æŠ

```terminal
vercel link

```


## Vercelã§GitHubã¨é€£æº

Vercelã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã£ã¦ã€GitHubã®ãƒªãƒã‚¸ãƒˆãƒªã¨æ¥ç¶šã—ã¾ã™ã€‚



## ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

### Supabaseã®ç’°å¢ƒå¤‰æ•°

Vercelã®ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹

Supabase for Vercel
https://vercel.com/marketplace/supabase

ğŸ‘†Vercelã®ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã«SupabaseãŒã‚ã‚‹ã®ã§
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨
Supabaseã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ç¹‹ãŒã‚Šã€
ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã‚’è‡ªå‹•ã§ã—ã¦ãã‚Œã¾ã™ã€‚

```enviromnents
POSTGRES_URL
POSTGRES_PRISMA_URL
POSTGRES_URL_NON_POOLING
POSTGRES_USER
POSTGRES_HOST
POSTGRES_PASSWORD
POSTGRES_DATABASE
SUPABASE_SERVICE_ROLE_KEY
SUPABASE_ANON_KEY
SUPABASE_URL
SUPABASE_JWT_SECRET
NEXT_PUBLIC_SUPABASE_ANON_KEY
NEXT_PUBLIC_SUPABASE_URL

```

## ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜

```terminal
vercel env pull

```

ğŸ‘†Vercelã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã®ç’°å¢ƒå¤‰æ•°ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚

.env.localãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚
æ—¢å­˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã¨ä¸Šæ›¸ãã™ã‚‹ã‹èã„ã¦ãã¾ã™ã€‚


## Stripeã®ç’°å¢ƒå¤‰æ•°

æ‰‹å‹•ã§è¨­å®šã—ã¾ã™ã€‚

Stripe ã®ç’°å¢ƒå¤‰æ•°ã‚’Vercelã«è¨­å®šã—ã¾ã™ã€‚

Stripeã®ã‚µã‚¤ãƒˆã§ç’°å¢ƒå¤‰æ•°ã‚’å–å¾—ã—ã¦ãã¾ã™ã€‚

```Environment Variables
STRIPE_SECRET_KEY=sk_test_***
STRIPE_WEBHOOK_SECRET=whsec_***

```

STRIPE_SECRET_KEY

sk_test_51Oo9cWAN9U18k68cBjroyntAzn7kzhSCp0CMvFUOOUWpJUysCFelbef2Kmfg4TpjAOYqqe0ig62j2rbUgRglEUQd00ZI7LqOBR

# AUTH_SECRETã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¦å–å¾—ã—ã¾ã™ã€‚

readme.md Step 5 ã®æ‰‹é †ã‚’æ‰‹å‹•ã§ç”Ÿæˆã—ã¾ã™ã€‚

```generateAuthSecret.js
import crypto from "node:crypto";

function generateAuthSecret() {
	console.log("Step 5: Generating AUTH_SECRET...");
	const fx = crypto.randomBytes(32).toString("hex");
	console.log("ğŸš€ ~ generateAuthSecret ~ fx:", fx);
}

generateAuthSecret();

```


```Environment Variables
AUTH_SECRET=***

```

## Vercelã§ã®ãƒ“ãƒ«ãƒ‰

ã‚³ãƒ¼ãƒ‰ã¨ãã®ç’°å¢ƒå¤‰æ•°ãŒãã¡ã‚“ã¨è¨­å®šã•ã‚Œã¦ã„ã‚‹ã¨
ãƒ“ãƒ«ãƒ‰ãŒé€šã‚Šã¾ã™ã€‚

Vercelã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ãDomainsã‚’è¦‹ã¦ã¿ã‚‹ã¨
ã‚¢ãƒ—ãƒªã®å…¬é–‹ã—ã¦ã„ã‚‹URLãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã§ã‚‚ã†ã™ã§ã«è‡ªåˆ†ã®ã‚¢ãƒ—ãƒªãŒä¸–ç•Œã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã§ã‚³ãƒ¼ãƒ‰ã¨DBã¨å…¬é–‹ã®åŸºç¤çš„ãªéƒ¨åˆ†ã¯ã€å®Œäº†ã—ã¾ã—ãŸã€‚
ã‚ã¨ã¯æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ãã ã‘ã§ã™ã€‚



----------------------------------------

ã“ã“ã¾ã§ã¯ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚’å®Ÿéš›ã«å‹•ã‹ã™ã¾ã§
ã“ã“ã‹ã‚‰ä¸‹ã¯ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«å¤‰ãˆã‚‹

# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ

ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã®éå»ã®è¨˜äº‹ã‚’å‚ç…§



----------------------------------------

# ã‚µãƒ¼ãƒãƒ¼å´ã¨ãƒ­ãƒ¼ã‚«ãƒ«å´ã®ç’°å¢ƒå¤‰æ•°

Next.js App Router ã¨ Supabase ã¨ Stripe ã®ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚¢ãƒ—ãƒªã«è‰²ã‚“ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š #stripe - Qiita
https://qiita.com/masakinihirota/items/1ae7d17377b8bac524d5

ãƒ‘ãƒ¼ã‚¿ãƒ³1
Next.jsã‚µãƒ¼ãƒãƒ¼ (Vercelç­‰)
Supabaseã‚µãƒ¼ãƒãƒ¼

ãƒ‘ã‚¿ãƒ¼ãƒ³2
Next.jsãƒ­ãƒ¼ã‚«ãƒ«
Supabaseã‚µãƒ¼ãƒãƒ¼

ãƒ‘ã‚¿ãƒ¼ãƒ³3
Next.jsãƒ­ãƒ¼ã‚«ãƒ«
Supabaseãƒ­ãƒ¼ã‚«ãƒ« (Docker)



## ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ç«‹ã¡ä¸Šã’ å‹•ä½œç¢ºèª

```terminal
npm run dev
supabase start
stripe listen --forward-to=localhost:3000/api/webhooks
pnpm test

```


## ä½¿ç”¨æ™‚ã«åˆ‡ã‚Šæ›¿ãˆã‚‹

æœ¬ç•ªç’°å¢ƒã¯Vercelã«ç’°å¢ƒå¤‰æ•°ã‚’ç™»éŒ²ã—ã¾ã™ã€‚

é–‹ç™ºç’°å¢ƒã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§è¨­å®šã—ã¾ã™ã€‚


----------------------------------------

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹é–‹ç™ºãƒ„ãƒ¼ãƒ«

ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã«è¿½åŠ ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
Biome æ•´å½¢
husky ãƒã‚§ãƒƒã‚¯
shadcn/ui UIé›† ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
Storybook ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç®¡ç†
vitest ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º

## å€™è£œ(æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
å›½éš›åŒ– i18n

â†‘ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã«ã€ã“ã‚Œã‚‰ã®é–‹ç™ºç”¨ãƒ„ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ãŸã‚‚ã®ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¾ã™ã€‚

â€»lint-staged ã¨ husky ã®é•ã„ã¯ï¼Ÿ
lint-stagedã¯å¤‰æ›´ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒã‚§ãƒƒã‚¯ã‚’ã—ã¦ã€ãã‚ŒãŒé€šã£ãŸã‚‰huskyã§å…¨ä½“ã®ãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚‹ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚
ã—ã‹ã—huskyã«ã¯pre-commitæ©Ÿèƒ½ãŒã‚ã‚‹ã®ã§lint-stagedã®ä»£æ›¿ãŒå¯èƒ½ã§ã™ã®ã§lint-stagedã¯ä½¿ç”¨ã—ã¾ã›ã‚“ã€‚

huskyã®
pre-commitæ©Ÿèƒ½ã§gitã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹å‰ã«lintãƒã‚§ãƒƒã‚¯ç­‰ã‚’ã—ã¾ã™ã€‚
pre-pushæ©Ÿèƒ½ã§githubã«pushã™ã‚‹å‰ã«ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚


Next.js ã® ESLintã¨Prettierã€turborepoã€husky Next.jså…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ç‹¬è‡ªèª¿æŸ» #Next.js - Qiita

https://qiita.com/masakinihirota/items/f1a4796ad3a535f27664

ğŸ‘†ï¸é–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚’å€‹åˆ¥ã«èª¿æŸ»ã—ãŸæ™‚ã®è¨˜äº‹











# Biome æ•´å½¢

## CLI

ã¯ã˜ã‚ã‚‹ | Biome
https://biomejs.dev/ja/guides/getting-started/

```terminal
pnpm add --save-dev --save-exact @biomejs/biome
pnpm biome init

```

ä½¿ã„æ–¹

```terminal
pnpm biome format --write <files>
pnpm biome lint --write <files>
pnpm biome check --write <files>

```

### check ã‚³ãƒãƒ³ãƒ‰

è¤‡æ•°ã®ãƒ„ãƒ¼ãƒ«ã‚’ä¸€åº¦ã«å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚ç¾åœ¨ã¯ä»¥ä¸‹ã®ã“ã¨ã‚’è¡Œã„ã¾ã™ã€‚

ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒ³ãƒˆ
ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®æ•´ç†

## VScodeã®æ‹¡å¼µæ©Ÿèƒ½

ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã‹ã‚‰Biomeã‚’æ¢ã—ã¾ã™ã€‚

```settings.json
"editor.codeActionsOnSave": {
  "quickfix.biome": true,
  "source.organizeImports.biome": true
},
"editor.defaultFormatter": "biomejs.biome",
"[typescript]": {
   "editor.defaultFormatter": "biomejs.biome"
},

```

â€»ğŸ‘†ã®è¨­å®šã®å ´åˆã€è¨€èªã”ã¨ã«è¨­å®šã‚’ã—ã¾ã™ã€‚







----------------------------------------

# husky ãƒã‚§ãƒƒã‚¯

## husky ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```terminal
pnpm i -D husky
npx husky init

touch .husky/pre-commit
touch .husky/pre-push

```

## ã‚³ãƒŸãƒƒãƒˆæ™‚ã®è‡ªå‹•å®Ÿè¡Œ

gitã®ã‚³ãƒŸãƒƒãƒˆã®å‰ã« ***** ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```.husky/pre-commit

# pnpm run lint:fix
# pnpm run prettier-fix

```

## ãƒ—ãƒƒã‚·ãƒ¥æ™‚ã®è‡ªå‹•å®Ÿè¡Œ

githubã¸ã®pushã®å‰ã«buildã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```.husky/pre-push
pnpm run build 

```

ã“ã‚Œã§ãƒ“ãƒ«ãƒ‰ãŒé€šã‚‰ãšã€ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹ã¨pushã§ããªããªã‚Šã¾ã™ã€‚



----------------------------------------

# shadcn/ui UIé›† ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰

Next.js - shadcn/ui

https://ui.shadcn.com/docs/installation/next

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

â€»ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™ã€‚

```terminal
pnpm dlx shadcn@latest init
# ä¾‹: buttonã‚’è¿½åŠ 
pnpm dlx shadcn@latest add button

```

å¾Œã‹ã‚‰å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚


## ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰

Next.js - shadcn/ui
https://ui.shadcn.com/docs/dark-mode/next


Next.js App Router é–‹ç™ºç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã« shadcn/ui ã§ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã™ã‚‹ã€‚ #DarkMode - Qiita

https://qiita.com/masakinihirota/items/7cf6181ba61fe9dc3802

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```terminal
pnpm add next-themes
npx shadcn@latest add dropdown-menu

```

```terminal
touch components\theme-provider.tsx

```





----------------------------------------

# Storybook ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç®¡ç†

Get started with Storybook â€¢ Storybook docs

https://storybook.js.org/docs/get-started

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```terminal

pnpm create storybook@latest

```

â€»åˆå›ã¯è‡ªå‹•ã§StorybookãŒç«‹ã¡ä¸ŠãŒã‚Šã€Storybookãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒå§‹ã¾ã‚Šã¾ã™ã€‚
ã“ã®Storybookã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯ã‹ãªã‚Šå‡ºæ¥ãŒè‰¯ã„ã®ã§ã€ä¸€åº¦ã‚„ã£ã¦ã¿ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

## å®Ÿè¡Œæ–¹æ³•

```terminal
pnpm run storybook

```

http://localhost:6006/



## Storybookã§ã®TailwindCSSã®è¨­å®š

Storybook ã§ã‚‚ TailwindCSS ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

TailwindCSSã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’
`.storybook\preview.ts`
ğŸ‘†ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§èª­ã¿è¾¼ã¾ã›ã¾ã™ã€‚

â€»ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ã€TailwindCSSã®è¨­å®šã¯
`src/styles/main.css`
ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

```.storybook\preview.ts
import type { Preview } from '@storybook/react';

import "app/globals.css";

const preview: Preview = {
  parameters: {
    controls: {
      matchers: {
        color: /(background|color)$/i,
        date: /Date$/i
      }
    }
  }
};

export default preview;

```


## TailwindCSSã‚’è©¦ã™

TailwindCSSãŒåŠ¹ã„ã¦ã„ã‚‹ã‹ã©ã†ã‹ã®ãŠè©¦ã—ã® Buttonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã€‚

```app\button\Button.tsx
interface ButtonProps {
  label: string;
  onClick?: () => void;
}

export const Button = ({
  label,
}: ButtonProps) => {
  return (
    <button
      type="button"
      className="flex items-center justify-center px-4 py-2 text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:text-red-400 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
    >
      {label}
    </button>
  );
};

```

```app\button\Button.stories.tsx
import type { Meta, StoryObj } from '@storybook/react';
import { Button } from './Button';

const meta = {
  title: 'TailwindCSS/Button',
  component: Button,
  parameters: {
    layout: 'centered',
  },
  tags: ['autodocs'],
} satisfies Meta<typeof Button>;

export default meta;
type Story = StoryObj<typeof meta>;

export const Primary: Story = {
  args: {
    label: 'Button TailwindCSS',
  },
};

```

```src\app\page.tsx
import { Button } from './button/Button';

ãƒ»ãƒ»ãƒ»

<Button label="Storybook Test Button" />

ãƒ»ãƒ»ãƒ»

```
ğŸ‘† é©å½“ãªå ´æ‰€ã«Buttonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŒ¿å…¥ã—ã¦ã„ã¾ã™ã€‚

å‹•ä½œç¢ºèª

```terminal
pnpm run dev

pnpm run storybook

```

ğŸ‘†ãã‚Œãã‚Œåˆ¥ã®Terminalã§å®Ÿè¡Œã—ã¾ã™ã€‚

Storybook
http://localhost:6006/

TailwindCSSã®æ–‡å­—è‰²ãªã©ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å€¤ãŒåæ˜ ã•ã‚Œã¦ã„ã‚Œã°æˆåŠŸã§ã™ã€‚



## å‚è€ƒ

Storybookè¶…å…¥é–€ï¼ˆï¼‹Next.jsï¼‹TypeScriptï¼‰ #React - Qiita

https://qiita.com/masakinihirota/items/ac552b8b492d2b962818








----------------------------------------

# vitest ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º












----------------------------------------


laytouã«é–¢ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’1ã‹æ‰€ã«ã¾ã¨ã‚ã‚‹ã€‚

laytouãƒ•ã‚©ãƒ«ãƒ€ã®ä½œæˆ

```terminal
mkdir src\components\layout\

```


## ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã‚¢ãƒ—ãƒªã®ä½œã‚‹æ©Ÿèƒ½ã®ãƒœã‚¿ãƒ³ã‚’ä¸¦ã¹ã‚‹

ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
è¨€èª
åºƒå‘Š
Pricing
Account
ãƒœã‚¿ãƒ³ã®(ä»®)ä½œæˆ


ãƒ•ãƒƒã‚¿ãƒ¼



















































----------------------------------------







----------------------------------------







----------------------------------------







----------------------------------------

# ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã®åŸºæœ¬

ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ¥ã€…ã«ç®¡ç†ã™ã‚‹

ãƒ•ã‚§ãƒƒãƒã¯ã©ã£ã¡ã«ã™ã‚‹ã‹ãã®æ™‚è€ƒãˆã‚‹ã€‚

Next.js App routerã§ã® ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ¥ã€…ã«ç®¡ç† #AppRouter - Qiita
https://qiita.com/masakinihirota/items/2695cba68816794e33d3



----------------------------------------

# Supabase

â€»é–‹ç™ºã§åˆ©ç”¨ã™ã‚‹Supabaseã¯Webä¸Šã®ã‚µãƒ¼ãƒãƒ¼ã¨ã€
Docker Desktopã§ç«‹ã¡ä¸Šã’ãŸã®ã¨2ç¨®é¡ã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã‚‰ã‚’ä¾¿å®œä¸Šã‚µãƒ¼ãƒãƒ¼ã€ãƒ­ãƒ¼ã‚«ãƒ«ã¨å‘¼ã³ã¾ã™ã€‚

Docker Desktopã‚’åˆ©ç”¨ã—ã¦
ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«Supabaseã‚’å°å…¥ã—ã¾ã™ã€‚

## Supabaseã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨è¨˜äº‹

Local Dev with CLI | Supabase Docs

https://supabase.com/docs/guides/cli

## å‚è€ƒ

Supabase ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ ï¼‹ ã‚µãƒ¼ãƒãƒ¼é‹ç”¨ 2023å¹´9æœˆ (with Next.js 13 App router) #Docker - Qiita

https://qiita.com/masakinihirota/items/be94b4c74a7850a4b79c

Supabase ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ ï¼‹ ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ #PostgreSQL - Qiita

https://qiita.com/masakinihirota/items/f12d16c31e6775f26b84

Next.js 13 App router ã¨ Supabase ã§ã®ï¼”ã¤ã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³• #Next.js - Qiita

https://qiita.com/masakinihirota/items/b4b168a056dc10776d87

Supabase Auth ã‚¹ã‚­ãƒ¼ãƒ ã¨ ãã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®è©³ç´° #PostgreSQL - Qiita

https://qiita.com/masakinihirota/items/7f65f732ecbafbd5cb00




## Tips

<details><summary>Tips Supabase</summary>

Supabaseã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‹ã™ã¨é‡ããªã‚Šã™ãã¡ã‚ƒã†å•é¡Œã‚’è§£æ±ºã™ã‚‹ã€Windowså‹¢å‘ã‘ã€‘
https://zenn.dev/masa5714/articles/3b5ea07c15f159


é–‹ç™ºä¸­ã¯ä½¿ã‚ãªã„æ©Ÿèƒ½ã‚’åˆ‡ã£ã¦ãŠãã“ã¨ã§ã€PCãŒè»½ããªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ã€â†“ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã€inbucketï¼ˆãƒ¡ãƒ¼ãƒ«ï¼‰ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
ã®enabledã®é …ç›®ã‚’falseã§åˆ‡ã£ã¦ãŠãã¾ã™ã€‚

è¨­å®šä¾‹

```supabase\config.toml
[realtime]
enabled = false

ãƒ»ãƒ»ãƒ»

[inbucket]
enabled = false

ãƒ»ãƒ»ãƒ»

[storage]
enabled = false

```

</details>



## Supabase CLIã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

```terminal
scoop update supabase

```

## Supabaseã«ãƒ­ã‚°ã‚¤ãƒ³

```terminal
supabase login

```


# Supabaseã®ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒªãƒ³ã‚¯

```terminal
supabase link 

```

â€»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚

```terminal
supabase projects list

```


ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ³

```terminal
supabase migration list

```


## Webã‚¢ãƒ—ãƒªã®ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿

ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã¯auth.usersãƒ†ãƒ¼ãƒ–ãƒ«ã«ç™»éŒ²ã•ã‚Œã¾ã™ã€‚

ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’Webã‚¢ãƒ—ãƒªå´ã§ã‚‚ä½¿ã„ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€
public.rootAccountã‚’ä½œæˆã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚

auth.usersãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’public.rootAccountãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚



## Drizzleã‚’ä½¿ã£ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ



## Supabaseã®å‹

å‹ã®ä¿å­˜å ´æ‰€ã‚’ä½œæˆã€‚

```terminal
mkdir types

```

## å‹ã®ç”Ÿæˆ

```terminal
#ã‚µãƒ¼ãƒãƒ¼
supabase gen types typescript --project-id [Reference ID] > types/types_db.ts

#ãƒ­ãƒ¼ã‚«ãƒ«
supabase gen types typescript --local --schema public > types/types_db.ts

supabase gen types typescript --local > types/types_db.ts

```

â€»[Reference ID] Supabaseã® Reference ID ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

publicã®å ´åˆ --schema ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯çœç•¥ã§ãã¾ã™ã€‚
`--schema public`

æˆåŠŸã™ã‚‹ã¨å‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚



## 





----------------------------------------

# Stripeã®è¨­å®š ãƒ­ãƒ¼ã‚«ãƒ«å´ï¼ˆVSCodeä¸Šã§ã®ï¼‰Webhookã®è¨­å®š

```terminal
stripe login

Your pairing code *****

https://dashboard.stripe.com/stripecli/*****

```

ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚


URLãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ãã®URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã¾ã™ã€‚
ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚

Stripe CLI ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã™ã‹ï¼Ÿ
ã¨èã‹ã‚Œã‚‹ã®ã§ã€

pairing codeã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã¯ãšãªã®ã§ã€

ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™ã€‚

```ãƒ–ãƒ©ã‚¦ã‚¶
ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã—ãŸ
ã“ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã¦ã€CLI ã«æˆ»ã‚‹ã“ã¨ãŒã§ãã¾

```

ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¾ã™ã€‚


# Stripeè¨­å®šä¾¡æ ¼ã®åæ˜ ã€‚

ã‚µãƒ³ãƒ—ãƒ«ã§
fixtures\stripe-fixtures.json
ãŒäº‹å‰ã«ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚’Stripeã«åæ˜ ã•ã›ã¾ã™ã€‚

â€»ğŸ‘‡ã“ã®æ‰‹ç¶šãã¯é †ç•ªã‚’é©å½“ã«ã‚„ã‚‹ã¨åæ˜ ã•ã‚Œãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

Next.jsã®ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã¦(pnpm run dev)ãŠã„ã¦ã‹ã‚‰ã€‚
Stripeã®APIç›£è¦–(stripe listen)
ä¾¡æ ¼è¨­å®šã®å®Ÿè¡Œ(stripe fixtures)
â€»ã“ã®é †ç•ªã‚’å®ˆã£ã¦ãã ã•ã„ã€‚

å®Ÿè¡Œé †

```terminal
pnpm run dev

```

```ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ãã¨
No subscription pricing plans found. Create them in your Stripe Dashboard.

```

ã¨ã¾ã åæ˜ ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®terminalã§

```terminal
stripe listen --forward-to http://127.0.0.1:3000/api/webhooks

```

ğŸ‘† stripeã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãŠãã¾ã™ã€‚

ã¾ãŸã€åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®terminalã§

```terminal
stripe fixtures fixtures/stripe-fixtures.json

```

ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€stripe-fixtures.jsonã«æ›¸ã„ãŸStripeã®è¨­å®šãŒåæ˜ ã•ã‚Œã¾ã™ã€‚

â€»ã“ã®stripe-fixtures.jsonã¯è¿½è¨˜å‹ã§ã™ã€å¾Œã‹ã‚‰ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã—ã¦ã‚‚ä¾¡æ ¼ãŒæ–°ãŸã«è¿½åŠ ã•ã‚Œã‚‹ã ã‘ã§ã™ã€‚

â†‘ãã‚Œãã‚Œåˆ¥ã®terminalã‚’é–‹ã„ã¦å®Ÿè¡Œã—ã¾ã™ã€‚
ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€
æˆåŠŸã™ã‚Œã°ã€ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã®ãƒ‡ãƒ¢ç”»é¢ã®ã‚ˆã†ã« ã‚µãƒ–ã‚¹ã‚¯ ãƒ—ãƒ©ãƒ³ ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚



## Stripeã®è¨­å®š ãƒ­ãƒ¼ã‚«ãƒ«å´ï¼ˆVSCodeä¸Šã§ã®ï¼‰Webhookã®è¨­å®š

```terminal
stripe login

Your pairing code *****

https://dashboard.stripe.com/stripecli/*****

```

ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚


URLãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ãã®URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã¾ã™ã€‚
ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚

Stripe CLI ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã™ã‹ï¼Ÿ
ã¨èã‹ã‚Œã‚‹ã®ã§ã€

pairing codeã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã¯ãšãªã®ã§ã€

ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™ã€‚

```ãƒ–ãƒ©ã‚¦ã‚¶
ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã—ãŸ
ã“ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã¦ã€CLI ã«æˆ»ã‚‹ã“ã¨ãŒã§ãã¾

```

ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¾ã™ã€‚


# Stripeè¨­å®šä¾¡æ ¼ã®åæ˜ ã€‚

ã‚µãƒ³ãƒ—ãƒ«ã§
fixtures\stripe-fixtures.json
ãŒäº‹å‰ã«ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚’Stripeã«åæ˜ ã•ã›ã¾ã™ã€‚

â€»ğŸ‘‡ã“ã®æ‰‹ç¶šãã¯é †ç•ªã‚’é©å½“ã«ã‚„ã‚‹ã¨åæ˜ ã•ã‚Œãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

Next.jsã®ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã¦(pnpm run dev)ãŠã„ã¦ã‹ã‚‰ã€‚
Stripeã®APIç›£è¦–(stripe listen)
ä¾¡æ ¼è¨­å®šã®å®Ÿè¡Œ(stripe fixtures)
â€»ã“ã®é †ç•ªã‚’å®ˆã£ã¦ãã ã•ã„ã€‚

å®Ÿè¡Œé †

```terminal
pnpm run dev

```

```ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ãã¨
No subscription pricing plans found. Create them in your Stripe Dashboard.

```

ã¨ã¾ã åæ˜ ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®terminalã§

```terminal
stripe listen --forward-to http://127.0.0.1:3000/api/webhooks

```

ğŸ‘† stripeã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãŠãã¾ã™ã€‚

ã¾ãŸã€åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®terminalã§

```terminal
stripe fixtures fixtures/stripe-fixtures.json

```

ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€stripe-fixtures.jsonã«æ›¸ã„ãŸStripeã®è¨­å®šãŒåæ˜ ã•ã‚Œã¾ã™ã€‚

â€»ã“ã®stripe-fixtures.jsonã¯è¿½è¨˜å‹ã§ã™ã€å¾Œã‹ã‚‰ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã—ã¦ã‚‚ä¾¡æ ¼ãŒæ–°ãŸã«è¿½åŠ ã•ã‚Œã‚‹ã ã‘ã§ã™ã€‚

â†‘ãã‚Œãã‚Œåˆ¥ã®terminalã‚’é–‹ã„ã¦å®Ÿè¡Œã—ã¾ã™ã€‚
ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€
æˆåŠŸã™ã‚Œã°ã€ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã®ãƒ‡ãƒ¢ç”»é¢ã®ã‚ˆã†ã« ã‚µãƒ–ã‚¹ã‚¯ ãƒ—ãƒ©ãƒ³ ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚






## 





----------------------------------------

# GitHubèªè¨¼ã®è¿½åŠ 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------

# 





## 





## 





----------------------------------------
----------------------------------------


